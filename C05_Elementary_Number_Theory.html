<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5. &#21021;&#31561;&#25968;&#35770; &mdash; Mathematics in Lean 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=92fd9be5" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=2709fde1"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Structures" href="C06_Structures.html" />
    <link rel="prev" title="4. &#38598;&#21512;&#21644;&#20989;&#25968;" href="C04_Sets_and_Functions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. &#24341;&#35328;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. &#22522;&#30784;&#30693;&#35782;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C03_Logic.html">3. &#36923;&#36753;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C04_Sets_and_Functions.html">4. &#38598;&#21512;&#21644;&#20989;&#25968;</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. &#21021;&#31561;&#25968;&#35770;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#section-irrational-roots">5.1. &#26080;&#29702;&#26681;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#section-induction-and-recursion">5.2. &#24402;&#32435;&#21644;&#36882;&#24402;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#section-infinitely-many-primes">5.3. &#32032;&#25968;&#26080;&#31351;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C06_Structures.html">6. Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="C07_Hierarchies.html">7. Hierarchies</a></li>
<li class="toctree-l1"><a class="reference internal" href="C08_Groups_and_Rings.html">8. Groups and Rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="C09_Linear_Algebra.html">9. Linear algebra</a></li>
<li class="toctree-l1"><a class="reference internal" href="C10_Topology.html">10. Topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="C11_Differential_Calculus.html">11. Differential Calculus</a></li>
<li class="toctree-l1"><a class="reference internal" href="C12_Integration_and_Measure_Theory.html">12. Integration and Measure Theory</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">5. </span>&#21021;&#31561;&#25968;&#35770;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C05_Elementary_Number_Theory.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="number-theory">
<span id="id1"></span><h1><span class="section-number">5. </span>&#21021;&#31561;&#25968;&#35770;<a class="headerlink" href="#number-theory" title="Link to this heading">&#61633;</a></h1>
<p>&#22312;&#26412;&#31456;&#20013;&#65292;&#25105;&#20204;&#21521;&#20320;&#23637;&#31034;&#22914;&#20309;&#24418;&#24335;&#21270;&#25968;&#35770;&#20013;&#30340;&#19968;&#20123;&#21021;&#31561;&#32467;&#26524;&#12290;
&#24403;&#25105;&#20204;&#22788;&#29702;&#26356;&#23454;&#36136;&#24615;&#30340;&#25968;&#23398;&#20869;&#23481;&#26102;&#65292;
&#35777;&#26126;&#20250;&#21464;&#24471;&#26356;&#38271;&#12289;&#26356;&#22797;&#26434;&#65292;
&#20197;&#20320;&#24050;&#32463;&#25484;&#25569;&#30340;&#25216;&#33021;&#20026;&#22522;&#30784;&#12290;</p>
<section id="section-irrational-roots">
<span id="id2"></span><h2><span class="section-number">5.1. </span>&#26080;&#29702;&#26681;<a class="headerlink" href="#section-irrational-roots" title="Link to this heading">&#61633;</a></h2>
<p>&#35753;&#25105;&#20204;&#20174;&#21476;&#24076;&#33098;&#20154;&#30693;&#36947;&#30340;&#19968;&#20010;&#20107;&#23454;&#24320;&#22987;&#65292;&#21363; 2 &#30340;&#24179;&#26041;&#26681;&#26159;&#26080;&#29702;&#25968;&#12290;
&#22914;&#26524;&#25105;&#20204;&#20551;&#23450;&#24182;&#38750;&#22914;&#27492;&#65292;
&#21017;&#25105;&#20204;&#21487;&#20197;&#23558;&#20854;&#34920;&#31034;&#20026;&#26368;&#31616;&#20998;&#25968; <span class="math notranslate nohighlight">\(\sqrt{2} = a / b\)</span>.
&#20004;&#36793;&#21462;&#24179;&#26041;&#24471;&#21040; <span class="math notranslate nohighlight">\(a^2 = 2 b^2\)</span>,
&#36825;&#24847;&#21619;&#30528; <span class="math notranslate nohighlight">\(a\)</span> &#26159;&#20598;&#25968;&#12290;
&#22914;&#26524;&#25105;&#20204;&#35760; <span class="math notranslate nohighlight">\(a = 2c\)</span>, &#21017;&#26377; <span class="math notranslate nohighlight">\(4c^2 = 2 b^2\)</span>,
&#20174;&#32780; <span class="math notranslate nohighlight">\(b^2 = 2 c^2\)</span>.
&#36825;&#24847;&#21619;&#30528; <span class="math notranslate nohighlight">\(b\)</span> &#20063;&#26159;&#20598;&#25968;&#65292;
&#36825;&#21644;&#25105;&#20204;&#20551;&#35774;&#30340;&#20107;&#23454;&#65292;&#21363; <span class="math notranslate nohighlight">\(a / b\)</span> &#24050;&#32422;&#20998;&#21040;&#26368;&#31616;&#30683;&#30462;&#12290;</p>
<p>&#31216; <span class="math notranslate nohighlight">\(a / b\)</span> &#26159;&#26368;&#31616;&#20998;&#25968;&#24847;&#21619;&#30528; <span class="math notranslate nohighlight">\(a\)</span> &#21644; <span class="math notranslate nohighlight">\(b\)</span> &#27809;&#26377;&#20219;&#20309;&#20844;&#22240;&#23376;&#65292;
&#20063;&#23601;&#26159;&#35828;&#65292;&#23427;&#20204;&#26159; <em>&#20114;&#32032;</em> &#30340;&#12290;
Mathlib &#25226;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">Nat.Coprime</span> <span class="pre">m</span> <span class="pre">n</span></code> &#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">Nat.gcd</span> <span class="pre">m</span> <span class="pre">n</span> <span class="pre">=</span> <span class="pre">1</span></code>.
&#20351;&#29992; Lean &#30340;&#21311;&#21517;&#25237;&#24433;&#35760;&#21495;&#65292;&#22914;&#26524; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">t</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">Nat</span></code> &#31867;&#22411;&#30340;&#34920;&#36798;&#24335;&#65292;
&#25105;&#20204;&#21487;&#20197;&#29992; <code class="docutils literal notranslate"><span class="pre">s.Coprime</span> <span class="pre">t</span></code> &#26367;&#20195; <code class="docutils literal notranslate"><span class="pre">Nat.Coprime</span> <span class="pre">s</span> <span class="pre">t</span></code>,
&#32780; <code class="docutils literal notranslate"><span class="pre">Nat.gcd</span></code> &#20063;&#26377;&#31867;&#20284;&#30340;&#34920;&#36798;&#26041;&#24335;&#12290;
&#20687;&#24448;&#24120;&#19968;&#26679;&#65292;Lean &#36890;&#24120;&#20250;&#22312;&#24517;&#35201;&#26102;&#33258;&#21160;&#23637;&#24320; <code class="docutils literal notranslate"><span class="pre">Nat.Coprime</span></code> &#30340;&#23450;&#20041;&#65292;
&#20294;&#25105;&#20204;&#20063;&#21487;&#20197;&#36890;&#36807;&#37325;&#20889;&#25110;&#31616;&#21270;&#26631;&#35782;&#31526; <code class="docutils literal notranslate"><span class="pre">Nat.Coprime</span></code> &#26469;&#25163;&#21160;&#25805;&#20316;&#12290;
<code class="docutils literal notranslate"><span class="pre">norm_num</span></code> &#31574;&#30053;&#36275;&#22815;&#26234;&#33021;&#65292;&#21487;&#20197;&#35745;&#31639;&#20855;&#20307;&#20540;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#print</span> <span class="n">Nat.Coprime</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">m.Coprime</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">m.gcd</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
  <span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">m.Coprime</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">m.gcd</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.Coprime</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">exact</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Nat.Coprime</span> <span class="mi">12</span> <span class="mi">7</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Nat.gcd</span> <span class="mi">12</span> <span class="mi">8</span> <span class="bp">=</span> <span class="mi">4</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#24050;&#32463;&#22312; <a class="reference internal" href="C02_Basics.html#more-on-order-and-divisibility"><span class="std std-numref">Section 2.4</span></a> &#20013;&#36935;&#21040;&#36807; <code class="docutils literal notranslate"><span class="pre">gcd</span></code> &#20989;&#25968;&#12290;
&#36824;&#26377;&#19968;&#20010;&#29992;&#20110;&#25972;&#25968;&#30340; <code class="docutils literal notranslate"><span class="pre">gcd</span></code> &#29256;&#26412;&#65307;
&#25105;&#20204;&#23558;&#22312;&#19979;&#38754;&#22238;&#21040;&#19981;&#21516;&#25968;&#31995;&#20043;&#38388;&#20851;&#31995;&#30340;&#35752;&#35770;&#20013;&#12290;
&#29978;&#33267;&#36824;&#26377;&#24191;&#20041; <code class="docutils literal notranslate"><span class="pre">gcd</span></code> &#20989;&#25968;&#20197;&#21450;&#24191;&#20041; <code class="docutils literal notranslate"><span class="pre">Prime</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Coprime</span></code> &#30340;&#27010;&#24565;&#65292;
&#23427;&#20204;&#22312;&#19968;&#33324;&#31867;&#22411;&#30340;&#20195;&#25968;&#32467;&#26500;&#20013;&#26377;&#24847;&#20041;&#12290;
&#25105;&#20204;&#23558;&#22312;&#19979;&#19968;&#31456;&#20102;&#35299; Lean &#26159;&#22914;&#20309;&#31649;&#29702;&#36825;&#31181;&#19968;&#33324;&#24615;&#30340;&#12290;
&#21516;&#26102;&#65292;&#22312;&#26412;&#33410;&#20013;&#65292;&#25105;&#20204;&#23558;&#25226;&#27880;&#24847;&#21147;&#38480;&#21046;&#21040;&#33258;&#28982;&#25968;&#12290;</p>
<p>&#25105;&#20204;&#36824;&#38656;&#35201;&#32032;&#25968;&#30340;&#27010;&#24565;&#65292; <code class="docutils literal notranslate"><span class="pre">Nat.Prime</span></code>.
&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">Nat.prime_def_lt</span></code> &#25552;&#20379;&#20102;&#19968;&#20010;&#29087;&#24713;&#30340;&#21051;&#30011;&#65292;
<code class="docutils literal notranslate"><span class="pre">Nat.Prime.eq_one_or_self_of_dvd</span></code> &#25552;&#20379;&#20102;&#21478;&#19968;&#20010;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="n">Nat.prime_def_lt</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">prime_p</span> <span class="o">:</span> <span class="n">Nat.Prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">p</span> <span class="bp">&#8743;</span> <span class="bp">&#8704;</span> <span class="n">m</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">p</span> <span class="bp">&#8594;</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">p</span> <span class="bp">&#8594;</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rwa</span> <span class="o">[</span><span class="n">Nat.prime_def_lt</span><span class="o">]</span> <span class="n">at</span> <span class="n">prime_p</span>

<span class="k">#check</span> <span class="n">Nat.Prime.eq_one_or_self_of_dvd</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">prime_p</span> <span class="o">:</span> <span class="n">Nat.Prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">m</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">p</span> <span class="bp">&#8594;</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">&#8744;</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">p</span> <span class="o">:=</span>
  <span class="n">prime_p.eq_one_or_self_of_dvd</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Nat.Prime</span> <span class="mi">17</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>

<span class="c1">-- commonly used</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">Nat.Prime</span> <span class="mi">2</span> <span class="o">:=</span>
  <span class="n">Nat.prime_two</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Nat.Prime</span> <span class="mi">3</span> <span class="o">:=</span>
  <span class="n">Nat.prime_three</span>
</pre></div>
</div>
<p>&#22312;&#33258;&#28982;&#25968;&#20013;&#65292;&#32032;&#25968;&#20855;&#26377;&#19981;&#33021;&#20889;&#25104;&#38750;&#24179;&#20961;&#22240;&#23376;&#30340;&#20056;&#31215;&#30340;&#24615;&#36136;&#12290;
&#22312;&#26356;&#24191;&#27867;&#30340;&#25968;&#23398;&#32972;&#26223;&#19979;&#65292;&#29615;&#20013;&#20855;&#26377;&#27492;&#24615;&#36136;&#30340;&#20803;&#32032;&#34987;&#31216;&#20026; <em>&#19981;&#21487;&#32422;</em> &#30340;&#12290;
&#29615;&#30340;&#20803;&#32032;&#31216;&#20026; <em>&#32032;&#20803;</em>&#65292;&#22914;&#26524;&#27599;&#24403;&#23427;&#25972;&#38500;&#19968;&#20010;&#20056;&#31215;&#26102;&#65292;&#23427;&#25972;&#38500;&#20854;&#20013;&#19968;&#20010;&#22240;&#23376;&#12290;
&#33258;&#28982;&#25968;&#30340;&#19968;&#20010;&#37325;&#35201;&#24615;&#36136;&#26159;&#65292;&#23545;&#23427;&#26469;&#35828;&#36825;&#20004;&#20010;&#27010;&#24565;&#26159;&#19968;&#33268;&#30340;&#65292;
&#36825;&#20135;&#29983;&#20102;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">Nat.Prime.dvd_mul</span></code>.</p>
<p>&#25105;&#20204;&#21487;&#20197;&#21033;&#29992;&#36825;&#20010;&#20107;&#23454;&#24314;&#31435;&#19978;&#38754;&#35770;&#35777;&#20013;&#30340;&#19968;&#20010;&#20851;&#38190;&#24615;&#36136;&#65306;
&#22914;&#26524;&#19968;&#20010;&#25968;&#30340;&#24179;&#26041;&#26159;&#20598;&#25968;&#65292;&#37027;&#20040;&#36825;&#20010;&#25968;&#20063;&#26159;&#20598;&#25968;&#12290;
Mathlib &#22312; <code class="docutils literal notranslate"><span class="pre">Algebra.Group.Even</span></code> &#20013;&#23450;&#20041;&#20102;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">Even</span></code>,
&#20294;&#20986;&#20110;&#19979;&#38754;&#20250;&#28548;&#28165;&#30340;&#21407;&#22240;&#65292;
&#25105;&#20204;&#23558;&#31616;&#21333;&#22320;&#29992; <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">&#8739;</span> <span class="pre">m</span></code> &#34920;&#31034; <code class="docutils literal notranslate"><span class="pre">m</span></code> &#26159;&#20598;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="n">Nat.Prime.dvd_mul</span>
<span class="k">#check</span> <span class="n">Nat.Prime.dvd_mul</span> <span class="n">Nat.prime_two</span>
<span class="k">#check</span> <span class="n">Nat.prime_two.dvd_mul</span>

<span class="kd">theorem</span> <span class="n">even_of_even_sqr</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">m</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">Nat.prime_two.dvd_mul</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">cases</span> <span class="n">h</span> <span class="bp">&lt;;&gt;</span> <span class="n">assumption</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">m</span> <span class="o">:=</span>
  <span class="n">Nat.Prime.dvd_of_dvd_pow</span> <span class="n">Nat.prime_two</span> <span class="n">h</span>
</pre></div>
</div>
<p>&#38543;&#30528;&#25105;&#20204;&#30340;&#32487;&#32493;&#65292;&#20320;&#23558;&#38656;&#35201;&#29087;&#32451;&#22320;&#26597;&#25214;&#25152;&#38656;&#30340;&#20107;&#23454;&#12290;
&#35831;&#35760;&#20303;&#65292;&#22914;&#26524;&#20320;&#33021;&#29468;&#20986;&#21517;&#31216;&#30340;&#21069;&#32512;&#24182;&#19988;&#20320;&#24050;&#32463;&#23548;&#20837;&#20102;&#30456;&#20851;&#24211;&#65292;
&#20320;&#21487;&#20197;&#20351;&#29992;&#21046;&#34920;&#31526;&#34917;&#20840;&#65288;&#26377;&#26102;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">ctrl-tab</span></code>&#65289;&#26469;&#26597;&#25214;&#20320;&#22312;&#23547;&#25214;&#30340;&#19996;&#35199;&#12290;
&#20320;&#21487;&#20197;&#22312;&#20219;&#20309;&#26631;&#35782;&#31526;&#19978;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">ctrl-click</span></code> &#26469;&#36339;&#36716;&#21040;&#25991;&#20214;&#20013;&#23427;&#30340;&#23450;&#20041;&#25152;&#22312;&#20301;&#32622;&#65292;
&#20351;&#20320;&#33021;&#22815;&#27983;&#35272;&#38468;&#36817;&#30340;&#23450;&#20041;&#21644;&#23450;&#29702;&#12290;
&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;
<a class="reference external" href="https://leanprover-community.github.io/">Lean community web pages</a>
&#37324;&#30340;&#25628;&#32034;&#24341;&#25806;&#65292;
&#22914;&#26524;&#20854;&#20182;&#26041;&#27861;&#37117;&#22833;&#36133;&#20102;&#65292;
&#19981;&#35201;&#32670;&#20110;&#21521;
<a class="reference external" href="https://leanprover.zulipchat.com/">Zulip</a>
&#25552;&#38382;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
  <span class="c1">-- apply? suggests the following:</span>
  <span class="o">(</span><span class="n">mul_right_inj&#39;</span> <span class="n">h&#39;</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="n">h</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#23545;&#26681;&#21495;&#20108;&#26080;&#29702;&#24615;&#35777;&#26126;&#30340;&#26680;&#24515;&#21253;&#21547;&#22312;&#19979;&#21015;&#23450;&#29702;&#20013;&#12290;
&#30475;&#30475;&#20320;&#33021;&#19981;&#33021;&#22635;&#34917;&#36825;&#20010;&#35777;&#26126;&#26775;&#27010;&#65292;
&#35831;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">even_of_even_sqr</span></code> &#20197;&#21450;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">Nat.dvd_gcd</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">coprime_mn</span> <span class="o">:</span> <span class="n">m.Coprime</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">&#8800;</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">sqr_eq</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">m</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="n">obtain</span> <span class="o">&#10216;</span><span class="n">k</span><span class="o">,</span> <span class="n">meq</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="n">dvd_iff_exists_eq_mul_left.mp</span> <span class="n">this</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">rw</span> <span class="o">[</span><span class="bp">&#8592;</span> <span class="n">sqr_eq</span><span class="o">,</span> <span class="n">meq</span><span class="o">]</span>
    <span class="n">ring</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">m.gcd</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8739;</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="n">norm_num</span> <span class="n">at</span> <span class="n">this</span>
</pre></div>
</div>
<p>&#20107;&#23454;&#19978;&#65292;&#21482;&#38656;&#24456;&#23569;&#30340;&#25913;&#21464;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#25226; <code class="docutils literal notranslate"><span class="pre">2</span></code> &#26367;&#25442;&#20026;&#20219;&#24847;&#32032;&#25968;&#12290;
&#22312;&#19979;&#19968;&#20010;&#20363;&#23376;&#20013;&#35797;&#19968;&#35797;&#12290;
&#22312;&#35777;&#26126;&#30340;&#26411;&#23614;&#65292;&#20320;&#38656;&#35201;&#30001; <code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">&#8739;</span> <span class="pre">1</span></code> &#23548;&#20986;&#30683;&#30462;&#12290;
&#20320;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Nat.Prime.two_le</span></code>,
&#23427;&#26159;&#35828;&#20219;&#24847;&#32032;&#25968;&#22823;&#20110;&#25110;&#31561;&#20110;&#20108;&#65292;
&#20197;&#21450; <code class="docutils literal notranslate"><span class="pre">Nat.le_of_dvd</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">coprime_mn</span> <span class="o">:</span> <span class="n">m.Coprime</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">prime_p</span> <span class="o">:</span> <span class="n">p.Prime</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">&#8800;</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#32771;&#34385;&#21478;&#19968;&#31181;&#24605;&#36335;&#12290;
&#36825;&#26159;&#33509; <span class="math notranslate nohighlight">\(p\)</span> &#26159;&#32032;&#25968;&#21017; <span class="math notranslate nohighlight">\(m^2 \ne p n^2\)</span> &#30340;&#19968;&#20010;&#24555;&#36895;&#35777;&#26126;&#65306;
&#22914;&#26524;&#25105;&#20204;&#20551;&#35774; <span class="math notranslate nohighlight">\(m^2 = p n^2\)</span>,
&#32771;&#34385; <span class="math notranslate nohighlight">\(m\)</span> &#21644; <span class="math notranslate nohighlight">\(n\)</span> &#30340;&#32032;&#20998;&#35299;&#65292;
&#21017; <span class="math notranslate nohighlight">\(p\)</span> &#22312;&#31561;&#24335;&#24038;&#36793;&#20986;&#29616;&#20598;&#25968;&#27425;&#32780;&#22312;&#21491;&#36793;&#20986;&#29616;&#22855;&#25968;&#27425;&#65292;&#30683;&#30462;&#12290;
&#27880;&#24847;&#21040;&#36825;&#20010;&#35770;&#35777;&#35201;&#27714; <span class="math notranslate nohighlight">\(n\)</span>, &#20174;&#32780; <span class="math notranslate nohighlight">\(m\)</span>,
&#19981;&#31561;&#20110;&#38646;&#12290;
&#19979;&#38754;&#30340;&#24418;&#24335;&#21270;&#35777;&#23454;&#20102;&#36825;&#20010;&#20551;&#35774;&#26159;&#20805;&#20998;&#30340;&#12290;</p>
<p>&#21807;&#19968;&#22240;&#23376;&#20998;&#35299;&#23450;&#29702;&#34920;&#26126;&#65292;
&#20219;&#20309;&#22823;&#20110;&#38646;&#30340;&#33258;&#28982;&#25968;&#21487;&#20197;&#29992;&#21807;&#19968;&#30340;&#26041;&#24335;&#20889;&#25104;&#32032;&#25968;&#30340;&#20056;&#31215;&#12290;
Mathlib &#21253;&#21547;&#20854;&#24418;&#24335;&#21270;&#29256;&#26412;&#65292;&#20351;&#29992;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">Nat.primeFactorsList</span></code> &#34920;&#36798;&#65292;
&#35813;&#20989;&#25968;&#20197;&#38750;&#36882;&#20943;&#39034;&#24207;&#36820;&#22238;&#25968;&#30340;&#32032;&#22240;&#25968;&#21015;&#34920;&#12290;
&#27492;&#24211;&#35777;&#26126;&#20102; <code class="docutils literal notranslate"><span class="pre">Nat.factors</span> <span class="pre">n</span></code> &#30340;&#20840;&#37096;&#20803;&#32032;&#37117;&#26159;&#32032;&#25968;&#65292;
&#20219;&#24847;&#22823;&#20110;&#38646;&#30340; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#31561;&#20110;&#23427;&#30340;&#22240;&#23376;&#30340;&#20056;&#31215;&#65292;
&#20197;&#21450;&#33509; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#31561;&#20110;&#21478;&#19968;&#21015;&#32032;&#25968;&#30340;&#20056;&#31215;&#65292;
&#21017;&#36825;&#20010;&#21015;&#26159; <code class="docutils literal notranslate"><span class="pre">Nat.factors</span> <span class="pre">n</span></code> &#30340;&#19968;&#20010;&#25490;&#21015;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="n">Nat.primeFactorsList</span>
<span class="k">#check</span> <span class="n">Nat.prime_of_mem_primeFactorsList</span>
<span class="k">#check</span> <span class="n">Nat.prod_primeFactorsList</span>
<span class="k">#check</span> <span class="n">Nat.primeFactorsList_unique</span>
</pre></div>
</div>
<p>&#20320;&#21487;&#20197;&#27983;&#35272;&#36825;&#20123;&#23450;&#29702;&#21644;&#38468;&#36817;&#30340;&#20854;&#20182;&#23450;&#29702;&#65292;
&#21363;&#20351;&#25105;&#20204;&#36824;&#27809;&#26377;&#35848;&#21040;&#21015;&#34920;&#25104;&#21592;&#12289;&#20056;&#31215;&#25110;&#25490;&#21015;&#12290;
&#25105;&#20204;&#25163;&#22836;&#30340;&#20219;&#21153;&#19981;&#38656;&#35201;&#36825;&#20123;&#12290;
&#25105;&#20204;&#20250;&#20351;&#29992; Mathlib &#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">Nat.factorization</span></code> &#20316;&#20026;&#26367;&#20195;&#21697;&#65292;
&#23427;&#25226;&#21516;&#26679;&#30340;&#25968;&#25454;&#34920;&#31034;&#20026;&#20989;&#25968;&#12290;
&#29305;&#21035;&#22320;&#65292;<code class="docutils literal notranslate"><span class="pre">Nat.factorization</span> <span class="pre">n</span> <span class="pre">p</span></code>,
&#20063;&#35760;&#20026; <code class="docutils literal notranslate"><span class="pre">n.factorization</span> <span class="pre">p</span></code>,
&#36820;&#22238; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#30340;&#32032;&#20998;&#35299;&#20013; <code class="docutils literal notranslate"><span class="pre">p</span></code> &#30340;&#37325;&#25968;&#12290;
&#25105;&#20204;&#23558;&#29992;&#21040;&#20197;&#19979;&#19977;&#20010;&#20107;&#23454;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">factorization_mul&#39;</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">mnez</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">nnez</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span>
    <span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">factorization</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">m.factorization</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">n.factorization</span> <span class="n">p</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.factorization_mul</span> <span class="n">mnez</span> <span class="n">nnez</span><span class="o">]</span>
  <span class="n">rfl</span>

<span class="kd">theorem</span> <span class="n">factorization_pow&#39;</span> <span class="o">(</span><span class="n">n</span> <span class="n">k</span> <span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span>
    <span class="o">(</span><span class="n">n</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">factorization</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">n.factorization</span> <span class="n">p</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.factorization_pow</span><span class="o">]</span>
  <span class="n">rfl</span>

<span class="kd">theorem</span> <span class="n">Nat.Prime.factorization&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">prime_p</span> <span class="o">:</span> <span class="n">p.Prime</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">p.factorization</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">prime_p.factorization</span><span class="o">]</span>
  <span class="n">simp</span>
</pre></div>
</div>
<p>&#20107;&#23454;&#19978;&#65292;<code class="docutils literal notranslate"><span class="pre">n.factorization</span></code> &#22312; Lean &#20013;&#34987;&#23450;&#20041;&#20026;&#26377;&#38480;&#25903;&#38598;&#30340;&#20989;&#25968;&#65292;
&#36825;&#35299;&#37322;&#20102;&#20320;&#22312;&#36880;&#27493;&#26597;&#30475;&#19978;&#36848;&#35777;&#26126;&#26102;&#20250;&#30475;&#21040;&#30340;&#22855;&#24618;&#31526;&#21495;&#12290;
&#29616;&#22312;&#19981;&#29992;&#25285;&#24515;&#36825;&#20010;&#12290;
&#20986;&#20110;&#25105;&#20204;&#36825;&#37324;&#30340;&#30446;&#30340;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#19978;&#38754;&#19977;&#20010;&#23450;&#29702;&#20316;&#20026;&#40657;&#30418;&#20351;&#29992;&#12290;</p>
<p>&#19979;&#19968;&#20010;&#31034;&#20363;&#34920;&#26126;&#21270;&#31616;&#22120;&#36275;&#22815;&#26234;&#33021;&#65292;
&#21487;&#20197;&#25226; <code class="docutils literal notranslate"><span class="pre">n^2</span> <span class="pre">&#8800;</span> <span class="pre">0</span></code> &#26367;&#25442;&#20026; <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&#8800;</span> <span class="pre">0</span></code>.
&#31574;&#30053; <code class="docutils literal notranslate"><span class="pre">simpa</span></code> &#19981;&#36807;&#26159;&#20808;&#35843;&#29992; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#25509;&#19979;&#26469;&#29992; <code class="docutils literal notranslate"><span class="pre">assumption</span></code>.</p>
<p>&#30475;&#30475;&#20320;&#26159;&#21542;&#21487;&#20197;&#29992;&#19978;&#38754;&#30340;&#31561;&#24335;&#26469;&#22635;&#34917;&#35777;&#26126;&#32570;&#22833;&#30340;&#37096;&#20998;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">nnz</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">prime_p</span> <span class="o">:</span> <span class="n">p.Prime</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">&#8800;</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">sqr_eq</span>
  <span class="k">have</span> <span class="n">nsqr_nez</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">&#8800;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simpa</span>
  <span class="k">have</span> <span class="n">eq1</span> <span class="o">:</span> <span class="n">Nat.factorization</span> <span class="o">(</span><span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">m.factorization</span> <span class="n">p</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span><span class="bp">.</span><span class="n">factorization</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">n.factorization</span> <span class="n">p</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">m.factorization</span> <span class="n">p</span> <span class="bp">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n.factorization</span> <span class="n">p</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">%</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">rw</span> <span class="o">[</span><span class="bp">&#8592;</span> <span class="n">eq1</span><span class="o">,</span> <span class="n">sqr_eq</span><span class="o">,</span> <span class="n">eq2</span><span class="o">]</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">add_comm</span><span class="o">,</span> <span class="n">Nat.add_mul_mod_self_left</span><span class="o">,</span> <span class="n">Nat.mul_mod_right</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span>
  <span class="n">norm_num</span> <span class="n">at</span> <span class="n">this</span>
</pre></div>
</div>
<p>&#36825;&#20010;&#35777;&#26126;&#30340;&#19968;&#20010;&#22909;&#22788;&#26159;&#23427;&#30340;&#21487;&#25512;&#24191;&#24615;&#12290;
<code class="docutils literal notranslate"><span class="pre">2</span></code> &#27809;&#20160;&#20040;&#29305;&#21035;&#30340;&#65307;&#36890;&#36807;&#23569;&#37327;&#20462;&#25913;&#65292;
&#35777;&#26126;&#25351;&#20986;&#21482;&#35201;&#25105;&#20204;&#26377; <code class="docutils literal notranslate"><span class="pre">m^k</span> <span class="pre">=</span> <span class="pre">r</span> <span class="pre">*</span> <span class="pre">n^k</span></code>,
<code class="docutils literal notranslate"><span class="pre">r</span></code> &#20013;&#32032;&#25968; <code class="docutils literal notranslate"><span class="pre">p</span></code> &#30340;&#37325;&#25968;&#23601;&#21482;&#33021;&#26159; <code class="docutils literal notranslate"><span class="pre">k</span></code> &#30340;&#20493;&#25968;&#12290;</p>
<p>&#20026;&#20102;&#23545; <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">*</span> <span class="pre">n^k</span></code> &#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Nat.count_factors_mul_of_pos</span></code>,
&#25105;&#20204;&#38656;&#35201;&#30693;&#36947; <code class="docutils literal notranslate"><span class="pre">r</span></code> &#26159;&#27491;&#30340;&#12290;
&#20294;&#24403; <code class="docutils literal notranslate"><span class="pre">r</span></code> &#26159;&#38646;&#26102;&#65292;&#19979;&#38754;&#30340;&#23450;&#29702;&#26159;&#24179;&#20961;&#30340;&#65292;
&#21487;&#20351;&#29992;&#21270;&#31616;&#22120;&#36731;&#26131;&#35777;&#26126;&#12290;
&#25152;&#20197;&#35777;&#26126;&#26159;&#20998;&#24773;&#20917;&#36827;&#34892;&#30340;&#12290;
<code class="docutils literal notranslate"><span class="pre">rcases</span> <span class="pre">r</span> <span class="pre">with</span> <span class="pre">_</span> <span class="pre">|</span> <span class="pre">r</span></code> &#36825;&#19968;&#34892;&#25226;&#30446;&#26631;&#26367;&#25442;&#20026;&#20004;&#20010;&#29256;&#26412;&#65306;
&#19968;&#20010;&#25226; <code class="docutils literal notranslate"><span class="pre">r</span></code> &#26367;&#25442;&#20026; <code class="docutils literal notranslate"><span class="pre">0</span></code>,
&#21478;&#19968;&#20010;&#25226; <code class="docutils literal notranslate"><span class="pre">r</span></code> &#26367;&#25442;&#20026; <code class="docutils literal notranslate"><span class="pre">r</span></code> &#30340;&#21518;&#32487; <code class="docutils literal notranslate"><span class="pre">r.succ</span></code>.
&#22312;&#31532;&#20108;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#21487;&#20197;&#24212;&#29992;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">r.succ_ne_zero</span></code>,
&#30001;&#23427;&#21487;&#24471; <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">+</span> <span class="pre">1</span> <span class="pre">&#8800;</span> <span class="pre">0</span></code> &#65288; <code class="docutils literal notranslate"><span class="pre">succ</span></code> &#34920;&#31034;&#21518;&#32487;&#65289;</p>
<p>&#21478;&#35831;&#27880;&#24847;&#65292;&#20197; <code class="docutils literal notranslate"><span class="pre">have</span> <span class="pre">:</span> <span class="pre">npow_nz</span></code> &#24320;&#22836;&#30340;&#34892;&#25552;&#20379;&#20102; <code class="docutils literal notranslate"><span class="pre">n^k</span> <span class="pre">&#8800;</span> <span class="pre">0</span></code> &#30340;&#31616;&#30701;&#35777;&#26126;&#39033;&#35777;&#26126;&#12290;
&#35201;&#29702;&#35299;&#23427;&#26159;&#22914;&#20309;&#24037;&#20316;&#30340;&#65292;&#35831;&#23581;&#35797;&#29992;&#31574;&#30053;&#35777;&#26126;&#26367;&#25442;&#23427;&#65292;
&#28982;&#21518;&#24605;&#32771;&#31574;&#30053;&#22914;&#20309;&#25551;&#36848;&#35777;&#26126;&#39033;&#12290;</p>
<p>&#30475;&#30475;&#20320;&#26159;&#21542;&#21487;&#20197;&#22635;&#34917;&#19979;&#21015;&#35777;&#26126;&#20013;&#32570;&#22833;&#30340;&#37096;&#20998;&#12290;
&#22312;&#26368;&#21518;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Nat.dvd_sub'</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Nat.dvd_mul_right</span></code> &#26469;&#25910;&#23614;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="n">k</span> <span class="n">r</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">nnz</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">pow_eq</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">:</span>
    <span class="n">k</span> <span class="bp">&#8739;</span> <span class="n">r.factorization</span> <span class="n">p</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">r</span> <span class="k">with</span> <span class="n">_</span> <span class="bp">|</span> <span class="n">r</span>
  <span class="bp">&#183;</span> <span class="n">simp</span>
  <span class="k">have</span> <span class="n">npow_nz</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">&#8800;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">npowz</span> <span class="bp">&#8614;</span> <span class="n">nnz</span> <span class="o">(</span><span class="n">pow_eq_zero</span> <span class="n">npowz</span><span class="o">)</span>
  <span class="k">have</span> <span class="n">eq1</span> <span class="o">:</span> <span class="o">(</span><span class="n">m</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">factorization</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">m.factorization</span> <span class="n">p</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="n">eq2</span> <span class="o">:</span> <span class="o">((</span><span class="n">r</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">factorization</span> <span class="n">p</span> <span class="bp">=</span>
      <span class="n">k</span> <span class="bp">*</span> <span class="n">n.factorization</span> <span class="n">p</span> <span class="bp">+</span> <span class="o">(</span><span class="n">r</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">factorization</span> <span class="n">p</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">r.succ.factorization</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">m.factorization</span> <span class="n">p</span> <span class="bp">-</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">n.factorization</span> <span class="n">p</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">rw</span> <span class="o">[</span><span class="bp">&#8592;</span> <span class="n">eq1</span><span class="o">,</span> <span class="n">pow_eq</span><span class="o">,</span> <span class="n">eq2</span><span class="o">,</span> <span class="n">add_comm</span><span class="o">,</span> <span class="n">Nat.add_sub_cancel</span><span class="o">]</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">]</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#21487;&#33021;&#24076;&#26395;&#36890;&#36807;&#22810;&#31181;&#26041;&#24335;&#26469;&#25913;&#36827;&#36825;&#20123;&#32467;&#26524;&#12290;
&#39318;&#20808;&#65292;&#26681;&#21495;&#20108;&#26159;&#26080;&#29702;&#25968;&#30340;&#35777;&#26126;&#24212;&#35813;&#28041;&#21450;&#19968;&#20123;&#21644;&#26681;&#21495;&#20108;&#30456;&#20851;&#30340;&#32467;&#35770;&#65292;
&#31216;&#23427;&#26159;&#26080;&#29702;&#25968;&#24212;&#35813;&#25552;&#21040;&#19968;&#20123;&#20851;&#20110;&#26377;&#29702;&#25968;&#30340;&#20107;&#24773;&#65292;&#21363;&#27809;&#26377;&#26377;&#29702;&#25968;&#31561;&#20110;&#23427;&#12290;
&#27492;&#22806;&#65292;&#25105;&#20204;&#24212;&#35813;&#23558;&#26412;&#33410;&#20013;&#30340;&#23450;&#29702;&#25193;&#23637;&#21040;&#25972;&#25968;&#12290;
&#34429;&#28982;&#25968;&#23398;&#19978;&#26174;&#32780;&#26131;&#35265;&#30340;&#26159;&#65292;&#22914;&#26524;&#25105;&#20204;&#21487;&#20197;&#23558;&#20108;&#30340;&#24179;&#26041;&#26681;&#20889;&#20026;&#20004;&#20010;&#25972;&#25968;&#30340;&#21830;&#65292;
&#37027;&#20040;&#25105;&#20204;&#23601;&#21487;&#20197;&#23558;&#20854;&#20889;&#20026;&#20004;&#20010;&#33258;&#28982;&#25968;&#30340;&#21830;&#65292;
&#20294;&#24418;&#24335;&#19978;&#35777;&#26126;&#36825;&#19968;&#28857;&#38656;&#35201;&#19968;&#20123;&#21162;&#21147;&#12290;</p>
<p>&#22312; Mathlib &#20013;&#65292;&#33258;&#28982;&#25968;&#12289;&#25972;&#25968;&#12289;&#26377;&#29702;&#25968;&#12289;&#23454;&#25968;&#21644;&#22797;&#25968;&#29992;&#19981;&#21516;&#30340;&#25968;&#25454;&#31867;&#22411;&#34920;&#31034;&#12290;
&#25226;&#27880;&#24847;&#21147;&#38480;&#21046;&#22312;&#21333;&#29420;&#30340;&#39046;&#22495;&#20013;&#24120;&#24120;&#26159;&#26377;&#24110;&#21161;&#30340;&#65306;
&#25105;&#20204;&#23558;&#30475;&#21040;&#22312;&#33258;&#28982;&#25968;&#19978;&#20570;&#24402;&#32435;&#27861;&#23481;&#26131;&#65292;
&#28041;&#21450;&#25972;&#25968;&#30340;&#25972;&#38500;&#24615;&#30340;&#25512;&#29702;&#20063;&#24456;&#23481;&#26131;&#65292;
&#20294;&#23454;&#25968;&#23601;&#19981;&#22312;&#36825;&#20123;&#22270;&#26223;&#20013;&#12290;
&#20294;&#24517;&#39035;&#22312;&#19981;&#21516;&#39046;&#22495;&#20013;&#36827;&#34892;&#21327;&#35843;&#26159;&#25105;&#20204;&#23558;&#19981;&#24471;&#19981;&#38754;&#23545;&#30340;&#19968;&#20010;&#20196;&#20154;&#22836;&#30140;&#30340;&#38382;&#39064;&#12290;
&#25105;&#20204;&#23558;&#22312;&#26412;&#31456;&#21518;&#38754;&#22238;&#21040;&#36825;&#20010;&#38382;&#39064;&#12290;</p>
<p>&#25105;&#20204;&#36824;&#24212;&#35813;&#26399;&#26395;&#33021;&#25226;&#19978;&#19968;&#20010;&#23450;&#29702;&#30340;&#32467;&#35770;&#21152;&#24378;&#20026;&#25968; <code class="docutils literal notranslate"><span class="pre">r</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">k</span></code> &#27425;&#24130;&#65292;
&#22240;&#20026;&#23427;&#30340; <code class="docutils literal notranslate"><span class="pre">k</span></code> &#27425;&#26681;&#24688;&#22909;&#26159;&#27599;&#20010;&#25972;&#38500; <code class="docutils literal notranslate"><span class="pre">r</span></code> &#30340;&#32032;&#25968;&#20197;
<code class="docutils literal notranslate"><span class="pre">r</span></code> &#38500;&#20197; <code class="docutils literal notranslate"><span class="pre">k</span></code> &#30340;&#37325;&#25968;&#20026;&#24130;&#27425;&#30340;&#24130;&#30340;&#20056;&#31215;&#12290;
&#20026;&#20102;&#33021;&#22815;&#20570;&#21040;&#36825;&#19968;&#28857;&#65292;
&#25105;&#20204;&#38656;&#35201;&#26356;&#22909;&#30340;&#26041;&#27861;&#26469;&#20570;&#20851;&#20110;&#26377;&#38480;&#38598;&#21512;&#19978;&#30340;&#20056;&#31215;&#19982;&#21644;&#30340;&#25512;&#29702;&#65292;
&#36825;&#20063;&#26159;&#25105;&#20204;&#23558;&#35201;&#22238;&#21040;&#30340;&#35805;&#39064;&#12290;</p>
<p>&#20107;&#23454;&#19978;&#65292;&#26412;&#33410;&#20013;&#30340;&#32467;&#26524;&#37117;&#24050;&#32463;&#22312; Mathlib &#30340;
<code class="docutils literal notranslate"><span class="pre">Data.Real.Irrational</span></code> &#20013;&#20197;&#36828;&#20026;&#24191;&#20041;&#30340;&#26041;&#24335;&#24314;&#31435;&#12290;
<code class="docutils literal notranslate"><span class="pre">multiplicity</span></code> &#30340;&#27010;&#24565;&#22312;&#20219;&#24847;&#30340;&#20132;&#25442;&#24186;&#21322;&#29615;&#19978;&#23450;&#20041;&#65292;
&#23427;&#30340;&#21462;&#20540;&#22312;&#25193;&#23637;&#33258;&#28982;&#25968; <code class="docutils literal notranslate"><span class="pre">enat</span></code> &#20013;&#65292;
&#21363;&#22312;&#33258;&#28982;&#25968;&#20013;&#28155;&#21152;&#26080;&#31351;&#20540;&#12290;
&#22312;&#19979;&#19968;&#31456;&#20013;&#65292;
&#25105;&#20204;&#23558;&#24320;&#22987;&#21457;&#23637;&#19968;&#20123;&#26041;&#27861;&#20174;&#32780;&#29702;&#35299; Lean &#25903;&#25345;&#36825;&#31867;&#19968;&#33324;&#24615;&#30340;&#36884;&#24452;&#12290;</p>
</section>
<section id="section-induction-and-recursion">
<span id="id3"></span><h2><span class="section-number">5.2. </span>&#24402;&#32435;&#21644;&#36882;&#24402;<a class="headerlink" href="#section-induction-and-recursion" title="Link to this heading">&#61633;</a></h2>
<p>&#33258;&#28982;&#25968;&#38598; <span class="math notranslate nohighlight">\(\mathbb{N} = \{ 0, 1, 2, \ldots \}\)</span>
&#19981;&#20165;&#20165;&#22312;&#33258;&#36523;&#24847;&#20041;&#19979;&#20855;&#26377;&#22522;&#26412;&#30340;&#37325;&#35201;&#24615;&#65292;
&#20063;&#22312;&#26500;&#36896;&#26032;&#25968;&#23398;&#23545;&#35937;&#20013;&#25198;&#28436;&#30528;&#20013;&#24515;&#35282;&#33394;&#12290;
Lean &#24213;&#23618;&#20801;&#35768;&#25105;&#20204;&#22768;&#26126; <em>&#24402;&#32435;&#31867;&#22411;</em>&#65292;
&#23427;&#26159;&#30001;&#19968;&#20010;&#32473;&#23450;&#30340; <em>&#26500;&#36896;&#22120;</em> &#21015;&#34920;&#24402;&#32435;&#22320;&#29983;&#25104;&#30340;&#31867;&#22411;&#12290;
&#22312; Lean &#20013;&#65292;&#33258;&#28982;&#25968;&#22768;&#26126;&#22914;&#19979;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">inductive</span> <span class="n">Nat</span> <span class="n">where</span>
  <span class="bp">|</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">Nat</span>
  <span class="bp">|</span> <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">Nat</span>
</pre></div>
</div>
<p>&#20320;&#21487;&#20197;&#36890;&#36807;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">#check</span> <span class="pre">Nat</span></code> &#28982;&#21518;&#22312;&#26631;&#35782;&#31526; <code class="docutils literal notranslate"><span class="pre">Nat</span></code> &#19978;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">ctrl-click</span></code>
&#22312;&#24211;&#20013;&#25214;&#21040;&#36825;&#20010;&#22768;&#26126;&#12290;
&#36825;&#20010;&#21629;&#20196;&#25351;&#20986; <code class="docutils literal notranslate"><span class="pre">Nat</span></code> &#26159;&#30001;&#20004;&#20010;&#26500;&#36896;&#22120; <code class="docutils literal notranslate"><span class="pre">zero</span> <span class="pre">:</span> <span class="pre">Nat</span></code>
&#21644; <code class="docutils literal notranslate"><span class="pre">succ</span> <span class="pre">:</span> <span class="pre">Nat</span> <span class="pre">&#8594;</span> <span class="pre">Nat</span></code> &#33258;&#30001;&#32780;&#24402;&#32435;&#22320;&#29983;&#25104;&#30340;&#25968;&#25454;&#31867;&#22411;&#12290;
&#24403;&#28982;&#65292;&#24211;&#20013;&#24341;&#20837;&#20102;&#35760;&#21495; <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">0</span></code> &#20197;&#20998;&#21035;&#34920;&#31034; <code class="docutils literal notranslate"><span class="pre">nat</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">zero</span></code>.
&#65288;&#25968;&#23383;&#34987;&#36716;&#21270;&#20026;&#20108;&#36827;&#21046;&#34920;&#31034;&#65292;&#20294;&#25105;&#20204;&#29616;&#22312;&#19981;&#24517;&#25285;&#24515;&#36825;&#20123;&#32454;&#33410;&#12290;&#65289;</p>
<p>&#23545;&#20110;&#24403;&#20195;&#25968;&#23398;&#23478;&#26469;&#35828;&#65292;&#8220;&#33258;&#30001;&#8221;&#24847;&#21619;&#30528;&#31867;&#22411;
<code class="docutils literal notranslate"><span class="pre">Nat</span></code> &#26377;&#19968;&#20010;&#20803;&#32032; <code class="docutils literal notranslate"><span class="pre">zero</span></code> &#21644;&#19968;&#20010;&#21333;&#23556;&#21518;&#32487;&#20989;&#25968;
<code class="docutils literal notranslate"><span class="pre">succ</span></code>, &#20854;&#20687;&#19981;&#21253;&#21547; <code class="docutils literal notranslate"><span class="pre">zero</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">n.succ</span> <span class="bp">&#8800;</span> <span class="n">Nat.zero</span> <span class="o">:=</span>
  <span class="n">Nat.succ_ne_zero</span> <span class="n">n</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">m.succ</span> <span class="bp">=</span> <span class="n">n.succ</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span>
  <span class="n">Nat.succ.inj</span> <span class="n">h</span>
</pre></div>
</div>
<p>&#23545;&#20110;&#24403;&#20195;&#25968;&#23398;&#23478;&#26469;&#35828;&#65292;
&#8220;&#24402;&#32435;&#22320;&#8221;&#19968;&#35789;&#24847;&#21619;&#30528;&#33258;&#28982;&#25968;&#20855;&#26377;&#24402;&#32435;&#35777;&#26126;&#27861;&#21017;&#21644;&#36882;&#24402;&#23450;&#20041;&#27861;&#21017;&#12290;
&#26412;&#33410;&#23558;&#23637;&#31034;&#22914;&#20309;&#36816;&#29992;&#36825;&#20123;&#27861;&#21017;&#12290;</p>
<p>&#36825;&#26159;&#19968;&#20010;&#38454;&#20056;&#20989;&#25968;&#30340;&#36882;&#24402;&#23450;&#20041;&#30340;&#31034;&#20363;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">fac</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">1</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">fac</span> <span class="n">n</span>
</pre></div>
</div>
<p>&#35813;&#35821;&#27861;&#38656;&#35201;&#19968;&#20123;&#26102;&#38388;&#26469;&#36866;&#24212;&#12290;
&#35831;&#27880;&#24847;&#65292;&#31532;&#19968;&#34892;&#27809;&#26377; <code class="docutils literal notranslate"><span class="pre">:=</span></code>.
&#25509;&#19979;&#26469;&#30340;&#20004;&#34892;&#25552;&#20379;&#20102;&#22522;&#26412;&#24773;&#24418;&#21644;&#24402;&#32435;&#27493;&#39588;&#29992;&#20110;&#36882;&#24402;&#23450;&#20041;&#12290;
&#36825;&#20123;&#31561;&#24335;&#22312;&#23450;&#20041;&#19978;&#25104;&#31435;&#65292;
&#20294;&#23427;&#20204;&#20063;&#21487;&#20197;&#36890;&#36807;&#23558;&#21517;&#23383; <code class="docutils literal notranslate"><span class="pre">fac</span></code> &#36865;&#20837; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">rw</span></code> &#26469;&#25163;&#21160;&#20351;&#29992;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">fac</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
  <span class="n">rfl</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">fac</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">fac</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">fac</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">fac</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">fac</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">fac</span> <span class="n">n</span> <span class="o">:=</span>
  <span class="n">rfl</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">fac</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">fac</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">fac</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">fac</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">fac</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">fac</span><span class="o">]</span>
</pre></div>
</div>
<p>&#38454;&#20056;&#20989;&#25968;&#23454;&#38469;&#19978;&#24050;&#32463;&#22312; Mathlib &#20013;&#34987;&#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">Nat.factorial</span></code>.
&#20877;&#27425;&#25552;&#37266;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">#check</span> <span class="pre">Nat.factorial</span></code> &#24182;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">ctrl-click</span></code> &#36339;&#36716;&#21040;&#23427;&#12290;
&#20986;&#20110;&#35828;&#26126;&#30446;&#30340;&#65292;&#25105;&#20204;&#20250;&#22312;&#31034;&#20363;&#20013;&#32487;&#32493;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">fac</span></code>.
<code class="docutils literal notranslate"><span class="pre">Nat.factorial</span></code> &#30340;&#23450;&#20041;&#21069;&#38754;&#30340;&#26631;&#27880; <code class="docutils literal notranslate"><span class="pre">&#64;[simp]</span></code>
&#35201;&#27714;&#23450;&#20041;&#31561;&#24335;&#24212;&#34987;&#28155;&#21152;&#21040;&#21270;&#31616;&#22120;&#40664;&#35748;&#20351;&#29992;&#30340;&#24658;&#31561;&#24335;&#25968;&#25454;&#24211;&#20013;&#12290;</p>
<p>&#24402;&#32435;&#21407;&#29702;&#26159;&#35828;&#65292;&#25105;&#20204;&#35201;&#35777;&#26126;&#19968;&#20010;&#20851;&#20110;&#33258;&#28982;&#25968;&#30340;&#19968;&#33324;&#26029;&#35328;&#65292;
&#21487;&#20197;&#20808;&#35777;&#26126;&#35813;&#26029;&#35328;&#23545; 0 &#25104;&#31435;&#65292;
&#20877;&#35777;&#26126;&#21482;&#35201;&#23427;&#23545;&#33258;&#28982;&#25968; <span class="math notranslate nohighlight">\(n\)</span> &#25104;&#31435;&#65292;
&#23427;&#23601;&#23545; <span class="math notranslate nohighlight">\(n + 1\)</span> &#20063;&#25104;&#31435;&#12290;
&#22240;&#27492;&#19979;&#21015;&#35777;&#26126;&#20013; <code class="docutils literal notranslate"><span class="pre">induction'</span> <span class="pre">n</span> <span class="pre">with</span> <span class="pre">n</span> <span class="pre">ih</span></code>
&#36825;&#19968;&#34892;&#23558;&#20135;&#29983;&#20004;&#20010;&#30446;&#26631;&#65306;
&#31532;&#19968;&#20010;&#26159;&#35777;&#26126; <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">fac</span> <span class="pre">0</span></code>,
&#31532;&#20108;&#20010;&#26159;&#22312;&#38468;&#21152;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">ih</span> <span class="pre">:</span> <span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">fac</span> <span class="pre">n</span></code> &#30340;&#26465;&#20214;&#19979;&#35777;&#26126;
<code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">fac</span> <span class="pre">(n</span> <span class="pre">+</span> <span class="pre">1)</span></code>.
&#30701;&#35821; <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">n</span> <span class="pre">ih</span></code> &#29992;&#20110;&#20026;&#21464;&#37327;&#21644;&#24402;&#32435;&#20551;&#35774;&#21629;&#21517;&#65292;
&#20320;&#21487;&#20197;&#20026;&#23427;&#20204;&#36873;&#25321;&#20320;&#24819;&#35201;&#30340;&#20219;&#20309;&#21517;&#23383;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">fac_pos</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">fac</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">induction&#39;</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span>
  <span class="bp">&#183;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">fac</span><span class="o">]</span>
    <span class="n">exact</span> <span class="n">zero_lt_one</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">fac</span><span class="o">]</span>
  <span class="n">exact</span> <span class="n">mul_pos</span> <span class="n">n.succ_pos</span> <span class="n">ih</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">induction</span></code> &#31574;&#30053;&#36275;&#22815;&#26234;&#33021;&#65292;
&#36275;&#20197;&#21253;&#21547;&#37027;&#20123;&#20381;&#36182;&#20110;&#24402;&#32435;&#21464;&#37327;&#65292;&#20316;&#20026;&#24402;&#32435;&#20551;&#35774;&#30340;&#19968;&#37096;&#20998;&#30340;&#20551;&#35774;&#12290;
&#36880;&#27493;&#32771;&#23519;&#19979;&#19968;&#20010;&#31034;&#20363;&#65292;&#30475;&#30475;&#21457;&#29983;&#20102;&#20160;&#20040;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">dvd_fac</span> <span class="o">{</span><span class="n">i</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">ipos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">ile</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&#8804;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&#8739;</span> <span class="n">fac</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">induction&#39;</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span>
  <span class="bp">&#183;</span> <span class="n">exact</span> <span class="n">absurd</span> <span class="n">ipos</span> <span class="o">(</span><span class="n">not_lt_of_ge</span> <span class="n">ile</span><span class="o">)</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">fac</span><span class="o">]</span>
  <span class="n">rcases</span> <span class="n">Nat.of_le_succ</span> <span class="n">ile</span> <span class="k">with</span> <span class="n">h</span> <span class="bp">|</span> <span class="n">h</span>
  <span class="bp">&#183;</span> <span class="n">apply</span> <span class="n">dvd_mul_of_dvd_right</span> <span class="o">(</span><span class="n">ih</span> <span class="n">h</span><span class="o">)</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
  <span class="n">apply</span> <span class="n">dvd_mul_right</span>
</pre></div>
</div>
<p>&#19979;&#38754;&#30340;&#20363;&#23376;&#25552;&#20379;&#20102;&#38454;&#20056;&#20989;&#25968;&#30340;&#19968;&#20010;&#31895;&#30053;&#19979;&#30028;&#12290;
&#20107;&#23454;&#35777;&#26126;&#65292;&#20174;&#20998;&#24773;&#20917;&#35777;&#26126;&#24320;&#22987;&#26356;&#23481;&#26131;&#65292;
&#22240;&#27492;&#35777;&#26126;&#30340;&#21097;&#20313;&#37096;&#20998;&#20197; <span class="math notranslate nohighlight">\(n = 1\)</span> &#36825;&#19968;&#24773;&#20917;&#24320;&#22987;&#12290;
&#30475;&#30475;&#20320;&#26159;&#21542;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">pow_succ</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">pow_succ'</span></code> &#36890;&#36807;&#24402;&#32435;&#35777;&#26126;&#26469;&#23436;&#25104;&#35770;&#35777;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">pow_two_le_fac</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">&#8804;</span> <span class="n">fac</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">n</span> <span class="k">with</span> <span class="n">_</span> <span class="bp">|</span> <span class="n">n</span>
  <span class="bp">&#183;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">fac</span><span class="o">]</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#24402;&#32435;&#27861;&#36890;&#24120;&#29992;&#20110;&#35777;&#26126;&#28041;&#21450;&#26377;&#38480;&#30340;&#21644;&#19982;&#20056;&#31215;&#30340;&#24658;&#31561;&#24335;&#12290;
Mathlib &#23450;&#20041;&#20102;&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">Finset.sum</span> <span class="pre">s</span> <span class="pre">f</span></code>,
&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">Finset</span> <span class="pre">&#945;</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#31867;&#22411;&#20803;&#32032;&#30340;&#26377;&#38480;&#38598;&#65292;
&#32780; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#19978;&#23450;&#20041;&#30340;&#20989;&#25968;&#12290;
<code class="docutils literal notranslate"><span class="pre">f</span></code> &#30340;&#21040;&#36798;&#22495;&#21487;&#20197;&#26159;&#20219;&#20309;&#25903;&#25345;&#20132;&#25442;&#12289;&#32467;&#21512;&#30340;&#21152;&#27861;&#36816;&#31639;&#19988;&#21547;&#26377;&#38646;&#30340;&#31867;&#22411;&#12290;
&#22914;&#26524;&#20320;&#23548;&#20837; <code class="docutils literal notranslate"><span class="pre">Algebra.BigOperators.Basic</span></code>
&#24182;&#21457;&#20986;&#21629;&#20196; <code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">BigOperators</span></code>,
&#20320;&#21487;&#20197;&#20351;&#29992;&#26356;&#20855;&#26263;&#31034;&#24615;&#30340;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">&#931;</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">s,</span> <span class="pre">f</span> <span class="pre">x</span></code>.
&#24403;&#28982;&#65292;&#36824;&#26377;&#31867;&#20284;&#30340;&#26377;&#38480;&#20056;&#31215;&#36816;&#31639;&#21644;&#31526;&#21495;&#12290;</p>
<p>&#25105;&#20204;&#23558;&#22312;&#19979;&#19968;&#33410;&#20013;&#35752;&#35770; <code class="docutils literal notranslate"><span class="pre">Finset</span></code> &#31867;&#22411;&#21644;&#23427;&#25903;&#25345;&#30340;&#36816;&#31639;&#65292;
&#28982;&#21518;&#22312;&#19968;&#20010;&#21518;&#32493;&#31456;&#33410;&#20013;&#20877;&#27425;&#35752;&#35770;&#12290;
&#29616;&#22312;&#65292;&#25105;&#20204;&#21482;&#20250;&#29992;&#21040; <code class="docutils literal notranslate"><span class="pre">Finset.range</span> <span class="pre">n</span></code>,
&#23427;&#26159;&#23567;&#20110; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#30340;&#33258;&#28982;&#25968;&#30340;&#26377;&#38480;&#38598;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span>

<span class="k">#check</span> <span class="n">Finset.sum</span> <span class="n">s</span> <span class="n">f</span>
<span class="k">#check</span> <span class="n">Finset.prod</span> <span class="n">s</span> <span class="n">f</span>

<span class="kn">open</span> <span class="n">BigOperators</span>
<span class="kn">open</span> <span class="n">Finset</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">s.sum</span> <span class="n">f</span> <span class="bp">=</span> <span class="bp">&#8721;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="n">rfl</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">s.prod</span> <span class="n">f</span> <span class="bp">=</span> <span class="bp">&#8719;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="n">rfl</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">range</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">sum</span> <span class="n">f</span> <span class="bp">=</span> <span class="bp">&#8721;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="n">rfl</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">range</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">prod</span> <span class="n">f</span> <span class="bp">=</span> <span class="bp">&#8719;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="n">rfl</span>
</pre></div>
</div>
<p>&#20107;&#23454; <code class="docutils literal notranslate"><span class="pre">Finset.sum_range_zero</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Finset.sum_range_succ</span></code>
&#25552;&#20379;&#20102;&#19968;&#30452;&#21152;&#21040; <span class="math notranslate nohighlight">\(n\)</span> &#30340;&#27714;&#21644;&#30340;&#36882;&#24402;&#25551;&#36848;&#65292;
&#20056;&#31215;&#20063;&#31867;&#20284;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8721;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="mi">0</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
  <span class="n">Finset.sum_range_zero</span> <span class="n">f</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8721;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="n">n.succ</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">&#8721;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">f</span> <span class="n">n</span> <span class="o">:=</span>
  <span class="n">Finset.sum_range_succ</span> <span class="n">f</span> <span class="n">n</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8719;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="mi">0</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
  <span class="n">Finset.prod_range_zero</span> <span class="n">f</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8719;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="n">n.succ</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">&#8719;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f</span> <span class="n">n</span> <span class="o">:=</span>
  <span class="n">Finset.prod_range_succ</span> <span class="n">f</span> <span class="n">n</span>
</pre></div>
</div>
<p>&#27599;&#23545;&#20013;&#30340;&#31532;&#19968;&#20010;&#24658;&#31561;&#24335;&#26159;&#23450;&#20041;&#24615;&#25104;&#31435;&#30340;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;
&#20320;&#21487;&#20197;&#25226;&#35777;&#26126;&#26367;&#25442;&#20026; <code class="docutils literal notranslate"><span class="pre">rfl</span></code>.</p>
<p>&#19979;&#38754;&#25226;&#25105;&#20204;&#23450;&#20041;&#30340;&#38454;&#20056;&#20989;&#25968;&#34920;&#31034;&#20026;&#20056;&#31215;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">fac</span> <span class="n">n</span> <span class="bp">=</span> <span class="bp">&#8719;</span> <span class="n">i</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">induction&#39;</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span>
  <span class="bp">&#183;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">fac</span><span class="o">,</span> <span class="n">prod_range_zero</span><span class="o">]</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">fac</span><span class="o">,</span> <span class="n">ih</span><span class="o">,</span> <span class="n">prod_range_succ</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#22312;&#31616;&#21270;&#35268;&#21017;&#20013;&#21253;&#21547; <code class="docutils literal notranslate"><span class="pre">mul_comm</span></code> &#36825;&#19968;&#20107;&#23454;&#20540;&#24471;&#35752;&#35770;&#12290;
&#20351;&#29992;&#24658;&#31561;&#24335; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">x</span></code> &#36827;&#34892;&#31616;&#21270;&#20284;&#20046;&#24456;&#21361;&#38505;&#65292;
&#36825;&#36890;&#24120;&#20250;&#26080;&#38480;&#24490;&#29615;&#12290;
Lean &#30340;&#21270;&#31616;&#22120;&#36275;&#22815;&#26234;&#33021;&#65292;
&#21482;&#20250;&#22312;&#23545;&#20110;&#20219;&#24847;&#39033;&#30340;&#26576;&#20010;&#22266;&#23450;&#30340;&#24207;&#65292;
&#32467;&#26524;&#39033;&#20855;&#26377;&#36739;&#23567;&#30340;&#20540;&#26102;&#25165;&#20250;&#24212;&#29992;&#36825;&#19968;&#35268;&#21017;&#12290;
&#19979;&#38754;&#30340;&#31034;&#20363;&#28436;&#31034;&#20351;&#29992;&#19977;&#20010;&#35268;&#21017;
<code class="docutils literal notranslate"><span class="pre">mul_assoc</span></code>, <code class="docutils literal notranslate"><span class="pre">mul_comm</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">mul_left_comm</span></code> &#36827;&#34892;&#21270;&#31616;&#65292;
&#20174;&#32780;&#35782;&#21035;&#38500;&#20102;&#25324;&#21495;&#30340;&#20301;&#32622;&#21644;&#21464;&#37327;&#30340;&#39034;&#24207;&#20197;&#22806;&#30456;&#21516;&#30340;&#20056;&#31215;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">f</span> <span class="bp">*</span> <span class="o">(</span><span class="n">d</span> <span class="bp">*</span> <span class="n">e</span><span class="o">))</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">f</span> <span class="bp">*</span> <span class="n">e</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">,</span> <span class="n">mul_left_comm</span><span class="o">]</span>
</pre></div>
</div>
<p>&#31895;&#30053;&#22320;&#35828;&#65292;&#35268;&#21017;&#30340;&#24037;&#20316;&#21407;&#29702;&#26159;&#23558;&#25324;&#21495;&#21521;&#21491;&#25512;&#65292;
&#28982;&#21518;&#23545;&#20004;&#36793;&#30340;&#34920;&#36798;&#24335;&#37325;&#26032;&#25490;&#24207;&#65292;
&#30452;&#21040;&#20004;&#32773;&#37117;&#36981;&#24490;&#30456;&#21516;&#30340;&#35268;&#33539;&#39034;&#24207;&#12290;
&#29992;&#36825;&#20123;&#35268;&#21017;&#65292;&#20197;&#21450;&#30456;&#24212;&#30340;&#21152;&#27861;&#35268;&#21017;&#26469;&#21270;&#31616;&#65292;&#26159;&#19968;&#20010;&#26041;&#20415;&#30340;&#25216;&#24039;&#12290;</p>
<p>&#22238;&#21040;&#27714;&#21644;&#31561;&#24335;&#65292;&#25105;&#20204;&#24314;&#35758;&#19968;&#27493;&#27493;&#23436;&#25104;&#19979;&#38754;&#30340;&#35777;&#26126;&#65292;
&#21363;&#19968;&#30452;&#21152;&#21040; <span class="math notranslate nohighlight">\(n\)</span> &#65288;&#21253;&#25324; <span class="math notranslate nohighlight">\(n\)</span> &#22312;&#20869;&#65289;&#30340;&#33258;&#28982;&#25968;&#20043;&#21644;&#20026; <span class="math notranslate nohighlight">\(n (n + 1) / 2\)</span>.
&#35777;&#26126;&#30340;&#31532;&#19968;&#27493;&#26159;&#21435;&#20998;&#27597;&#12290;
&#36825;&#22312;&#24418;&#24335;&#21270;&#31561;&#24335;&#26102;&#36890;&#24120;&#24456;&#26377;&#29992;&#65292;
&#22240;&#20026;&#38500;&#27861;&#35745;&#31639;&#19968;&#33324;&#37117;&#26377;&#38468;&#24102;&#26465;&#20214;&#12290;
(&#23613;&#21487;&#33021;&#36991;&#20813;&#22312;&#33258;&#28982;&#25968;&#19978;&#20351;&#29992;&#20943;&#27861;&#20063;&#21516;&#26679;&#26377;&#29992;&#65289;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">sum_id</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8721;</span> <span class="n">i</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">symm</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">Nat.div_eq_of_eq_mul_right</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">2</span><span class="o">)</span>
  <span class="n">induction&#39;</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span>
  <span class="bp">&#183;</span> <span class="n">simp</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Finset.sum_range_succ</span><span class="o">,</span> <span class="n">mul_add</span> <span class="mi">2</span><span class="o">,</span> <span class="bp">&#8592;</span> <span class="n">ih</span><span class="o">]</span>
  <span class="n">ring</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#40723;&#21169;&#20320;&#35777;&#26126;&#24179;&#26041;&#21644;&#30340;&#31867;&#20284;&#31561;&#24335;&#65292;
&#20197;&#21450;&#20320;&#21487;&#20197;&#22312;&#32593;&#19978;&#25214;&#21040;&#30340;&#20854;&#20182;&#31561;&#24335;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">sum_sqr</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8721;</span> <span class="n">i</span> <span class="bp">&#8712;</span> <span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="n">i</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">6</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#22312; Lean &#30340;&#26680;&#24515;&#24211;&#20013;&#65292;
&#21152;&#27861;&#21644;&#20056;&#27861;&#26412;&#36523;&#23601;&#26159;&#36890;&#36807;&#36882;&#24402;&#23450;&#20041;&#30340;&#65292;
&#20854;&#22522;&#26412;&#24615;&#36136;&#26159;&#36890;&#36807;&#24402;&#32435;&#27861;&#24314;&#31435;&#30340;&#12290;
&#22914;&#26524;&#20320;&#21916;&#27426;&#24605;&#32771;&#36825;&#26679;&#30340;&#22522;&#30784;&#35805;&#39064;&#65292;
&#37027;&#20040;&#20320;&#21487;&#33021;&#20250;&#21916;&#27426;&#30740;&#31350;&#20056;&#27861;&#21644;&#21152;&#27861;&#30340;&#20132;&#25442;&#24615;&#21644;&#32467;&#21512;&#24615;&#65292;
&#20197;&#21450;&#20056;&#27861;&#23545;&#21152;&#27861;&#30340;&#20998;&#37197;&#24615;&#30340;&#35777;&#26126;&#12290;
&#20320;&#21487;&#20197;&#25353;&#29031;&#19979;&#38754;&#30340;&#25552;&#32434;&#65292;
&#22312;&#33258;&#28982;&#25968;&#30340;&#21103;&#26412;&#19978;&#36827;&#34892;&#35777;&#26126;&#12290;
&#35831;&#27880;&#24847;&#65292;&#25105;&#20204;&#21487;&#20197;&#23545; <code class="docutils literal notranslate"><span class="pre">MyNat</span></code> &#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">induction</span></code> &#31574;&#30053;&#65307;
Lean &#24456;&#32874;&#26126;&#65292;&#30693;&#36947;&#20351;&#29992;&#30456;&#20851;&#30340;&#24402;&#32435;&#27861;&#21017;
&#65288;&#24403;&#28982;&#65292;&#23427;&#19982; <code class="docutils literal notranslate"><span class="pre">Nat</span></code> &#30340;&#24402;&#32435;&#27861;&#21017;&#30456;&#21516;&#65289;&#12290;</p>
<p>&#25105;&#20204;&#20174;&#21152;&#27861;&#30340;&#20132;&#25442;&#24615;&#24320;&#22987;&#12290;
&#19968;&#20010;&#24456;&#22909;&#30340;&#32463;&#39564;&#27861;&#21017;&#26159;&#65292;
&#30001;&#20110;&#21152;&#27861;&#21644;&#20056;&#27861;&#26159;&#36890;&#36807;&#31532;&#20108;&#20010;&#21442;&#25968;&#19978;&#30340;&#36882;&#24402;&#26469;&#23450;&#20041;&#30340;&#65292;
&#25152;&#20197;&#19968;&#33324;&#26469;&#35828;&#65292;
&#36890;&#36807;&#23545;&#20986;&#29616;&#22312;&#35813;&#20301;&#32622;&#19978;&#30340;&#21464;&#37327;&#20570;&#24402;&#32435;&#26469;&#36827;&#34892;&#35777;&#26126;&#26159;&#26377;&#21033;&#30340;&#12290;
&#22312;&#32467;&#21512;&#24615;&#35777;&#26126;&#20013;&#20915;&#23450;&#20351;&#29992;&#21738;&#20010;&#21464;&#37327;&#26377;&#28857;&#25216;&#24039;&#24615;&#12290;</p>
<p>&#22914;&#26524;&#19981;&#20351;&#29992;&#36890;&#24120;&#30340;&#31526;&#21495;&#26469;&#34920;&#31034;&#38646;&#12289;&#19968;&#12289;&#21152;&#27861;&#21644;&#20056;&#27861;&#65292;
&#20070;&#20889;&#36215;&#26469;&#20250;&#24456;&#28151;&#20081;&#12290;
&#25105;&#20204;&#31245;&#21518;&#23558;&#23398;&#20064;&#22914;&#20309;&#23450;&#20041;&#36825;&#31181;&#31526;&#21495;&#12290;
&#22312;&#21629;&#21517;&#31354;&#38388; <code class="docutils literal notranslate"><span class="pre">MyNat</span></code> &#20013;&#24037;&#20316;&#24847;&#21619;&#30528;&#25105;&#20204;&#21487;&#20197;&#32534;&#20889;
<code class="docutils literal notranslate"><span class="pre">zero</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">succ</span></code> &#32780;&#19981;&#26159; <code class="docutils literal notranslate"><span class="pre">MyNat.zero</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">MyNat.succ</span></code>,
&#32780;&#19988;&#36825;&#20123;&#21517;&#23383;&#35299;&#37322;&#20248;&#20808;&#20110;&#20854;&#20182;&#35299;&#37322;&#12290;
&#22312;&#21629;&#21517;&#31354;&#38388;&#20043;&#22806;&#65292;&#20363;&#22914;&#65292;&#19979;&#38754;&#23450;&#20041;&#30340; <code class="docutils literal notranslate"><span class="pre">add</span></code> &#30340;&#20840;&#21517;&#26159; <code class="docutils literal notranslate"><span class="pre">MyNat.add</span></code>.</p>
<p>&#22914;&#26524;&#20320;&#21457;&#29616;&#33258;&#24049; <em>&#30495;&#30340;</em> &#21916;&#27426;&#36825;&#31867;&#38382;&#39064;&#65292;
&#21487;&#20197;&#23581;&#35797;&#23450;&#20041;&#25130;&#26029;&#20943;&#27861;&#21644;&#25351;&#25968;&#36816;&#31639;&#65292;&#24182;&#35777;&#26126;&#23427;&#20204;&#30340;&#19968;&#20123;&#24615;&#36136;&#12290;
&#35831;&#35760;&#20303;&#65292;&#25130;&#26029;&#20943;&#27861;&#30340;&#32456;&#28857;&#26159;&#38646;&#12290;
&#35201;&#23450;&#20041;&#25130;&#26029;&#20943;&#27861;&#65292;&#38656;&#35201;&#23450;&#20041;&#19968;&#20010;&#21069;&#32487;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">pred</span></code>,
&#20174;&#20219;&#20309;&#38750;&#38646;&#25968;&#20013;&#20943;&#21435;&#19968;&#24182;&#20445;&#25345;&#38646;&#19981;&#21464;&#12290;
&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">pred</span></code> &#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#31616;&#21333;&#30340;&#36882;&#24402;&#23454;&#20363;&#26469;&#23450;&#20041;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">inductive</span> <span class="n">MyNat</span> <span class="n">where</span>
  <span class="bp">|</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">MyNat</span>
  <span class="bp">|</span> <span class="n">succ</span> <span class="o">:</span> <span class="n">MyNat</span> <span class="bp">&#8594;</span> <span class="n">MyNat</span>

<span class="kn">namespace</span> <span class="n">MyNat</span>

<span class="kd">def</span> <span class="n">add</span> <span class="o">:</span> <span class="n">MyNat</span> <span class="bp">&#8594;</span> <span class="n">MyNat</span> <span class="bp">&#8594;</span> <span class="n">MyNat</span>
  <span class="bp">|</span> <span class="n">x</span><span class="o">,</span> <span class="n">zero</span> <span class="bp">=&gt;</span> <span class="n">x</span>
  <span class="bp">|</span> <span class="n">x</span><span class="o">,</span> <span class="n">succ</span> <span class="n">y</span> <span class="bp">=&gt;</span> <span class="n">succ</span> <span class="o">(</span><span class="n">add</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">mul</span> <span class="o">:</span> <span class="n">MyNat</span> <span class="bp">&#8594;</span> <span class="n">MyNat</span> <span class="bp">&#8594;</span> <span class="n">MyNat</span>
  <span class="bp">|</span> <span class="n">x</span><span class="o">,</span> <span class="n">zero</span> <span class="bp">=&gt;</span> <span class="n">zero</span>
  <span class="bp">|</span> <span class="n">x</span><span class="o">,</span> <span class="n">succ</span> <span class="n">y</span> <span class="bp">=&gt;</span> <span class="n">add</span> <span class="o">(</span><span class="n">mul</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="n">x</span>

<span class="kd">theorem</span> <span class="n">zero_add</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span> <span class="n">add</span> <span class="n">zero</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">induction&#39;</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span>
  <span class="bp">&#183;</span> <span class="n">rfl</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">add</span><span class="o">,</span> <span class="n">ih</span><span class="o">]</span>

<span class="kd">theorem</span> <span class="n">succ_add</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span> <span class="n">add</span> <span class="o">(</span><span class="n">succ</span> <span class="n">m</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">add</span> <span class="n">m</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">induction&#39;</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span>
  <span class="bp">&#183;</span> <span class="n">rfl</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">add</span><span class="o">,</span> <span class="n">ih</span><span class="o">]</span>
  <span class="n">rfl</span>

<span class="kd">theorem</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span> <span class="n">add</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">add</span> <span class="n">n</span> <span class="n">m</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">induction&#39;</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span>
  <span class="bp">&#183;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">zero_add</span><span class="o">]</span>
    <span class="n">rfl</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">add</span><span class="o">,</span> <span class="n">succ_add</span><span class="o">,</span> <span class="n">ih</span><span class="o">]</span>

<span class="kd">theorem</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="n">k</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span> <span class="n">add</span> <span class="o">(</span><span class="n">add</span> <span class="n">m</span> <span class="n">n</span><span class="o">)</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">add</span> <span class="n">m</span> <span class="o">(</span><span class="n">add</span> <span class="n">n</span> <span class="n">k</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
<span class="kd">theorem</span> <span class="n">mul_add</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="n">k</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul</span> <span class="n">m</span> <span class="o">(</span><span class="n">add</span> <span class="n">n</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">add</span> <span class="o">(</span><span class="n">mul</span> <span class="n">m</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">mul</span> <span class="n">m</span> <span class="n">k</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
<span class="kd">theorem</span> <span class="n">zero_mul</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul</span> <span class="n">zero</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">zero</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
<span class="kd">theorem</span> <span class="n">succ_mul</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul</span> <span class="o">(</span><span class="n">succ</span> <span class="n">m</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">add</span> <span class="o">(</span><span class="n">mul</span> <span class="n">m</span> <span class="n">n</span><span class="o">)</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
<span class="kd">theorem</span> <span class="n">mul_comm</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">n</span> <span class="n">m</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
<span class="kd">end</span> <span class="n">MyNat</span>
</pre></div>
</div>
</section>
<section id="section-infinitely-many-primes">
<span id="id4"></span><h2><span class="section-number">5.3. </span>&#32032;&#25968;&#26080;&#31351;<a class="headerlink" href="#section-infinitely-many-primes" title="Link to this heading">&#61633;</a></h2>
<p>&#35753;&#25105;&#20204;&#29992;&#21478;&#19968;&#20010;&#26631;&#20934;&#25968;&#23398;&#23450;&#29702;&#32487;&#32493;&#25506;&#32034;&#24402;&#32435;&#21644;&#36882;&#24402;&#65306;&#35777;&#26126;&#32032;&#25968;&#26377;&#26080;&#31351;&#22810;&#20010;&#12290;
&#19968;&#31181;&#34920;&#36848;&#26041;&#24335;&#26159;&#65292;&#23545;&#20110;&#27599;&#20010;&#33258;&#28982;&#25968; <span class="math notranslate nohighlight">\(n\)</span>,
&#37117;&#26377;&#19968;&#20010;&#22823;&#20110; <span class="math notranslate nohighlight">\(n\)</span> &#30340;&#32032;&#25968;&#12290;
&#20026;&#20102;&#35777;&#26126;&#36825;&#19968;&#28857;&#65292;&#20196; <span class="math notranslate nohighlight">\(p\)</span> &#26159; <span class="math notranslate nohighlight">\(n! + 1\)</span> &#30340;&#20219;&#24847;&#19968;&#20010;&#32032;&#22240;&#23376;&#12290;
&#33509; <span class="math notranslate nohighlight">\(p\)</span> &#23567;&#20110;&#31561;&#20110; <span class="math notranslate nohighlight">\(n\)</span>, &#21017;&#23427;&#25972;&#38500; <span class="math notranslate nohighlight">\(n!\)</span>.
&#30001;&#20110;&#23427;&#20063;&#25972;&#38500; <span class="math notranslate nohighlight">\(n! + 1\)</span>, &#23427;&#25972;&#38500; 1, &#30683;&#30462;&#12290;
&#22240;&#27492;&#65292;<span class="math notranslate nohighlight">\(p\)</span> &#22823;&#20110; <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>&#20026;&#20102;&#24418;&#24335;&#21270;&#36825;&#20010;&#35777;&#26126;&#65292;
&#25105;&#20204;&#38656;&#35201;&#35770;&#35777;&#20219;&#20309;&#22823;&#20110;&#25110;&#31561;&#20110; 2 &#30340;&#25968;&#37117;&#26377;&#19968;&#20010;&#32032;&#22240;&#25968;&#12290;
&#20026;&#27492;&#65292;&#25105;&#20204;&#38656;&#35201;&#35777;&#26126;&#20219;&#20309;&#19981;&#31561;&#20110; 0 &#25110; 1 &#30340;&#33258;&#28982;&#25968;&#37117;&#22823;&#20110;&#25110;&#31561;&#20110; 2.
&#36825;&#23601;&#32473;&#25105;&#20204;&#24102;&#26469;&#20102;&#24418;&#24335;&#21270;&#30340;&#19968;&#20010;&#21476;&#24618;&#29305;&#24449;&#65306;
&#20687;&#36825;&#26679;&#29712;&#30862;&#30340;&#35821;&#21477;&#24448;&#24448;&#26159;&#26368;&#38590;&#24418;&#24335;&#21270;&#30340;&#12290;
&#22312;&#27492;&#65292;&#25105;&#20204;&#32771;&#34385;&#20960;&#31181;&#26041;&#27861;&#12290;</p>
<p>&#39318;&#20808;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">cases</span></code> &#31574;&#30053;&#65292;
&#20197;&#21450;&#21518;&#32487;&#20989;&#25968;&#23562;&#37325;&#33258;&#28982;&#25968;&#39034;&#24207;&#36825;&#19968;&#20107;&#23454;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">two_le</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">m</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">cases</span> <span class="n">m</span><span class="bp">;</span> <span class="n">contradiction</span>
  <span class="n">case</span> <span class="n">succ</span> <span class="n">m</span> <span class="bp">=&gt;</span>
    <span class="n">cases</span> <span class="n">m</span><span class="bp">;</span> <span class="n">contradiction</span>
    <span class="n">repeat</span> <span class="n">apply</span> <span class="n">Nat.succ_le_succ</span>
    <span class="n">apply</span> <span class="n">zero_le</span>
</pre></div>
</div>
<p>&#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#20351;&#29992;&#31574;&#30053; <code class="docutils literal notranslate"><span class="pre">interval_cases</span></code>,
&#24403;&#30456;&#20851;&#21464;&#37327;&#21253;&#21547;&#22312;&#33258;&#28982;&#25968;&#25110;&#25972;&#25968;&#30340;&#21306;&#38388;&#20869;&#26102;&#65292;
&#23427;&#20250;&#33258;&#21160;&#23558;&#30446;&#26631;&#20998;&#21106;&#25104;&#19981;&#21516;&#30340;&#24773;&#20917;&#12290;
&#35831;&#35760;&#20303;&#65292;&#20320;&#21487;&#20197;&#23558;&#40736;&#26631;&#24748;&#20572;&#22312;&#35813;&#31574;&#30053;&#19978;&#20197;&#26597;&#30475;&#20854;&#25991;&#26723;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">m</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">by_contra</span> <span class="n">h</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">interval_cases</span> <span class="n">m</span> <span class="bp">&lt;;&gt;</span> <span class="n">contradiction</span>
</pre></div>
</div>
<p id="index-0">&#22238;&#24819;&#19968;&#19979;&#65292;<code class="docutils literal notranslate"><span class="pre">interval_cases</span> <span class="pre">m</span></code>
&#21518;&#38754;&#30340;&#20998;&#21495;&#34920;&#31034;&#19979;&#19968;&#20010;&#31574;&#30053;&#23558;&#24212;&#29992;&#20110;&#23427;&#29983;&#25104;&#30340;&#27599;&#31181;&#24773;&#20917;&#12290;
&#36824;&#26377;&#19968;&#31181;&#26041;&#27861;&#26159;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">decide</span></code> &#31574;&#30053;&#65292;
&#35813;&#31574;&#30053;&#23581;&#35797;&#25214;&#21040;&#19968;&#20010;&#20915;&#31574;&#36807;&#31243;&#26469;&#35299;&#20915;&#38382;&#39064;&#12290;
Lean &#30693;&#36947;&#21487;&#20197;&#36890;&#36807;&#23545;&#26377;&#38480;&#20010;&#23454;&#20363;&#36880;&#19968;&#36827;&#34892;&#21028;&#23450;&#65292;
&#26469;&#30830;&#23450;&#19968;&#20010;&#20197;&#26377;&#30028;&#37327;&#35789;
<code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">x,</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">n</span> <span class="pre">&#8594;</span> <span class="pre">...</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">n</span> <span class="pre">&#8743;</span> <span class="pre">...</span></code> &#24320;&#22836;&#30340;&#35821;&#21477;&#30340;&#30495;&#20540;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">m</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">by_contra</span> <span class="n">h</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">revert</span> <span class="n">h0</span> <span class="n">h1</span>
  <span class="n">revert</span> <span class="n">h</span> <span class="n">m</span>
  <span class="n">decide</span>
</pre></div>
</div>
<p>&#25163;&#20013;&#26377;&#20102; <code class="docutils literal notranslate"><span class="pre">two_le</span></code> &#36825;&#20010;&#23450;&#29702;&#65292;
&#25105;&#20204;&#23601;&#21487;&#20197;&#20174;&#35777;&#26126;&#27599;&#20010;&#22823;&#20110; 2 &#30340;&#33258;&#28982;&#25968;&#37117;&#26377;&#19968;&#20010;&#32032;&#25968;&#38500;&#25968;&#24320;&#22987;&#12290;
Mathlib &#21253;&#21547;&#19968;&#20010;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">Nat.minFac</span></code>,
&#23427;&#33021;&#36820;&#22238;&#26368;&#23567;&#30340;&#32032;&#25968;&#38500;&#25968;&#65292;&#20294;&#20026;&#20102;&#23398;&#20064;&#24211;&#30340;&#26032;&#37096;&#20998;&#65292;
&#25105;&#20204;&#23558;&#36991;&#20813;&#20351;&#29992;&#23427;&#65292;&#32780;&#26159;&#30452;&#25509;&#35777;&#26126;&#23450;&#29702;&#12290;</p>
<p>&#22312;&#36825;&#37324;&#65292;&#24120;&#35268;&#30340;&#24402;&#32435;&#27861;&#26159;&#19981;&#22815;&#30340;&#12290;
&#25105;&#20204;&#38656;&#35201;&#29992; <em>&#24378;&#24402;&#32435;&#27861;</em>&#65292;
&#23427;&#20801;&#35768;&#25105;&#20204;&#36890;&#36807;&#35777;&#26126;&#23545;&#27599;&#20010;&#25968; <span class="math notranslate nohighlight">\(n\)</span>,
&#33509;&#24615;&#36136; <span class="math notranslate nohighlight">\(P\)</span> &#23545;&#25152;&#26377;&#23567;&#20110; <span class="math notranslate nohighlight">\(n\)</span> &#30340;&#20540;&#37117;&#25104;&#31435;&#65292;
&#21017;&#23545; <span class="math notranslate nohighlight">\(n\)</span> &#20063;&#25104;&#31435;&#65292;
&#26469;&#35777;&#26126;&#27599;&#20010;&#33258;&#28982;&#25968; <span class="math notranslate nohighlight">\(n\)</span> &#37117;&#26377;&#24615;&#36136; <span class="math notranslate nohighlight">\(P\)</span>.
&#22312; Lean &#20013;&#65292;&#36825;&#20010;&#21407;&#21017;&#34987;&#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">Nat.strong_induction_on</span></code>,
&#25105;&#20204;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">using</span></code> &#20851;&#38190;&#23383;&#21578;&#35785;&#24402;&#32435;&#31574;&#30053;&#21435;&#20351;&#29992;&#23427;&#12290;
&#35831;&#27880;&#24847;&#65292;&#24403;&#25105;&#20204;&#36825;&#26679;&#20570;&#26102;&#65292;&#23601;&#27809;&#26377;&#24402;&#32435;&#22880;&#22522;&#20102;&#65307;
&#23427;&#24050;&#34987;&#19968;&#33324;&#24402;&#32435;&#27493;&#39588;&#25152;&#21253;&#21547;&#12290;</p>
<p>&#35770;&#35777;&#31616;&#36848;&#22914;&#19979;&#12290;&#20551;&#35774; <span class="math notranslate nohighlight">\(n&#8805;2\)</span>,
&#22914;&#26524; <span class="math notranslate nohighlight">\(n\)</span> &#26159;&#32032;&#25968;&#65292;&#25105;&#20204;&#30340;&#35777;&#26126;&#23601;&#23436;&#25104;&#20102;&#12290;
&#22914;&#26524;&#19981;&#26159;&#65292;&#37027;&#20040;&#26681;&#25454;&#20309;&#20026;&#32032;&#25968;&#30340;&#21051;&#30011;&#20043;&#19968;&#65292;
&#23427;&#26377;&#19968;&#20010;&#38750;&#24179;&#20961;&#22240;&#23376; <span class="math notranslate nohighlight">\(m\)</span>,
&#25105;&#20204;&#23601;&#21487;&#20197;&#23545;&#20854;&#24212;&#29992;&#24402;&#32435;&#20551;&#35774;&#12290;
&#20998;&#27493;&#26597;&#30475;&#19979;&#19968;&#20010;&#35777;&#26126;&#20197;&#35266;&#23519;&#20854;&#25512;&#29702;&#36807;&#31243;&#26159;&#22914;&#20309;&#23436;&#25104;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">exists_prime_factor</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">p</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">,</span> <span class="n">p.Prime</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">by_cases</span> <span class="n">np</span> <span class="o">:</span> <span class="n">n.Prime</span>
  <span class="bp">&#183;</span> <span class="n">use</span> <span class="n">n</span><span class="o">,</span> <span class="n">np</span>
  <span class="n">induction&#39;</span> <span class="n">n</span> <span class="n">using</span> <span class="n">Nat.strong_induction_on</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.prime_def_lt</span><span class="o">]</span> <span class="n">at</span> <span class="n">np</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">np</span>
  <span class="n">rcases</span> <span class="n">np</span> <span class="n">h</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">m</span><span class="o">,</span> <span class="n">mltn</span><span class="o">,</span> <span class="n">mdvdn</span><span class="o">,</span> <span class="n">mne1</span><span class="o">&#10217;</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">intro</span> <span class="n">mz</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mz</span><span class="o">,</span> <span class="n">zero_dvd_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">mdvdn</span>
    <span class="n">linarith</span>
  <span class="k">have</span> <span class="n">mgt2</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">two_le</span> <span class="n">this</span> <span class="n">mne1</span>
  <span class="n">by_cases</span> <span class="n">mp</span> <span class="o">:</span> <span class="n">m.Prime</span>
  <span class="bp">&#183;</span> <span class="n">use</span> <span class="n">m</span><span class="o">,</span> <span class="n">mp</span>
  <span class="bp">&#183;</span> <span class="n">rcases</span> <span class="n">ih</span> <span class="n">m</span> <span class="n">mltn</span> <span class="n">mgt2</span> <span class="n">mp</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">p</span><span class="o">,</span> <span class="n">pp</span><span class="o">,</span> <span class="n">pdvd</span><span class="o">&#10217;</span>
    <span class="n">use</span> <span class="n">p</span><span class="o">,</span> <span class="n">pp</span>
    <span class="n">apply</span> <span class="n">pdvd.trans</span> <span class="n">mdvdn</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#21487;&#20197;&#35777;&#26126;&#25105;&#20204;&#23450;&#29702;&#30340;&#19979;&#21015;&#34920;&#36848;&#24418;&#24335;&#12290;
&#30475;&#30475;&#20320;&#33021;&#21542;&#22635;&#34917;&#36825;&#20010;&#26775;&#27010;&#12290;
&#20320;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Nat.factorial_pos</span></code>, <code class="docutils literal notranslate"><span class="pre">Nat.dvd_factorial</span></code>,
&#20197;&#21450; <code class="docutils literal notranslate"><span class="pre">Nat.dvd_sub</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">primes_infinite</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">n</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">p</span> <span class="bp">&gt;</span> <span class="n">n</span><span class="o">,</span> <span class="n">Nat.Prime</span> <span class="n">p</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">n</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">Nat.factorial</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="n">rcases</span> <span class="n">exists_prime_factor</span> <span class="n">this</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">p</span><span class="o">,</span> <span class="n">pp</span><span class="o">,</span> <span class="n">pdvd</span><span class="o">&#10217;</span>
  <span class="n">refine</span> <span class="o">&#10216;</span><span class="n">p</span><span class="o">,</span> <span class="bp">?</span><span class="n">_</span><span class="o">,</span> <span class="n">pp</span><span class="o">&#10217;</span>
  <span class="k">show</span> <span class="n">p</span> <span class="bp">&gt;</span> <span class="n">n</span>
  <span class="n">by_contra</span> <span class="n">ple</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">ple</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="n">Nat.factorial</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">show</span> <span class="n">False</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#35753;&#25105;&#20204;&#32771;&#34385;&#19978;&#36848;&#35777;&#26126;&#30340;&#19968;&#31181;&#21464;&#24335;&#65292;
&#20854;&#20013;&#20026;&#20102;&#20195;&#26367;&#38454;&#20056;&#20989;&#25968;&#65292;
&#25105;&#20204;&#20551;&#35774;&#32473;&#23450;&#20102;&#19968;&#20010;&#26377;&#38480;&#38598; <span class="math notranslate nohighlight">\(\{ p_1, \ldots, p_n \}\)</span>,
&#32771;&#34385; <span class="math notranslate nohighlight">\(\prod_{i = 1}^n p_i + 1\)</span> &#30340;&#19968;&#20010;&#32032;&#22240;&#23376;&#12290;
&#32032;&#22240;&#23376;&#24517;&#39035;&#19981;&#21516;&#20110;&#21508;&#20010; <span class="math notranslate nohighlight">\(p_i\)</span>,
&#36825;&#34920;&#26126;&#19981;&#23384;&#22312;&#21253;&#21547;&#20840;&#37096;&#32032;&#25968;&#30340;&#26377;&#38480;&#38598;&#12290;</p>
<p>&#24418;&#24335;&#21270;&#36825;&#19968;&#35770;&#35777;&#35201;&#27714;&#25105;&#20204;&#23545;&#26377;&#38480;&#38598;&#36827;&#34892;&#25512;&#29702;&#12290;
&#22312; Lean &#20013;&#65292;&#23545;&#20110;&#20219;&#24847;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, &#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Finset</span> <span class="pre">&#945;</span></code>
&#34920;&#31034;&#31867;&#22411;&#20026; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#20803;&#32032;&#30340;&#26377;&#38480;&#38598;&#12290;
&#35201;&#23545;&#26377;&#38480;&#38598;&#36827;&#34892;&#35745;&#31639;&#24615;&#25512;&#29702;&#65292;&#23601;&#35201;&#26377;&#19968;&#20010;&#27969;&#31243;&#26469;&#27979;&#35797; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#20013;&#30340;&#30456;&#31561;&#24615;&#65292;
&#36825;&#23601;&#26159;&#20026;&#20160;&#20040;&#19979;&#38754;&#30340;&#29255;&#27573;&#21253;&#21547;&#20102;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">[DecidableEq</span> <span class="pre">&#945;]</span></code>.
&#23545;&#20110;&#20687; <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code>, <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">&#8474;</span></code> &#36825;&#26679;&#30340;&#20855;&#20307;&#25968;&#25454;&#31867;&#22411;&#65292;&#20551;&#35774;&#33258;&#21160;&#25104;&#31435;&#12290;
&#22312;&#23545;&#23454;&#25968;&#36827;&#34892;&#25512;&#29702;&#26102;&#65292;&#20026;&#28385;&#36275;&#20551;&#35774;&#21487;&#20197;&#20351;&#29992;&#32463;&#20856;&#36923;&#36753;&#32780;&#25918;&#24323;&#35745;&#31639;&#35299;&#37322;&#12290;</p>
<p>&#25105;&#20204;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">Finset</span></code> &#21629;&#20196;&#26469;&#20026;&#30456;&#20851;&#23450;&#29702;&#25552;&#20379;&#26356;&#30701;&#30340;&#21517;&#31216;&#12290;
&#19981;&#20687;&#38598;&#21512;&#30340;&#24773;&#20917;&#65292;&#32477;&#22823;&#22810;&#25968;&#20851;&#20110;&#26377;&#38480;&#38598;&#30340;&#31561;&#20215;&#19981;&#26159;&#23450;&#20041;&#24615;&#25104;&#31435;&#30340;&#65292;
&#25152;&#20197;&#23427;&#20204;&#38656;&#35201;&#20351;&#29992;&#35832;&#22914;
<code class="docutils literal notranslate"><span class="pre">Finset.subset_iff</span></code>, <code class="docutils literal notranslate"><span class="pre">Finset.mem_union</span></code>, <code class="docutils literal notranslate"><span class="pre">Finset.mem_inter</span></code>,
&#20197;&#21450; <code class="docutils literal notranslate"><span class="pre">Finset.mem_sdiff</span></code> &#36825;&#20123;&#31561;&#20215;&#26469;&#25163;&#21160;&#23637;&#24320;&#12290;
&#25105;&#20204;&#20173;&#28982;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">ext</span></code> &#31574;&#30053;&#65292;
&#25226;&#35777;&#26126;&#20004;&#20010;&#26377;&#38480;&#38598;&#21512;&#30456;&#31561;&#65292;
&#36824;&#21407;&#20026;&#35777;&#26126;&#20854;&#20013;&#20219;&#24847;&#19968;&#20010;&#38598;&#21512;&#30340;&#27599;&#20010;&#20803;&#32032;&#37117;&#26159;&#21478;&#19968;&#20010;&#38598;&#21512;&#30340;&#20803;&#32032;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span> <span class="n">Finset</span>

<span class="kn">section</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">DecidableEq</span> <span class="n">&#945;</span><span class="o">]</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">&#945;</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">subset_iff</span><span class="o">]</span>
  <span class="n">intro</span> <span class="n">x</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mem_inter</span><span class="o">,</span> <span class="n">mem_union</span><span class="o">,</span> <span class="n">mem_union</span><span class="o">,</span> <span class="n">mem_inter</span><span class="o">,</span> <span class="n">mem_inter</span><span class="o">]</span>
  <span class="n">tauto</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">subset_iff</span><span class="o">]</span>
  <span class="n">intro</span> <span class="n">x</span>
  <span class="n">tauto</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="bp">&#8838;</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">subset_iff</span><span class="o">]</span>
  <span class="n">intro</span> <span class="n">x</span>
  <span class="n">tauto</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">ext</span> <span class="n">x</span>
  <span class="n">simp</span>
  <span class="n">tauto</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#20351;&#29992;&#20102;&#19968;&#20010;&#26032;&#25216;&#24039;&#65306;<code class="docutils literal notranslate"><span class="pre">tauto</span></code> &#31574;&#30053;
&#65288;&#20197;&#21450;&#20351;&#29992;&#32463;&#20856;&#36923;&#36753;&#30340;&#21152;&#24378;&#29256; <code class="docutils literal notranslate"><span class="pre">tauto!</span></code>&#65289;
&#21487;&#20197;&#29992;&#26469;&#20813;&#38500;&#21629;&#39064;&#37325;&#35328;&#24335;&#12290;
&#30475;&#30475;&#20320;&#33021;&#21542;&#29992;&#36825;&#20123;&#26041;&#27861;&#35777;&#26126;&#19979;&#38754;&#30340;&#20004;&#20010;&#20363;&#23376;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">r</span> <span class="bp">&#8746;</span> <span class="n">s</span><span class="o">)</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="n">r</span> <span class="bp">&#8746;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">&#8746;</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">r</span> <span class="bp">\</span> <span class="n">s</span><span class="o">)</span> <span class="bp">\</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">\</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">Finset.dvd_prod_of_mem</span></code>
&#21578;&#35785;&#25105;&#20204;&#22914;&#26524; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#26159;&#26377;&#38480;&#38598; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#20803;&#32032;&#65292;
&#37027;&#20040; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#25972;&#38500; <code class="docutils literal notranslate"><span class="pre">&#8719;</span> <span class="pre">i</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">i</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&#8739;</span> <span class="bp">&#8719;</span> <span class="n">i</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">i</span> <span class="o">:=</span>
  <span class="n">Finset.dvd_prod_of_mem</span> <span class="n">_</span> <span class="n">h</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#20063;&#38656;&#35201;&#30693;&#36947;&#22312; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#26159;&#32032;&#25968;&#19988; <code class="docutils literal notranslate"><span class="pre">s</span></code>
&#26159;&#32032;&#25968;&#38598;&#30340;&#24773;&#20917;&#19979;&#36870;&#21629;&#39064;&#25104;&#31435;&#12290;
&#20026;&#20102;&#35828;&#26126;&#36825;&#19968;&#28857;&#65292;&#25105;&#20204;&#38656;&#35201;&#19979;&#21015;&#24341;&#29702;&#65292;
&#20320;&#21487;&#20197;&#20351;&#29992;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">Nat.Prime.eq_one_or_self_of_dvd</span></code> &#35777;&#26126;&#23427;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">_root_.Nat.Prime.eq_of_dvd_of_prime</span> <span class="o">{</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span>
      <span class="o">(</span><span class="n">prime_p</span> <span class="o">:</span> <span class="n">Nat.Prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">prime_q</span> <span class="o">:</span> <span class="n">Nat.Prime</span> <span class="n">q</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="n">q</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#24341;&#29702;&#35777;&#26126;&#33509;&#32032;&#25968; <code class="docutils literal notranslate"><span class="pre">p</span></code> &#25972;&#38500;&#26377;&#38480;&#32032;&#25968;&#38598;&#30340;&#20056;&#31215;&#65292;
&#21017;&#23427;&#25972;&#38500;&#20854;&#20013;&#19968;&#20010;&#32032;&#25968;&#12290;
Mathlib &#25552;&#20379;&#20102;&#22312;&#26377;&#38480;&#38598;&#19978;&#20570;&#24402;&#32435;&#30340;&#19968;&#20010;&#26377;&#29992;&#27861;&#21017;&#65306;
&#35201;&#35777;&#26126;&#26576;&#24615;&#36136;&#23545;&#20219;&#24847;&#26377;&#38480;&#38598; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#25104;&#31435;&#65292;
&#20808;&#35777;&#26126;&#20854;&#23545;&#31354;&#38598;&#25104;&#31435;&#65292;
&#20877;&#35777;&#26126;&#24403;&#28155;&#21152;&#19968;&#20010;&#26032;&#20803;&#32032; <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&#8713;</span> <span class="pre">s</span></code> &#26102;&#35813;&#24615;&#36136;&#20445;&#25345;&#25104;&#31435;&#12290;
&#36825;&#20010;&#27861;&#21017;&#34987;&#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">Finset.induction_on</span></code>.
&#24403;&#25105;&#20204;&#21578;&#35785;&#24402;&#32435;&#31574;&#30053;&#20351;&#29992;&#23427;&#26102;&#65292;
&#25105;&#20204;&#36824;&#21487;&#20197;&#25351;&#23450; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#21517;&#31216;&#65292;
&#24402;&#32435;&#27493;&#39588;&#20013;&#30340;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&#8713;</span> <span class="pre">s</span></code> &#30340;&#21517;&#31216;&#65292;&#20197;&#21450;&#24402;&#32435;&#20551;&#35774;&#30340;&#21517;&#31216;&#12290;
&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">Finset.insert</span> <span class="pre">a</span> <span class="pre">s</span></code> &#34920;&#31034; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#21644;&#21333;&#20803;&#32032;&#38598; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#30340;&#24182;&#12290;
&#28982;&#21518;&#65292;&#31561;&#24335; <code class="docutils literal notranslate"><span class="pre">Finset.prod_empty</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Finset.prod_insert</span></code>
&#20026;&#20056;&#31215;&#25552;&#20379;&#20102;&#30456;&#20851;&#30340;&#37325;&#20889;&#27861;&#21017;&#12290;
&#22312;&#19979;&#38754;&#30340;&#35777;&#26126;&#20013;&#65292;&#31532;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#24212;&#29992;&#20102; <code class="docutils literal notranslate"><span class="pre">Finset.prod_empty</span></code>.
&#36880;&#27493;&#36861;&#36394;&#35777;&#26126;&#30340;&#24320;&#22836;&#65292;&#35266;&#23519;&#24402;&#32435;&#30340;&#23637;&#24320;&#65292;&#28982;&#21518;&#23436;&#25104;&#23427;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">mem_of_dvd_prod_primes</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">prime_p</span> <span class="o">:</span> <span class="n">p.Prime</span><span class="o">)</span> <span class="o">:</span>
    <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">n</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">Nat.Prime</span> <span class="n">n</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="o">(</span><span class="n">p</span> <span class="bp">&#8739;</span> <span class="bp">&#8719;</span> <span class="n">n</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">n</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="n">p</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>
  <span class="n">induction&#39;</span> <span class="n">s</span> <span class="n">using</span> <span class="n">Finset.induction_on</span> <span class="k">with</span> <span class="n">a</span> <span class="n">s</span> <span class="n">ans</span> <span class="n">ih</span>
  <span class="bp">&#183;</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">h&#8321;</span>
    <span class="n">linarith</span> <span class="o">[</span><span class="n">prime_p.two_le</span><span class="o">]</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">Finset.prod_insert</span> <span class="n">ans</span><span class="o">,</span> <span class="n">prime_p.dvd_mul</span><span class="o">]</span> <span class="n">at</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mem_insert</span><span class="o">]</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#38656;&#35201;&#26368;&#21518;&#19968;&#20010;&#26377;&#38480;&#38598;&#24615;&#36136;&#12290;
&#32473;&#23450;&#19968;&#20010;&#20803;&#32032; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">Set</span> <span class="pre">&#945;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#19978;&#30340;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">P</span></code>,
&#22312; <a class="reference internal" href="C04_Sets_and_Functions.html#sets-and-functions"><span class="std std-numref">Chapter 4</span></a> &#20013;&#65292;
&#25105;&#20204;&#29992; <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">|</span> <span class="pre">P</span> <span class="pre">x</span> <span class="pre">}</span></code> &#34920;&#31034;&#28385;&#36275; <code class="docutils literal notranslate"><span class="pre">P</span></code> &#30340;&#20803;&#32032;&#30340;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">s</span></code>.
&#32473;&#23450; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">Finset</span> <span class="pre">&#945;</span></code>,
&#31867;&#20284;&#30340;&#27010;&#24565;&#35760;&#20026; <code class="docutils literal notranslate"><span class="pre">s.filter</span> <span class="pre">P</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s.filter</span> <span class="n">Nat.Prime</span> <span class="bp">&#8596;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="bp">&#8743;</span> <span class="n">x.Prime</span> <span class="o">:=</span>
  <span class="n">mem_filter</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#35777;&#26126;&#8220;&#32032;&#25968;&#26377;&#26080;&#31351;&#22810;&#20010;&#8221;&#36825;&#19968;&#21629;&#39064;&#30340;&#21478;&#19968;&#31181;&#34920;&#36848;&#65292;
&#21363;&#32473;&#23450;&#20219;&#24847; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">Finset</span> <span class="pre">&#8469;</span></code>, &#23384;&#22312;&#19968;&#20010;&#32032;&#25968; <code class="docutils literal notranslate"><span class="pre">p</span></code> &#19981;&#26159; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#20803;&#32032;&#12290;
&#20026;&#20102;&#23548;&#20986;&#30683;&#30462;&#65292;&#25105;&#20204;&#20551;&#35774;&#25152;&#26377;&#32032;&#25968;&#37117;&#22312; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#20013;&#65292;
&#28982;&#21518;&#32553;&#20943;&#20026;&#19968;&#20010;&#20165;&#21253;&#21547;&#25152;&#26377;&#32032;&#25968;&#30340;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">s</span></code>.
&#21462;&#35813;&#38598;&#21512;&#30340;&#20056;&#31215;&#65292;&#21152;&#19968;&#65292;&#28982;&#21518;&#25214;&#21040;&#32467;&#26524;&#30340;&#19968;&#20010;&#32032;&#22240;&#25968;&#65292;
&#36825;&#36890;&#21521;&#20102;&#25105;&#20204;&#27491;&#22312;&#23547;&#25214;&#30340;&#30683;&#30462;&#12290;
&#30475;&#30475;&#20320;&#33021;&#21542;&#23436;&#25104;&#19979;&#38754;&#30340;&#27010;&#35201;&#12290;
&#20320;&#21487;&#20197;&#22312;&#31532;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">have</span></code> &#30340;&#35777;&#26126;&#20013;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Finset.prod_pos</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">primes_infinite&#39;</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">Nat</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">p</span><span class="o">,</span> <span class="n">Nat.Prime</span> <span class="n">p</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="bp">&#8713;</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">s</span>
  <span class="n">by_contra</span> <span class="n">h</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">set</span> <span class="n">s&#39;</span> <span class="o">:=</span> <span class="n">s.filter</span> <span class="n">Nat.Prime</span> <span class="k">with</span> <span class="n">s&#39;_def</span>
  <span class="k">have</span> <span class="n">mem_s&#39;</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">},</span> <span class="n">n</span> <span class="bp">&#8712;</span> <span class="n">s&#39;</span> <span class="bp">&#8596;</span> <span class="n">n.Prime</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">intro</span> <span class="n">n</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">s&#39;_def</span><span class="o">]</span>
    <span class="n">apply</span> <span class="n">h</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="o">(</span><span class="bp">&#8719;</span> <span class="n">i</span> <span class="bp">&#8712;</span> <span class="n">s&#39;</span><span class="o">,</span> <span class="n">i</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="n">rcases</span> <span class="n">exists_prime_factor</span> <span class="n">this</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">p</span><span class="o">,</span> <span class="n">pp</span><span class="o">,</span> <span class="n">pdvd</span><span class="o">&#10217;</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="bp">&#8719;</span> <span class="n">i</span> <span class="bp">&#8712;</span> <span class="n">s&#39;</span><span class="o">,</span> <span class="n">i</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">convert</span> <span class="n">Nat.dvd_sub&#39;</span> <span class="n">pdvd</span> <span class="n">this</span>
    <span class="n">simp</span>
  <span class="k">show</span> <span class="n">False</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#30001;&#27492;&#25105;&#20204;&#24050;&#32463;&#35265;&#36807;&#20004;&#31181;&#34920;&#36798;&#8220;&#26377;&#26080;&#31351;&#22810;&#20010;&#32032;&#25968;&#8221;&#30340;&#26041;&#24335;&#65306;
&#35828;&#32032;&#25968;&#19981;&#20197;&#20219;&#20309; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#20026;&#19978;&#30028;&#65292;&#21644;&#35828;&#23427;&#20204;&#19981;&#21253;&#21547;&#22312;&#20219;&#20309;&#26377;&#38480;&#38598; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#20013;&#12290;
&#19979;&#38754;&#20004;&#20010;&#35777;&#26126;&#35828;&#26126;&#20102;&#36825;&#20123;&#34920;&#31034;&#26041;&#27861;&#26159;&#31561;&#20215;&#30340;&#12290;
&#22312;&#31532;&#20108;&#20010;&#35777;&#26126;&#20013;&#65292;&#20026;&#20102;&#26500;&#24314; <code class="docutils literal notranslate"><span class="pre">s.filter</span> <span class="pre">Q</span></code>, &#25105;&#20204;&#21482;&#22909;&#20551;&#23450;&#23384;&#22312;&#19968;&#20010;&#33021;&#20915;&#23450; <code class="docutils literal notranslate"><span class="pre">Q</span></code>
&#26159;&#21542;&#25104;&#31435;&#30340;&#36807;&#31243;&#12290;Lean&#30693;&#36947;&#26377;&#19968;&#20010;&#29992;&#20110; <code class="docutils literal notranslate"><span class="pre">Nat.Prime</span></code> &#30340;&#36807;&#31243;&#12290;&#19968;&#33324;&#22320;&#65292;
&#22914;&#26524;&#25105;&#20204;&#38190;&#20837; <code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">Classical</span></code> &#20197;&#20351;&#29992;&#32463;&#20856;&#36923;&#36753;&#65292;
&#25105;&#20204;&#23601;&#21487;&#20197;&#30465;&#30053;&#36825;&#20010;&#20551;&#35774;&#12290;</p>
<p>&#22312; Mathlib &#20013;&#65292; <code class="docutils literal notranslate"><span class="pre">Finset.sup</span> <span class="pre">s</span> <span class="pre">f</span></code> &#34920;&#31034;&#24403; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#21462;&#36941; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#26102; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span></code> &#30340;&#19978;&#30830;&#30028;&#65292;
&#32780;&#22312; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#20026;&#31354;&#19988; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#30340;&#21040;&#36798;&#22495;&#20026; <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> &#26102;&#36820;&#22238; <code class="docutils literal notranslate"><span class="pre">0</span></code>.
&#22312;&#31532;&#19968;&#20010;&#35777;&#26126;&#20013;&#65292;&#25105;&#20204;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">s.sup</span> <span class="pre">id</span></code> &#34920;&#31034; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#26368;&#22823;&#20540;&#65292;
&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">id</span></code> &#26159;&#24658;&#31561;&#20989;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">bounded_of_ex_finset</span> <span class="o">(</span><span class="n">Q</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span>
    <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">k</span><span class="o">,</span> <span class="n">Q</span> <span class="n">k</span> <span class="bp">&#8594;</span> <span class="n">k</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="bp">&#8707;</span> <span class="n">n</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">k</span><span class="o">,</span> <span class="n">Q</span> <span class="n">k</span> <span class="bp">&#8594;</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rintro</span> <span class="o">&#10216;</span><span class="n">s</span><span class="o">,</span> <span class="n">hs</span><span class="o">&#10217;</span>
  <span class="n">use</span> <span class="n">s.sup</span> <span class="n">id</span> <span class="bp">+</span> <span class="mi">1</span>
  <span class="n">intro</span> <span class="n">k</span> <span class="n">Qk</span>
  <span class="n">apply</span> <span class="n">Nat.lt_succ_of_le</span>
  <span class="k">show</span> <span class="n">id</span> <span class="n">k</span> <span class="bp">&#8804;</span> <span class="n">s.sup</span> <span class="n">id</span>
  <span class="n">apply</span> <span class="n">le_sup</span> <span class="o">(</span><span class="n">hs</span> <span class="n">k</span> <span class="n">Qk</span><span class="o">)</span>

<span class="kd">theorem</span> <span class="n">ex_finset_of_bounded</span> <span class="o">(</span><span class="n">Q</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">DecidablePred</span> <span class="n">Q</span><span class="o">]</span> <span class="o">:</span>
    <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">n</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">k</span><span class="o">,</span> <span class="n">Q</span> <span class="n">k</span> <span class="bp">&#8594;</span> <span class="n">k</span> <span class="bp">&#8804;</span> <span class="n">n</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="bp">&#8707;</span> <span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">k</span><span class="o">,</span> <span class="n">Q</span> <span class="n">k</span> <span class="bp">&#8596;</span> <span class="n">k</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rintro</span> <span class="o">&#10216;</span><span class="n">n</span><span class="o">,</span> <span class="n">hn</span><span class="o">&#10217;</span>
  <span class="n">use</span> <span class="o">(</span><span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">filter</span> <span class="n">Q</span>
  <span class="n">intro</span> <span class="n">k</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">Nat.lt_succ_iff</span><span class="o">]</span>
  <span class="n">exact</span> <span class="n">hn</span> <span class="n">k</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#23545;&#23384;&#22312;&#26080;&#31351;&#22810;&#20010;&#32032;&#25968;&#30340;&#31532;&#20108;&#20010;&#35777;&#26126;&#20570;&#20102;&#19968;&#20010;&#23567;&#30340;&#25913;&#21160;&#65292;
&#34920;&#26126;&#26377;&#26080;&#31351;&#22810;&#20010;&#27169; 4 &#20313; 3 &#30340;&#32032;&#25968;&#12290;
&#35770;&#35777;&#22914;&#19979;&#12290;
&#39318;&#20808;&#65292;&#27880;&#24847;&#21040;&#33509;&#20004;&#20010;&#25968; <span class="math notranslate nohighlight">\(m\)</span> &#21644; <span class="math notranslate nohighlight">\(n\)</span> &#30340;&#20056;&#31215;&#27169; 4 &#31561;&#20110; 3,
&#37027;&#20040;&#20004;&#20010;&#25968;&#20013;&#26377;&#19968;&#20010;&#27169; 4 &#20313; 3.
&#27605;&#31455;&#65292;&#23427;&#20204;&#37117;&#26159;&#22855;&#25968;&#65292;&#33509;&#23427;&#20204;&#37117;&#27169; 4 &#20313; 1,
&#37027;&#20040;&#23427;&#20204;&#30340;&#20056;&#31215;&#20063;&#19968;&#26679;&#12290;
&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#35266;&#23519;&#35777;&#26126;&#33509;&#26576;&#20010;&#22823;&#20110; 2 &#30340;&#25968;&#27169; 4 &#20313; 3,
&#37027;&#20040;&#37027;&#20010;&#25968;&#26377;&#19968;&#20010;&#27169; 4 &#20313; 3 &#30340;&#32032;&#22240;&#23376;&#12290;</p>
<p>&#29616;&#22312;&#20551;&#35774;&#21482;&#26377;&#26377;&#38480;&#22810;&#20010;&#32032;&#25968;&#27169; 4 &#20313; 3,
&#35760;&#20026; <span class="math notranslate nohighlight">\(p_1, \ldots, p_k\)</span>.
&#19981;&#22833;&#19968;&#33324;&#24615;&#65292;&#25105;&#20204;&#21487;&#20197;&#20551;&#35774; <span class="math notranslate nohighlight">\(p_1 = 3\)</span>.
&#32771;&#34385;&#20056;&#31215; <span class="math notranslate nohighlight">\(4 \prod_{i = 2}^k p_i + 3\)</span>.
&#23481;&#26131;&#30475;&#20986;&#36825;&#20010;&#20056;&#31215;&#27169; 4 &#20313; 3,
&#22240;&#27492;&#23427;&#26377;&#19968;&#20010;&#27169; 4 &#20313; 3 &#30340;&#32032;&#22240;&#23376; <span class="math notranslate nohighlight">\(p\)</span>.
&#19981;&#21487;&#33021;&#26159; <span class="math notranslate nohighlight">\(p = 3\)</span> &#30340;&#24773;&#20917;&#65307;
&#30001;&#20110; <span class="math notranslate nohighlight">\(p\)</span> &#25972;&#38500; <span class="math notranslate nohighlight">\(4 \prod_{i = 2}^k p_i + 3\)</span>,
&#33509; <span class="math notranslate nohighlight">\(p\)</span> &#31561;&#20110; 3, &#21017;&#23427;&#20063;&#25972;&#38500; <span class="math notranslate nohighlight">\(\prod_{i = 2}^k p_i\)</span>,
&#36825;&#24847;&#21619;&#30528; <span class="math notranslate nohighlight">\(p\)</span> &#31561;&#20110; <span class="math notranslate nohighlight">\(p_i\)</span>, <span class="math notranslate nohighlight">\(i = 2, \ldots, k\)</span> &#20013;&#30340;&#19968;&#20010;&#65307;
&#32780;&#25105;&#20204;&#24050;&#32463;&#22312;&#36825;&#20010;&#21015;&#34920;&#20013;&#21435;&#25481;&#20102; 3.
&#22240;&#27492; <span class="math notranslate nohighlight">\(p\)</span> &#21482;&#33021;&#26159;&#20854;&#20313;&#20803;&#32032; <span class="math notranslate nohighlight">\(p_i\)</span> &#20013;&#30340;&#19968;&#20010;&#12290;
&#20294;&#22312;&#37027;&#31181;&#24773;&#20917;&#19979;&#65292;<span class="math notranslate nohighlight">\(p\)</span> &#25972;&#38500; <span class="math notranslate nohighlight">\(4 \prod_{i = 2}^k p_i\)</span>,
&#20174;&#32780;&#25972;&#38500; 3, &#36825;&#21644;&#23427;&#19981;&#26159; 3 &#30683;&#30462;&#12290;</p>
<p>&#22312; Lean &#20013;&#65292;&#35760;&#21495; <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">%</span> <span class="pre">m</span></code> &#35835;&#20316; &#8220;<code class="docutils literal notranslate"><span class="pre">n</span></code> &#27169; <code class="docutils literal notranslate"><span class="pre">m</span></code>,&#8221;
&#34920;&#31034; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#38500;&#20197; <code class="docutils literal notranslate"><span class="pre">m</span></code> &#30340;&#20313;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="mi">27</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
</pre></div>
</div>
<p>&#20174;&#27492;&#20197;&#21518;&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#35821;&#21477; &#8220;<code class="docutils literal notranslate"><span class="pre">n</span></code> &#27169; 4 &#20313; 3&#8221; &#34920;&#31034;&#20026; <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">%</span> <span class="pre">4</span> <span class="pre">=</span> <span class="pre">3</span></code>.
&#20197;&#19979;&#31034;&#20363;&#21644;&#23450;&#29702;&#24635;&#32467;&#20102;&#25105;&#20204;&#23558;&#22312;&#19979;&#38754;&#38656;&#35201;&#20351;&#29992;&#30340;&#26377;&#20851;&#27492;&#20989;&#25968;&#30340;&#20107;&#23454;&#12290;
&#31532;&#19968;&#20010;&#20855;&#21517;&#30340;&#23450;&#29702;&#26159;&#36890;&#36807;&#23569;&#37327;&#24773;&#20917;&#36827;&#34892;&#25512;&#29702;&#30340;&#21478;&#19968;&#20010;&#20363;&#35777;&#12290;
&#22312;&#31532;&#20108;&#20010;&#20855;&#21517;&#23450;&#29702;&#20013;&#65292;
&#35831;&#35760;&#20303;&#20998;&#21495;&#34920;&#31034;&#21518;&#32493;&#31574;&#30053;&#22359;&#24212;&#29992;&#20110;&#21069;&#19968;&#20010;&#31574;&#30053;&#21019;&#24314;&#30340;&#25152;&#26377;&#30446;&#26631;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="mi">4</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">3</span><span class="o">)</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">add_comm</span><span class="o">,</span> <span class="n">Nat.add_mul_mod_self_left</span><span class="o">]</span>

<span class="kd">theorem</span> <span class="n">mod_4_eq_3_or_mod_4_eq_3</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="bp">&#8744;</span> <span class="n">n</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">revert</span> <span class="n">h</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.mul_mod</span><span class="o">]</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">&lt;</span> <span class="mi">4</span> <span class="o">:=</span> <span class="n">Nat.mod_lt</span> <span class="n">m</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num</span><span class="o">)</span>
  <span class="n">interval_cases</span> <span class="n">m</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">&lt;;&gt;</span> <span class="n">simp</span> <span class="o">[</span><span class="bp">-</span><span class="n">Nat.mul_mod_mod</span><span class="o">]</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">&lt;</span> <span class="mi">4</span> <span class="o">:=</span> <span class="n">Nat.mod_lt</span> <span class="n">n</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num</span><span class="o">)</span>
  <span class="n">interval_cases</span> <span class="n">n</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">&lt;;&gt;</span> <span class="n">simp</span>

<span class="kd">theorem</span> <span class="n">two_le_of_mod_4_eq_3</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">apply</span> <span class="n">two_le</span> <span class="bp">&lt;;&gt;</span>
    <span class="bp">&#183;</span> <span class="n">intro</span> <span class="n">neq</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">neq</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span>
      <span class="n">norm_num</span> <span class="n">at</span> <span class="n">h</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#20063;&#38656;&#35201;&#19979;&#21015;&#20107;&#23454;&#65292;&#23427;&#26159;&#35828;&#33509; <code class="docutils literal notranslate"><span class="pre">m</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#30340;&#19968;&#20010;&#38750;&#24179;&#20961;&#22240;&#23376;&#65292;
&#37027;&#20040; <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">/</span> <span class="pre">m</span></code> &#20063;&#26159;&#12290;
&#30475;&#30475;&#20320;&#33021;&#21542;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Nat.div_dvd_of_dvd</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Nat.div_lt_self</span></code> &#23436;&#25104;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">aux</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8322;</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">/</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">n</span> <span class="bp">&#8743;</span> <span class="n">n</span> <span class="bp">/</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#29616;&#22312;&#25226;&#25152;&#26377;&#30340;&#37096;&#20998;&#25918;&#22312;&#19968;&#36215;&#26469;&#35777;&#26126;&#65292;
&#20219;&#20309;&#27169; 4 &#20313; 3 &#30340;&#25968;&#37117;&#26377;&#19968;&#20010;&#20855;&#26377;&#30456;&#21516;&#24615;&#36136;&#30340;&#32032;&#25968;&#22240;&#23376;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">exists_prime_factor_mod_4_eq_3</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">&#8707;</span> <span class="n">p</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">,</span> <span class="n">p.Prime</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="n">n</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">by_cases</span> <span class="n">np</span> <span class="o">:</span> <span class="n">n.Prime</span>
  <span class="bp">&#183;</span> <span class="n">use</span> <span class="n">n</span>
  <span class="n">induction&#39;</span> <span class="n">n</span> <span class="n">using</span> <span class="n">Nat.strong_induction_on</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.prime_def_lt</span><span class="o">]</span> <span class="n">at</span> <span class="n">np</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">np</span>
  <span class="n">rcases</span> <span class="n">np</span> <span class="o">(</span><span class="n">two_le_of_mod_4_eq_3</span> <span class="n">h</span><span class="o">)</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">m</span><span class="o">,</span> <span class="n">mltn</span><span class="o">,</span> <span class="n">mdvdn</span><span class="o">,</span> <span class="n">mne1</span><span class="o">&#10217;</span>
  <span class="k">have</span> <span class="n">mge2</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">m</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">apply</span> <span class="n">two_le</span> <span class="n">_</span> <span class="n">mne1</span>
    <span class="n">intro</span> <span class="n">mz</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mz</span><span class="o">,</span> <span class="n">zero_dvd_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">mdvdn</span>
    <span class="n">linarith</span>
  <span class="k">have</span> <span class="n">neq</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">/</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">Nat.mul_div_cancel&#39;</span> <span class="n">mdvdn</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="bp">&#8744;</span> <span class="n">n</span> <span class="bp">/</span> <span class="n">m</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">apply</span> <span class="n">mod_4_eq_3_or_mod_4_eq_3</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">neq</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
  <span class="n">rcases</span> <span class="n">this</span> <span class="k">with</span> <span class="n">h1</span> <span class="bp">|</span> <span class="n">h1</span>
  <span class="bp">.</span> <span class="gr">sorry</span>
  <span class="bp">.</span> <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#24050;&#32463;&#21040;&#20102;&#26368;&#21518;&#38454;&#27573;&#12290;&#32473;&#23450;&#19968;&#20010;&#32032;&#25968;&#38598; <code class="docutils literal notranslate"><span class="pre">s</span></code>,
&#25105;&#20204;&#38656;&#35201;&#35848;&#35770;&#35813;&#38598;&#21512;&#21024;&#38500; 3 (&#22914;&#26524;&#23384;&#22312;)&#30340;&#32467;&#26524;&#12290;
&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">Finset.erase</span></code> &#21487;&#20197;&#22788;&#29702;&#36825;&#20010;&#38382;&#39064;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8712;</span> <span class="n">erase</span> <span class="n">s</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="n">n</span> <span class="bp">&#8743;</span> <span class="n">m</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rwa</span> <span class="o">[</span><span class="n">mem_erase</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8712;</span> <span class="n">erase</span> <span class="n">s</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="n">n</span> <span class="bp">&#8743;</span> <span class="n">m</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">assumption</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#24050;&#32463;&#20934;&#22791;&#22909;&#35777;&#26126;&#23384;&#22312;&#26080;&#31351;&#22810;&#20010;&#27169; 4 &#20313; 3 &#30340;&#32032;&#25968;&#12290;
&#22635;&#20889;&#19979;&#38754;&#32570;&#22833;&#30340;&#37096;&#20998;&#12290;
&#25105;&#20204;&#30340;&#35299;&#31572;&#36335;&#24452;&#20013;&#20351;&#29992;&#20102; <code class="docutils literal notranslate"><span class="pre">Nat.dvd_add_iff_left</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Nat.dvd_sub'</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">primes_mod_4_eq_3_infinite</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">n</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">p</span> <span class="bp">&gt;</span> <span class="n">n</span><span class="o">,</span> <span class="n">Nat.Prime</span> <span class="n">p</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">by_contra</span> <span class="n">h</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">n</span><span class="o">,</span> <span class="n">hn</span><span class="o">&#10217;</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">s</span> <span class="o">:</span> <span class="n">Finset</span> <span class="n">Nat</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">p</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="n">p.Prime</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="bp">&#8596;</span> <span class="n">p</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">apply</span> <span class="n">ex_finset_of_bounded</span>
    <span class="n">use</span> <span class="n">n</span>
    <span class="n">contrapose</span><span class="bp">!</span> <span class="n">hn</span>
    <span class="n">rcases</span> <span class="n">hn</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">p</span><span class="o">,</span> <span class="o">&#10216;</span><span class="n">pp</span><span class="o">,</span> <span class="n">p4</span><span class="o">&#10217;,</span> <span class="n">pltn</span><span class="o">&#10217;</span>
    <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">p</span><span class="o">,</span> <span class="n">pltn</span><span class="o">,</span> <span class="n">pp</span><span class="o">,</span> <span class="n">p4</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">this</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">s</span><span class="o">,</span> <span class="n">hs</span><span class="o">&#10217;</span>
  <span class="k">have</span> <span class="n">h&#8321;</span> <span class="o">:</span> <span class="o">((</span><span class="mi">4</span> <span class="bp">*</span> <span class="bp">&#8719;</span> <span class="n">i</span> <span class="bp">&#8712;</span> <span class="n">erase</span> <span class="n">s</span> <span class="mi">3</span><span class="o">,</span> <span class="n">i</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">3</span><span class="o">)</span> <span class="bp">%</span> <span class="mi">4</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="n">rcases</span> <span class="n">exists_prime_factor_mod_4_eq_3</span> <span class="n">h&#8321;</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">p</span><span class="o">,</span> <span class="n">pp</span><span class="o">,</span> <span class="n">pdvd</span><span class="o">,</span> <span class="n">p4eq</span><span class="o">&#10217;</span>
  <span class="k">have</span> <span class="n">ps</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="n">pne3</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">&#8800;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="mi">4</span> <span class="bp">*</span> <span class="bp">&#8719;</span> <span class="n">i</span> <span class="bp">&#8712;</span> <span class="n">erase</span> <span class="n">s</span> <span class="mi">3</span><span class="o">,</span> <span class="n">i</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="gr">sorry</span>
  <span class="n">contradiction</span>
</pre></div>
</div>
<p>&#22914;&#26524;&#20320;&#25104;&#21151;&#23436;&#25104;&#20102;&#35777;&#26126;&#65292;&#37027;&#20040;&#24685;&#21916;&#20320;&#65281;&#36825;&#26159;&#24418;&#24335;&#21270;&#30340;&#19968;&#20010;&#37325;&#22823;&#25104;&#26524;&#12290;</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C04_Sets_and_Functions.html" class="btn btn-neutral float-left" title="4. &#38598;&#21512;&#21644;&#20989;&#25968;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="C06_Structures.html" class="btn btn-neutral float-right" title="6. Structures" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Jeremy Avigad, Patrick Massot.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>