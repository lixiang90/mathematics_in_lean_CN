<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. &#36923;&#36753; &mdash; Mathematics in Lean 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=7c91f8fd"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Sets and Functions" href="C04_Sets_and_Functions.html" />
    <link rel="prev" title="2. &#22522;&#30784;&#30693;&#35782;" href="C02_Basics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. &#24341;&#35328;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. &#22522;&#30784;&#30693;&#35782;</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. &#36923;&#36753;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#implication-and-the-universal-quantifier">3.1. &#34164;&#21547;&#21644;&#20840;&#31216;&#37327;&#35789;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-existential-quantifier">3.2. &#23384;&#22312;&#37327;&#35789;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#negation">3.3. Negation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conjunction-and-iff">3.4. Conjunction and Iff</a></li>
<li class="toctree-l2"><a class="reference internal" href="#disjunction">3.5. Disjunction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sequences-and-convergence">3.6. Sequences and Convergence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C04_Sets_and_Functions.html">4. Sets and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="C05_Elementary_Number_Theory.html">5. Elementary Number Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="C06_Structures.html">6. Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="C07_Hierarchies.html">7. Hierarchies</a></li>
<li class="toctree-l1"><a class="reference internal" href="C08_Groups_and_Rings.html">8. Groups and Rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="C09_Topology.html">9. Topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="C10_Differential_Calculus.html">10. Differential Calculus</a></li>
<li class="toctree-l1"><a class="reference internal" href="C11_Integration_and_Measure_Theory.html">11. Integration and Measure Theory</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">3. </span>&#36923;&#36753;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C03_Logic.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="logic">
<span id="id1"></span><h1><span class="section-number">3. </span>&#36923;&#36753;<a class="headerlink" href="#logic" title="Link to this heading">&#61633;</a></h1>
<p>&#22312;&#19978;&#19968;&#31456;&#20013;&#65292;&#25105;&#20204;&#35752;&#35770;&#20102;&#31561;&#24335;&#12289;&#19981;&#31561;&#24335;&#21644;&#20687;
&#8220;<span class="math notranslate nohighlight">\(x\)</span> &#25972;&#38500; <span class="math notranslate nohighlight">\(y\)</span>&#8221;
&#36825;&#26679;&#30340;&#22522;&#26412;&#25968;&#23398;&#35821;&#21477;&#12290;
&#22797;&#26434;&#30340;&#25968;&#23398;&#35821;&#21477;&#26159;&#36890;&#36807;&#20351;&#29992; &#8220;&#21644;&#8221;&#12289;&#8221;&#25110;&#8221;&#12289;&#8221;&#19981;&#8221;&#12289;&#8221;&#22914;&#26524;&#8230;&#8230;&#37027;&#20040;&#8221;&#12289;&#8221;&#27599; &#8220;&#21644;
&#8220;&#19968;&#20123; &#8220;&#31561;&#36923;&#36753;&#26415;&#35821;&#65292;
&#20174;&#31867;&#20284;&#30340;&#31616;&#21333;&#35821;&#21477;&#20013;&#24314;&#31435;&#36215;&#26469;&#30340;&#12290;
&#22312;&#26412;&#31456;&#20013;&#65292;
&#25105;&#20204;&#23558;&#21521;&#20320;&#23637;&#31034;&#22914;&#20309;&#22788;&#29702;&#20197;&#36825;&#31181;&#26041;&#24335;&#24314;&#31435;&#36215;&#26469;&#30340;&#35821;&#21477;&#12290;</p>
<section id="implication-and-the-universal-quantifier">
<span id="id2"></span><h2><span class="section-number">3.1. </span>&#34164;&#21547;&#21644;&#20840;&#31216;&#37327;&#35789;<a class="headerlink" href="#implication-and-the-universal-quantifier" title="Link to this heading">&#61633;</a></h2>
<p>&#35831;&#30475; <code class="docutils literal notranslate"><span class="pre">#check</span></code> &#21518;&#38754;&#30340;&#35821;&#21477;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</div>
<p>&#33258;&#28982;&#35821;&#35328;&#34920;&#36848;&#20026; &#8220;&#23545;&#20110;&#27599;&#20010;&#23454;&#25968; <code class="docutils literal notranslate"><span class="pre">x</span></code>, &#33509; <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&#8804;</span> <span class="pre">x</span></code>, &#21017;
<code class="docutils literal notranslate"><span class="pre">x</span></code> &#30340;&#32477;&#23545;&#20540;&#31561;&#20110; <code class="docutils literal notranslate"><span class="pre">x</span></code>&#8221;.
&#25105;&#20204;&#36824;&#21487;&#20197;&#26377;&#26356;&#22797;&#26434;&#30340;&#35821;&#21477;&#65292;&#20363;&#22914;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="n">y</span> <span class="n">&#949;</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="n">&#949;</span> <span class="bp">&#8804;</span> <span class="mi">1</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span>
</pre></div>
</div>
<p>&#33258;&#28982;&#35821;&#35328;&#34920;&#36848;&#20026; &#8220;&#23545;&#20110;&#20219;&#24847;&#30340; <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, &#20197;&#21450; <code class="docutils literal notranslate"><span class="pre">&#949;</span></code>,
&#33509; <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">&#949;</span> <span class="pre">&#8804;</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span></code> &#30340;&#32477;&#23545;&#20540;&#23567;&#20110; <code class="docutils literal notranslate"><span class="pre">&#949;</span></code>,
&#19988; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#30340;&#32477;&#23545;&#20540;&#23567;&#20110; <code class="docutils literal notranslate"><span class="pre">&#949;</span></code>,
&#21017; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></code> &#30340;&#32477;&#23545;&#20540;&#23567;&#20110; <code class="docutils literal notranslate"><span class="pre">&#949;</span></code>.&#8221;
&#22312;Lean&#20013;&#65292;&#19968;&#36830;&#20018;&#30340;&#34164;&#21547;&#20013;&#26377;&#38544;&#21547;&#30340;&#21491;&#32467;&#21512;&#25324;&#21495;&#12290;
&#25152;&#20197;&#19978;&#36848;&#34920;&#36798;&#24335;&#30340;&#24847;&#24605;&#26159;
&#8220;&#33509; <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">&#949;</span></code>, &#21017;&#33509; <code class="docutils literal notranslate"><span class="pre">&#949;</span> <span class="pre">&#8804;</span> <span class="pre">1</span></code>, &#21017;&#33509; <code class="docutils literal notranslate"><span class="pre">|x|</span> <span class="pre">&lt;</span> <span class="pre">&#949;</span></code> &#8230;&#8221;
&#22240;&#27492;&#65292;&#34920;&#36798;&#24335;&#34920;&#31034;&#25152;&#26377;&#20551;&#35774;&#32452;&#21512;&#22312;&#19968;&#36215;&#23548;&#20986;&#32467;&#35770;&#12290;</p>
<p>&#20320;&#24050;&#32463;&#30475;&#21040;&#65292;
&#23613;&#31649;&#36825;&#20010;&#35821;&#21477;&#20013;&#20840;&#31216;&#37327;&#35789;&#30340;&#21462;&#20540;&#33539;&#22260;&#26159;&#23545;&#35937;&#65292;
&#32780;&#34164;&#28085;&#31661;&#22836;&#24341;&#20837;&#30340;&#26159;&#20551;&#35774;&#65292;
&#20294;Lean&#22788;&#29702;&#36825;&#20004;&#32773;&#30340;&#26041;&#24335;&#38750;&#24120;&#30456;&#20284;&#12290;
&#29305;&#21035;&#22320;&#65292;&#22914;&#26524;&#20320;&#24050;&#32463;&#35777;&#26126;&#20102;&#36825;&#31181;&#24418;&#24335;&#30340;&#23450;&#29702;&#65292;
&#20320;&#23601;&#21487;&#20197;&#29992;&#21516;&#26679;&#30340;&#26041;&#27861;&#25226;&#23427;&#24212;&#29992;&#20110;&#23545;&#35937;&#21644;&#20551;&#35774;&#12290;
&#25105;&#20204;&#23558;&#20197;&#19979;&#38754;&#30340;&#35821;&#21477;&#20026;&#20363;&#65292;&#31245;&#21518;&#25105;&#20204;&#20250;&#24110;&#20320;&#35777;&#26126;&#23427;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">my_lemma</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="n">y</span> <span class="n">&#949;</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="n">&#949;</span> <span class="bp">&#8804;</span> <span class="mi">1</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="o">:=</span>
  <span class="gr">sorry</span>

<span class="kn">section</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">&#948;</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">&#948;</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">&#948;</span> <span class="bp">&#8804;</span> <span class="mi">1</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="bp">|</span><span class="n">a</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#948;</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="bp">|</span><span class="n">b</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#948;</span><span class="o">)</span>

<span class="k">#check</span> <span class="n">my_lemma</span> <span class="n">a</span> <span class="n">b</span> <span class="n">&#948;</span>
<span class="k">#check</span> <span class="n">my_lemma</span> <span class="n">a</span> <span class="n">b</span> <span class="n">&#948;</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>
<span class="k">#check</span> <span class="n">my_lemma</span> <span class="n">a</span> <span class="n">b</span> <span class="n">&#948;</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span> <span class="n">ha</span> <span class="n">hb</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#20320;&#20063;&#24050;&#32463;&#30475;&#21040;&#65292;&#22312;Lean&#20013;&#65292;&#24403;&#37327;&#21270;&#21464;&#37327;&#21487;&#20197;&#20174;&#21518;&#38754;&#30340;&#20551;&#35774;&#20013;&#25512;&#26029;&#20986;&#26469;&#26102;&#65292;
&#20351;&#29992;&#22823;&#25324;&#21495;&#23558;&#20854;&#38544;&#21435;&#26159;&#24456;&#24120;&#35265;&#30340;&#12290;
&#24403;&#25105;&#20204;&#36825;&#26679;&#20570;&#30340;&#26102;&#20505;&#65292;
&#25105;&#20204;&#23601;&#21487;&#20197;&#30452;&#25509;&#23558;&#24341;&#29702;&#24212;&#29992;&#21040;&#20551;&#35774;&#20013;&#65292;
&#32780;&#26080;&#38656;&#25552;&#21450;&#23545;&#35937;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">my_lemma2</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">&#949;</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">},</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="n">&#949;</span> <span class="bp">&#8804;</span> <span class="mi">1</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="o">:=</span>
  <span class="gr">sorry</span>

<span class="kn">section</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">&#948;</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">&#948;</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">&#948;</span> <span class="bp">&#8804;</span> <span class="mi">1</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="bp">|</span><span class="n">a</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#948;</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="bp">|</span><span class="n">b</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#948;</span><span class="o">)</span>

<span class="k">#check</span> <span class="n">my_lemma2</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span> <span class="n">ha</span> <span class="n">hb</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#22312;&#24403;&#21069;&#38454;&#27573;&#65292;&#20320;&#20063;&#30693;&#36947;&#22914;&#26524;&#20320;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">apply</span></code>
&#31574;&#30053;&#23558; <code class="docutils literal notranslate"><span class="pre">my_lemma</span></code> &#24212;&#29992;&#20110;&#24418;&#22914; <code class="docutils literal notranslate"><span class="pre">|a</span> <span class="pre">*</span> <span class="pre">b|</span> <span class="pre">&lt;</span> <span class="pre">&#948;</span></code> &#30340;&#30446;&#26631;&#65292;
&#23601;&#20250;&#30041;&#19979;&#19968;&#20123;&#26032;&#30340;&#30446;&#26631;&#65292;&#23427;&#20204;&#35201;&#27714;&#20320;&#35777;&#26126;&#24341;&#29702;&#30340;&#27599;&#20010;&#20551;&#35774;&#12290;</p>
<p id="index-0">&#35201;&#35777;&#26126;&#19982;&#27492;&#31867;&#20284;&#30340;&#35821;&#21477;&#65292;&#38656;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">intro</span></code> &#31574;&#30053;&#12290;
&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#35266;&#23519;&#19968;&#19979;&#35813;&#31574;&#30053;&#20570;&#20102;&#20160;&#20040;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">my_lemma3</span> <span class="o">:</span>
    <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">&#949;</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">},</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="n">&#949;</span> <span class="bp">&#8804;</span> <span class="mi">1</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">x</span> <span class="n">y</span> <span class="n">&#949;</span> <span class="n">epos</span> <span class="n">ele1</span> <span class="n">xlt</span> <span class="n">ylt</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#21487;&#20197;&#23545;&#20840;&#31216;&#37327;&#21270;&#21464;&#37327;&#20351;&#29992;&#20219;&#20309;&#25105;&#20204;&#24819;&#29992;&#30340;&#21517;&#23383;&#65307;
&#24182;&#38750;&#19968;&#23450;&#35201;&#26159; <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">&#949;</span></code>.
&#27880;&#24847;&#25105;&#20204;&#24517;&#39035;&#24341;&#20837;&#21464;&#37327;&#65292;&#21363;&#20351;&#23427;&#20204;&#34987;&#26631;&#35760;&#20026;&#38544;&#24335;&#30340;&#65306;
&#35753;&#23427;&#20204;&#38544;&#21435;&#30340;&#24847;&#24605;&#26159;&#24403;&#25105;&#20204; <em>&#20351;&#29992;</em> <code class="docutils literal notranslate"><span class="pre">my_lemma</span></code> &#20889;&#19968;&#20010;&#34920;&#36798;&#24335;&#26102;&#19981;&#20889;&#23427;&#20204;&#65292;
&#20294;&#23427;&#20204;&#20173;&#28982;&#26159;&#25105;&#20204;&#35201;&#35777;&#26126;&#30340;&#35821;&#21477;&#30340;&#37325;&#35201;&#32452;&#25104;&#37096;&#20998;&#12290;
&#22312; <code class="docutils literal notranslate"><span class="pre">intro</span></code> &#21629;&#20196;&#20043;&#21518;&#65292;
&#22914;&#26524;&#25105;&#20204;&#22312;&#20882;&#21495; <em>&#20043;&#21069;</em> &#21015;&#20986;&#25152;&#26377;&#21464;&#37327;&#21644;&#20551;&#35774;&#65292;&#30446;&#26631;&#23601;&#20250;&#21644;&#24320;&#22987;&#26102;&#19968;&#26679;&#65292;
&#23601;&#20687;&#25105;&#20204;&#22312;&#19978;&#19968;&#33410;&#20013;&#20570;&#30340;&#37027;&#26679;&#12290;
&#31245;&#21518;&#65292;&#25105;&#20204;&#23558;&#30475;&#21040;&#20026;&#20160;&#20040;&#26377;&#26102;&#20505;&#26377;&#24517;&#35201;&#22312;&#35777;&#26126;&#24320;&#22987;&#20043;&#21518;&#24341;&#20837;&#21464;&#37327;&#21644;&#20551;&#35774;&#12290;</p>
<p>&#20026;&#20102;&#24110;&#20320;&#35777;&#26126;&#36825;&#20010;&#24341;&#29702;&#65292;&#25105;&#20204;&#20250;&#32473;&#20320;&#24320;&#20010;&#22836;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">my_lemma4</span> <span class="o">:</span>
    <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">&#949;</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">},</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="n">&#949;</span> <span class="bp">&#8804;</span> <span class="mi">1</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">x</span> <span class="n">y</span> <span class="n">&#949;</span> <span class="n">epos</span> <span class="n">ele1</span> <span class="n">xlt</span> <span class="n">ylt</span>
  <span class="k">calc</span>
    <span class="bp">|</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">=</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">*</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="o">:=</span> <span class="gr">sorry</span>
    <span class="n">_</span> <span class="bp">&#8804;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">*</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="gr">sorry</span>
    <span class="n">_</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="gr">sorry</span>
    <span class="n">_</span> <span class="bp">=</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#20351;&#29992;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">abs_mul</span></code>, <code class="docutils literal notranslate"><span class="pre">mul_le_mul</span></code>, <code class="docutils literal notranslate"><span class="pre">abs_nonneg</span></code>,
<code class="docutils literal notranslate"><span class="pre">mul_lt_mul_right</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">one_mul</span></code> &#23436;&#25104;&#35777;&#26126;&#12290;
&#35760;&#20303;&#20320;&#21487;&#20197;&#20351;&#29992;Ctrl-space&#34917;&#20840;&#65288;&#25110;&#32773;&#65292;&#22312;Mac&#20013;&#65292;Cmd-space&#34917;&#20840;&#65289;&#25214;&#21040;&#20687;&#36825;&#26679;&#30340;&#23450;&#29702;&#12290;
&#20063;&#35760;&#20303;&#20320;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">.mp</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">.mpr</span></code>
&#25110;&#32773; <code class="docutils literal notranslate"><span class="pre">.1</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">.2</span></code> &#26469;&#25552;&#21462;&#19968;&#20010;&#24403;&#19988;&#20165;&#24403;&#35821;&#21477;&#30340;&#20004;&#20010;&#26041;&#21521;&#12290;</p>
<p>&#20840;&#31216;&#37327;&#35789;&#36890;&#24120;&#38544;&#34255;&#22312;&#23450;&#20041;&#20013;&#65292;
Lean &#20250;&#22312;&#24517;&#35201;&#26102;&#23637;&#24320;&#23450;&#20041;&#20197;&#26292;&#38706;&#23427;&#20204;&#12290;
&#20363;&#22914;&#65292;&#35753;&#25105;&#20204;&#23450;&#20041;&#20004;&#20010;&#35859;&#35789;&#65292;
<code class="docutils literal notranslate"><span class="pre">FnUb</span> <span class="pre">f</span> <span class="pre">a</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">FnLb</span> <span class="pre">f</span> <span class="pre">a</span></code>,
&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#26159;&#19968;&#20010;&#20174;&#23454;&#25968;&#21040;&#23454;&#25968;&#30340;&#20989;&#25968;&#65292;
&#32780; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#26159;&#19968;&#20010;&#23454;&#25968;&#12290;
&#31532;&#19968;&#20010;&#35859;&#35789;&#26159;&#35828; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#30340;&#20540;&#30340;&#19968;&#20010;&#19978;&#30028;&#65292;
&#32780;&#31532;&#20108;&#20010;&#26159;&#35828; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#30340;&#20540;&#30340;&#19968;&#20010;&#19979;&#30028;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">FnUb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">a</span>

<span class="kd">def</span> <span class="n">FnLb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</div>
<p id="index-1">&#22312;&#19979;&#19968;&#20010;&#20363;&#23376;&#20013;&#65292; <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">x</span> <span class="pre">&#8614;</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">g</span> <span class="pre">x</span></code> &#26159;&#25226; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#26144;&#23556;&#21040; `` f x + g x`` &#30340;&#20989;&#25968;&#12290;
&#20174;&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">g</span> <span class="pre">x</span></code> &#21040;&#36825;&#20010;&#20989;&#25968;&#65292;
&#22312;&#31867;&#22411;&#35770;&#20013;&#31216;&#20026;lambda&#25277;&#35937;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">hfa</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hgb</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">x</span>
  <span class="n">dsimp</span>
  <span class="n">apply</span> <span class="n">add_le_add</span>
  <span class="n">apply</span> <span class="n">hfa</span>
  <span class="n">apply</span> <span class="n">hgb</span>
</pre></div>
</div>
<p id="index-2">&#25226; <code class="docutils literal notranslate"><span class="pre">intro</span></code> &#24212;&#29992;&#20110;&#30446;&#26631; <code class="docutils literal notranslate"><span class="pre">FnUb</span> <span class="pre">(fun</span> <span class="pre">x</span> <span class="pre">&#8614;</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">g</span> <span class="pre">x)</span> <span class="pre">(a</span> <span class="pre">+</span> <span class="pre">b)</span></code>
&#36843;&#20351; Lean &#23637;&#24320; <code class="docutils literal notranslate"><span class="pre">FnUb</span></code> &#30340;&#23450;&#20041;&#24182;&#24341;&#20837; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#20316;&#20026;&#20840;&#31216;&#37327;&#35789;&#12290;
&#27492;&#26102;&#30446;&#26631;&#20026; <code class="docutils literal notranslate"><span class="pre">(fun</span> <span class="pre">(x</span> <span class="pre">:</span> <span class="pre">&#8477;)</span> <span class="pre">&#8614;</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">g</span> <span class="pre">x)</span> <span class="pre">x</span> <span class="pre">&#8804;</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code>.
&#20294;&#22312; <code class="docutils literal notranslate"><span class="pre">(fun</span> <span class="pre">x</span> <span class="pre">&#8614;</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">g</span> <span class="pre">x)</span></code> &#19978;&#21462;&#20540; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#30340;&#32467;&#26524;&#24212;&#35813;&#26159; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">g</span> <span class="pre">x</span></code>,
&#32780; <code class="docutils literal notranslate"><span class="pre">dsimp</span></code> &#21629;&#20196;&#25191;&#34892;&#20102;&#36825;&#20010;&#31616;&#21270;&#12290;
&#65288;&#20854;&#20013; &#8220;d&#8221; &#26159;&#25351; &#8220;&#23450;&#20041;&#24615;&#30340;&#8221;&#65289;
&#20320;&#21487;&#20197;&#21024;&#38500;&#36825;&#20010;&#21629;&#20196;&#65292;&#35777;&#26126;&#20173;&#28982;&#26377;&#25928;&#65307;
Lean&#23558;&#19981;&#24471;&#19981;&#25191;&#34892;&#37027;&#20010;&#21270;&#31616;&#65292;&#25165;&#33021;&#20351;&#19979;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">apply</span></code> &#26377;&#24847;&#20041;&#12290;
<code class="docutils literal notranslate"><span class="pre">dsimp</span></code> &#21629;&#20196;&#21482;&#26159;&#35753;&#30446;&#26631;&#26356;&#21487;&#35835;&#65292;&#24182;&#24110;&#25105;&#20204;&#24324;&#28165;&#26970;&#19979;&#19968;&#27493;&#35201;&#20570;&#20160;&#20040;&#12290;
&#21478;&#19968;&#31181;&#36873;&#25321;&#26159;&#36890;&#36807;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">change</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">g</span> <span class="pre">x</span> <span class="pre">&#8804;</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code>
&#26469;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">change</span></code> &#31574;&#30053;&#12290;
&#36825;&#26377;&#21161;&#20110;&#25552;&#39640;&#35777;&#26126;&#30340;&#21487;&#35835;&#24615;&#65292;
&#24182;&#35753;&#20320;&#23545;&#30446;&#26631;&#30340;&#36716;&#25442;&#26041;&#24335;&#26377;&#26356;&#22810;&#30340;&#25511;&#21046;&#12290;</p>
<p>&#35777;&#26126;&#30340;&#20854;&#20313;&#37096;&#20998;&#37117;&#26159;&#20363;&#34892;&#20844;&#20107;&#12290;
&#26368;&#21518;&#20004;&#26465; <code class="docutils literal notranslate"><span class="pre">apply</span></code> &#21629;&#20196;&#36843;&#20351; Lean &#23637;&#24320;&#20551;&#35774;&#20013; <code class="docutils literal notranslate"><span class="pre">FnUb</span></code> &#30340;&#23450;&#20041;&#12290;
&#35831;&#23581;&#35797;&#36827;&#34892;&#31867;&#20284;&#30340;&#35777;&#26126;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">hfa</span> <span class="o">:</span> <span class="n">FnLb</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hgb</span> <span class="o">:</span> <span class="n">FnLb</span> <span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnLb</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">nnf</span> <span class="o">:</span> <span class="n">FnLb</span> <span class="n">f</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">nng</span> <span class="o">:</span> <span class="n">FnLb</span> <span class="n">g</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnLb</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span> <span class="o">:=</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">hfa</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hgb</span> <span class="o">:</span> <span class="n">FnUb</span> <span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">nng</span> <span class="o">:</span> <span class="n">FnLb</span> <span class="n">g</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">nna</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">FnUb</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#34429;&#28982;&#25105;&#20204;&#24050;&#23545;&#20174;&#23454;&#25968;&#21040;&#23454;&#25968;&#30340;&#20989;&#25968;&#23450;&#20041;&#20102; <code class="docutils literal notranslate"><span class="pre">FnUb</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">FnLb</span></code>,
&#20320;&#24212;&#35813;&#35748;&#35782;&#21040;&#65292;&#36825;&#20123;&#23450;&#20041;&#21644;&#35777;&#26126;&#36828;&#27604;&#36825;&#26356;&#19968;&#33324;&#12290;
&#36825;&#23450;&#20041;&#23545;&#20219;&#20309;&#20004;&#20010;&#31867;&#22411;&#20043;&#38388;&#30340;&#20989;&#25968;&#26377;&#24847;&#20041;&#65292;&#21482;&#35201;&#20540;&#22495;&#19978;&#26377;&#24207;&#30340;&#27010;&#24565;&#12290;
&#26816;&#26597;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">add_le_add</span></code> &#30340;&#31867;&#22411;&#65292;
&#21457;&#29616;&#23427;&#23545;&#20219;&#20309;&#26159;&#8221;&#26377;&#24207;&#21152;&#27861;&#20132;&#25442;&#24186;&#21322;&#32676;&#8221;&#30340;&#32467;&#26500;&#25104;&#31435;&#65307;
&#36825;&#20010;&#21517;&#35789;&#30340;&#35814;&#32454;&#21547;&#20041;&#30446;&#21069;&#26080;&#20851;&#32039;&#35201;&#65292;
&#20294;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#33258;&#28982;&#25968;&#12289;&#25972;&#25968;&#12289;&#26377;&#29702;&#25968;&#21644;&#23454;&#25968;&#37117;&#23646;&#20110;&#36825;&#31181;&#24773;&#20917;&#12290;
&#22240;&#27492;&#65292;&#22914;&#26524;&#25105;&#20204;&#22312;&#22914;&#27492;&#30340;&#24191;&#20041;&#27700;&#24179;&#19978;&#35777;&#26126;&#20102;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">fnUb_add</span></code>,
&#37027;&#20040;&#23427;&#23558;&#21487;&#29992;&#20110;&#25152;&#26377;&#36825;&#20123;&#23454;&#20363;&#20013;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">OrderedCancelAddCommMonoid</span> <span class="n">R</span><span class="o">]</span>

<span class="k">#check</span> <span class="n">add_le_add</span>

<span class="kd">def</span> <span class="n">FnUb&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">a</span>

<span class="kd">theorem</span> <span class="n">fnUb_add</span> <span class="o">{</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">R</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hfa</span> <span class="o">:</span> <span class="n">FnUb&#39;</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hgb</span> <span class="o">:</span> <span class="n">FnUb&#39;</span> <span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">FnUb&#39;</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">add_le_add</span> <span class="o">(</span><span class="n">hfa</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">hgb</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</div>
<p>&#20320;&#22312;
Section <a class="reference internal" href="C02_Basics.html#proving-identities-in-algebraic-structures"><span class="std std-numref">Section 2.2</span></a> &#20013;&#24050;&#32463;&#30475;&#21040;&#36807;&#20687;&#36825;&#26679;&#30340;&#26041;&#25324;&#21495;&#65292;
&#20294;&#25105;&#20204;&#20173;&#26410;&#35299;&#37322;&#23427;&#20204;&#26159;&#20160;&#20040;&#21547;&#20041;&#12290;
&#20026;&#20102;&#20855;&#20307;&#24615;&#65292;&#22312;&#25105;&#20204;&#30340;&#22823;&#22810;&#25968;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#19987;&#27880;&#20110;&#23454;&#25968;&#65292;
&#20294;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;Mathlib&#21253;&#21547;&#19968;&#20123;&#20855;&#26377;&#24456;&#39640;&#36890;&#29992;&#24615;&#30340;&#23450;&#20041;&#21644;&#23450;&#29702;&#12290;</p>
<p id="index-3">&#20877;&#20030;&#19968;&#20010;&#38544;&#34255;&#20840;&#31216;&#37327;&#35789;&#30340;&#20363;&#23376;&#65292;
Mathlib &#23450;&#20041;&#20102;&#19968;&#20010;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">Monotone</span></code>,
&#34920;&#31034;&#20989;&#25968;&#30456;&#23545;&#20110;&#21442;&#25968;&#26159;&#38750;&#36882;&#20943;&#30340;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">},</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="n">b</span> <span class="o">:=</span>
  <span class="bp">@</span><span class="n">h</span>
</pre></div>
</div>
<p>&#24615;&#36136; <code class="docutils literal notranslate"><span class="pre">Monotone</span> <span class="pre">f</span></code> &#30340;&#23450;&#20041;&#21644;&#20882;&#21495;&#21518;&#30340;&#34920;&#36798;&#24335;&#31934;&#30830;&#30456;&#21516;&#12290;
&#25105;&#20204;&#38656;&#35201;&#22312; <code class="docutils literal notranslate"><span class="pre">h</span></code> &#20043;&#21069;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> &#31526;&#21495;&#65292;
&#22240;&#20026;&#22914;&#26524;&#25105;&#20204;&#19981;&#36825;&#26679;&#20570;&#65292;
Lean &#20250;&#23637;&#24320; <code class="docutils literal notranslate"><span class="pre">h</span></code> &#30340;&#38544;&#21547;&#21442;&#25968;&#24182;&#25554;&#20837;&#21344;&#20301;&#31526;&#12290;</p>
<p>&#35777;&#26126;&#26377;&#20851;&#21333;&#35843;&#24615;&#30340;&#35821;&#21477;&#38656;&#35201;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">intro</span></code> &#24341;&#20837;&#20004;&#20010;&#21464;&#37327;&#65292;&#20363;&#22914; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">b</span></code>, &#20197;&#21450;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&#8804;</span> <span class="pre">b</span></code>.
&#35201;&#20351;&#29992;&#21333;&#35843;&#24615;&#20551;&#35774;&#65292;&#21487;&#20197;&#23558;&#20854;&#24212;&#29992;&#20110;&#21512;&#36866;&#30340;&#21442;&#25968;&#21644;&#20551;&#35774;&#65292;&#28982;&#21518;&#23558;&#24471;&#21040;&#30340;&#34920;&#36798;&#24335;&#24212;&#29992;&#20110;&#30446;&#26631;&#12290;
&#25110;&#32773;&#65292;&#20320;&#20063;&#21487;&#20197;&#23558;&#23427;&#24212;&#29992;&#21040;&#30446;&#26631;&#19978;&#65292;&#28982;&#21518;&#35753; Lean &#36890;&#36807;&#23558;&#21097;&#20313;&#30340;&#20551;&#35774;&#26174;&#31034;&#20026;&#26032;&#30340;&#23376;&#30446;&#26631;&#26469;&#24110;&#21161;&#20320;&#21521;&#21518;&#24037;&#20316;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">mf</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">mg</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">a</span> <span class="n">b</span> <span class="n">aleb</span>
  <span class="n">apply</span> <span class="n">add_le_add</span>
  <span class="n">apply</span> <span class="n">mf</span> <span class="n">aleb</span>
  <span class="n">apply</span> <span class="n">mg</span> <span class="n">aleb</span>
</pre></div>
</div>
<p>&#24403;&#19968;&#20010;&#35777;&#26126;&#22914;&#27492;&#31616;&#30701;&#26102;&#65292;&#32473;&#20986;&#19968;&#20010;&#35777;&#26126;&#39033;&#24448;&#24448;&#26356;&#26041;&#20415;&#12290;
&#25551;&#36848;&#19968;&#20010;&#20020;&#26102;&#24341;&#20837;&#23545;&#35937;
<code class="docutils literal notranslate"><span class="pre">a</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">b</span></code> &#20197;&#21450;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">aleb</span></code> &#30340;&#35777;&#26126;&#26102;&#65292;
Lean &#20351;&#29992;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">aleb</span> <span class="pre">&#8614;</span> <span class="pre">...</span></code>.
&#36825;&#31867;&#20284;&#20110;&#29992; <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">x</span> <span class="pre">&#8614;</span> <span class="pre">x^2</span></code> &#36825;&#26679;&#30340;&#34920;&#36798;&#24335;&#26469;&#25551;&#36848;&#19968;&#20010;&#20989;&#25968;&#26102;&#65292;
&#20808;&#26242;&#26102;&#21629;&#21517;&#19968;&#20010;&#23545;&#35937; <code class="docutils literal notranslate"><span class="pre">x</span></code>, &#28982;&#21518;&#29992;&#23427;&#26469;&#25551;&#36848;&#20989;&#25968;&#30340;&#20540;&#12290;
&#22240;&#27492;&#65292;&#19978;&#19968;&#20010;&#35777;&#26126;&#20013;&#30340; <code class="docutils literal notranslate"><span class="pre">intro</span></code> &#21629;&#20196;
&#23545;&#24212;&#20110;&#19979;&#19968;&#20010;&#35777;&#26126;&#39033;&#20013;&#30340; lambda &#25277;&#35937;&#12290;
<code class="docutils literal notranslate"><span class="pre">apply</span></code> &#21629;&#20196;&#21017;&#23545;&#24212;&#20110;&#26500;&#24314;&#23450;&#29702;&#23545;&#20854;&#21442;&#25968;&#30340;&#24212;&#29992;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">mf</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">mg</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="k">fun</span> <span class="n">a</span> <span class="n">b</span> <span class="n">aleb</span> <span class="bp">&#8614;</span> <span class="n">add_le_add</span> <span class="o">(</span><span class="n">mf</span> <span class="n">aleb</span><span class="o">)</span> <span class="o">(</span><span class="n">mg</span> <span class="n">aleb</span><span class="o">)</span>
</pre></div>
</div>
<p>&#36825;&#37324;&#26377;&#19968;&#20010;&#26377;&#29992;&#30340;&#23567;&#31373;&#38376;&#65306;&#22914;&#26524;&#22312;&#24320;&#22987;&#32534;&#20889;&#35777;&#26126;&#39033; <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">aleb</span> <span class="pre">&#8614;</span> <span class="pre">_</span></code> &#26102;&#65292;
&#22312;&#34920;&#36798;&#24335;&#30340;&#20854;&#20313;&#37096;&#20998;&#20351;&#29992;&#19979;&#21010;&#32447;&#65292;
Lean &#23601;&#20250;&#25552;&#31034;&#38169;&#35823;&#65292;&#34920;&#26126;&#23427;&#26080;&#27861;&#29468;&#27979;&#35813;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;
&#22914;&#26524;&#20320;&#26816;&#26597;VS Code&#20013;&#30340; Lean &#30446;&#26631;&#31383;&#21475;&#25110;&#25226;&#40736;&#26631;&#24748;&#20572;&#22312;&#26631;&#30528;&#27874;&#28010;&#32447;&#30340;&#38169;&#35823;&#26631;&#35782;&#31526;&#19978;&#65292;
Lean &#20250;&#21521;&#20320;&#26174;&#31034;&#21097;&#20313;&#30340;&#34920;&#36798;&#24335;&#38656;&#35201;&#35299;&#20915;&#30340;&#30446;&#26631;&#12290;</p>
<p>&#23581;&#35797;&#35777;&#26126;&#23427;&#20204;&#65292;&#21487;&#20197;&#20351;&#29992;&#31574;&#30053;&#25110;&#35777;&#26126;&#39033;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">mf</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">nnc</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">mf</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">mg</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#36825;&#37324;&#26159;&#21478;&#19968;&#20123;&#20363;&#23376;&#12290;
&#19968;&#20010;&#20174; <span class="math notranslate nohighlight">\(\Bbb R\)</span> &#21040; <span class="math notranslate nohighlight">\(\Bbb R\)</span> &#30340;&#20989;&#25968; <span class="math notranslate nohighlight">\(f\)</span>
&#31216;&#20026; <em>&#20598;&#20989;&#25968;</em>&#65292;&#22914;&#26524;&#23545;&#27599;&#20010; <span class="math notranslate nohighlight">\(x\)</span>, &#26377; <span class="math notranslate nohighlight">\(f(-x) = f(x)\)</span>,
&#31216;&#20026; <em>&#22855;&#20989;&#25968;</em>&#65292;&#22914;&#26524;&#23545;&#27599;&#20010; <span class="math notranslate nohighlight">\(x\)</span>, &#26377; <span class="math notranslate nohighlight">\(f(-x) = -f(x)\)</span>.
&#19979;&#38754;&#30340;&#20363;&#23376;&#24418;&#24335;&#21270;&#22320;&#23450;&#20041;&#20102;&#36825;&#20004;&#20010;&#27010;&#24565;&#65292;&#24182;&#30830;&#31435;&#20102;&#20851;&#20110;&#23427;&#20204;&#30340;&#19968;&#20010;&#20107;&#23454;&#12290;
&#20320;&#21487;&#20197;&#23436;&#25104;&#20854;&#20182;&#20107;&#23454;&#30340;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">FnEven</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">FnOdd</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">f</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ef</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">eg</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">x</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">rfl</span>
    <span class="n">_</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="n">g</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">ef</span><span class="o">,</span> <span class="n">eg</span><span class="o">]</span>


<span class="kd">example</span> <span class="o">(</span><span class="n">of</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">og</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ef</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">og</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ef</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">og</span> <span class="o">:</span> <span class="n">FnOdd</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnEven</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p id="index-4">&#36890;&#36807;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">dsimp</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">change</span></code> &#28040;&#38500;lambda&#25277;&#35937;&#65292;
&#21487;&#20197;&#32553;&#30701;&#31532;&#19968;&#20010;&#35777;&#26126;&#12290;
&#20294;&#20320;&#21487;&#20197;&#39564;&#35777;&#65292;&#38500;&#38750;&#25105;&#20204;&#20934;&#30830;&#22320;&#28040;&#38500;lambda&#25277;&#35937;&#65292;&#21542;&#21017;&#25509;&#19979;&#26469;&#30340; <code class="docutils literal notranslate"><span class="pre">rw</span></code> &#19981;&#20250;&#29983;&#25928;&#65292;
&#22240;&#20026;&#27492;&#26102;&#23427;&#26080;&#27861;&#22312;&#34920;&#36798;&#24335;&#20013;&#25214;&#21040;&#26679;&#24335; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">x</span></code>.
&#21644;&#20854;&#20182;&#19968;&#20123;&#31574;&#30053;&#19981;&#21516;&#65292; <code class="docutils literal notranslate"><span class="pre">rw</span></code> &#20316;&#29992;&#20110;&#35821;&#27861;&#23618;&#27425;&#65292;
&#23427;&#19981;&#20250;&#20026;&#20320;&#23637;&#24320;&#23450;&#20041;&#25110;&#24212;&#29992;&#36824;&#21407;&#65288;&#23427;&#26377;&#19968;&#20010;&#21464;&#31181;&#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">erw</span></code>, &#22312;&#36825;&#20010;&#26041;&#21521;&#19978;&#20250;&#21162;&#21147;&#19968;&#28857;&#65292;&#20294;&#20063;&#19981;&#20250;&#21162;&#21147;&#22826;&#22810;&#65289;&#12290;</p>
<p>&#21040;&#22788;&#37117;&#33021;&#25214;&#21040;&#38544;&#24335;&#20840;&#31216;&#37327;&#35789;&#65292;
&#21482;&#35201;&#20320;&#30693;&#36947;&#22914;&#20309;&#21457;&#29616;&#23427;&#20204;&#12290;</p>
<p>Mathlib &#21253;&#21547;&#19968;&#20010;&#29992;&#20110;&#25805;&#20316;&#38598;&#21512;&#30340;&#20248;&#31168;&#30340;&#24211;&#12290;&#22238;&#24819;&#19968;&#19979;&#65292;Lean &#24182;&#19981;&#20351;&#29992;&#22522;&#20110;&#38598;&#21512;&#35770;&#30340;&#22522;&#30784;&#65292;&#22240;&#27492;&#22312;&#36825;&#37324;&#65292;&#38598;&#21512;&#19968;&#35789;&#20855;&#26377;&#26222;&#36890;&#21547;&#20041;&#65292;&#21363;&#26576;&#20010;&#32473;&#23450;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#25968;&#23398;&#23545;&#35937;&#30340;&#27719;&#38598;&#12290;
&#22914;&#26524; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#20855;&#26377;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, &#32780; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#20855;&#26377;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">&#945;</span></code>, &#21017; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code> &#26159;&#19968;&#20010;&#21629;&#39064;&#65292;
&#23427;&#26029;&#35328; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#19968;&#20010;&#20803;&#32032;&#12290;&#33509; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#20855;&#26377;&#21478;&#19968;&#20010;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> &#21017;&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code> &#26080;&#24847;&#20041;&#12290;&#36825;&#37324; &#8220;&#26080;&#24847;&#20041;&#8221; &#30340;&#21547;&#20041;&#26159; &#8220;&#27809;&#26377;&#31867;&#22411;&#22240;&#27492; Lean &#19981;&#35748;&#21487;&#23427;&#26159;&#19968;&#20010;&#33391;&#22909;&#24418;&#24335;&#30340;&#35821;&#21477;&#8221;&#12290;
&#36825;&#19982; Zermelo-Fraenkel &#38598;&#21512;&#35770;&#19981;&#21516;&#65292;
&#20363;&#22914;&#20854;&#20013;&#23545;&#20110;&#27599;&#20010;&#25968;&#23398;&#23545;&#35937; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">a&#8712;b</span></code> &#37117;&#26159;&#33391;&#22909;&#24418;&#24335;&#30340;&#35821;&#21477;&#12290;
&#20363;&#22914;&#65292; <code class="docutils literal notranslate"><span class="pre">sin</span> <span class="pre">&#8712;</span> <span class="pre">cos</span></code> &#26159; ZF &#20013;&#19968;&#20010;&#26684;&#24335;&#33391;&#22909;&#30340;&#35821;&#21477;&#12290;
&#38598;&#21512;&#35770;&#22522;&#30784;&#30340;&#36825;&#19968;&#32570;&#38519;&#26159;&#35777;&#26126;&#21161;&#25163;&#20013;&#19981;&#20351;&#29992;&#23427;&#30340;&#19968;&#20010;&#37325;&#35201;&#21407;&#22240;&#65292;&#22240;&#20026;&#35777;&#26126;&#21161;&#25163;&#30340;&#30446;&#30340;&#26159;&#24110;&#21161;&#25105;&#20204;&#26816;&#20986;&#26080;&#24847;&#20041;&#30340;&#34920;&#36798;&#24335;&#12290;&#22312; Lean &#20013;&#65292; <code class="docutils literal notranslate"><span class="pre">sin</span></code> &#20855;&#26377;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#8477;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;</span></code>, &#32780; <code class="docutils literal notranslate"><span class="pre">cos</span></code> &#20855;&#26377;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#8477;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;</span></code>,
&#23427;&#19981;&#31561;&#20110; <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">(&#8477;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;)</span></code>, &#21363;&#20351;&#22312;&#23637;&#24320;&#23450;&#20041;&#20197;&#21518;&#20063;&#19981;&#30456;&#31561;&#65292;&#22240;&#27492;&#35821;&#21477; <code class="docutils literal notranslate"><span class="pre">sin</span> <span class="pre">&#8712;</span> <span class="pre">cos</span></code> &#26080;&#24847;&#20041;&#12290;
&#25105;&#20204;&#36824;&#21487;&#20197;&#21033;&#29992; Lean &#26469;&#30740;&#31350;&#38598;&#21512;&#35770;&#26412;&#36523;&#12290;
&#20363;&#22914;&#65292;&#36830;&#32493;&#32479;&#20551;&#35774;&#19982; Zermelo-Fraenkel &#20844;&#29702;&#30340;&#29420;&#31435;&#24615;&#23601;&#22312; Lean &#20013;&#24471;&#21040;&#20102;&#24418;&#24335;&#21270;&#12290;
&#20294;&#36825;&#31181;&#38598;&#21512;&#35770;&#30340;&#20803;&#29702;&#35770;&#23436;&#20840;&#36229;&#20986;&#20102;&#26412;&#20070;&#30340;&#33539;&#22260;&#12290;</p>
<p>&#33509; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">t</span></code> &#20855;&#26377;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">&#945;</span></code>,
&#37027;&#20040;&#23376;&#38598;&#20851;&#31995; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8838;</span> <span class="pre">t</span></code> &#34987;&#23450;&#20041;&#20026;
<code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">{x</span> <span class="pre">:</span> <span class="pre">&#945;},</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8594;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t</span></code>.
&#37327;&#35789;&#20013;&#30340;&#21464;&#37327;&#34987;&#26631;&#35760;&#20026;&#38544;&#24335;&#65292;
&#22240;&#27492;&#32473;&#20986; <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">s</span> <span class="pre">&#8838;</span> <span class="pre">t</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">h'</span> <span class="pre">:</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code>,
&#25105;&#20204;&#21487;&#20197;&#25226; <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">h'</span></code> &#20316;&#20026; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t</span></code> &#30340;&#35777;&#26126;&#12290;
&#19979;&#38754;&#30340;&#20363;&#23376;&#25552;&#20379;&#20102;&#19968;&#20010;&#31574;&#30053;&#35777;&#26126;&#21644;&#19968;&#20010;&#35777;&#26126;&#39033;&#65292;
&#35777;&#26126;&#20102;&#23376;&#38598;&#20851;&#31995;&#30340;&#21453;&#36523;&#24615;&#65292;
&#24182;&#35201;&#27714;&#20320;&#23545;&#20256;&#36882;&#24615;&#20570;&#21516;&#26679;&#30340;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">Set</span> <span class="n">&#945;</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">x</span> <span class="n">xs</span>
  <span class="n">exact</span> <span class="n">xs</span>

<span class="kd">theorem</span> <span class="n">Subset.refl</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">s</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">x</span> <span class="n">xs</span> <span class="bp">&#8614;</span> <span class="n">xs</span>

<span class="kd">theorem</span> <span class="n">Subset.trans</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&#8838;</span> <span class="n">s</span> <span class="bp">&#8594;</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">t</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="bp">&#8838;</span> <span class="n">t</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#23601;&#20687;&#25105;&#20204;&#23545;&#20989;&#25968;&#23450;&#20041;&#20102; <code class="docutils literal notranslate"><span class="pre">FnUb</span></code> &#19968;&#26679;&#65292;
&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#26159;&#19968;&#20010;&#30001;&#26576;&#31867;&#22411;&#30340;&#20803;&#32032;&#32452;&#25104;&#30340;&#38598;&#21512;&#65292;&#19988;&#23427;&#20855;&#26377;&#19968;&#20010;&#19982;&#20043;&#20851;&#32852;&#30340;&#24207;&#12290;
&#25105;&#20204;&#21487;&#20197;&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">SetUb</span> <span class="pre">s</span> <span class="pre">a</span></code>, &#24847;&#20026; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#26159;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#19968;&#20010;&#19978;&#30028;&#12290;
&#22312;&#19979;&#19968;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#35201;&#27714;&#20320;&#35777;&#26126;&#65292;
&#22914;&#26524; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#19968;&#20010;&#19978;&#30028;&#65292;&#19988; <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&#8804;</span> <span class="pre">b</span></code>,
&#21017; <code class="docutils literal notranslate"><span class="pre">b</span></code> &#20063;&#26159; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#19968;&#20010;&#19978;&#30028;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">PartialOrder</span> <span class="n">&#945;</span><span class="o">]</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Set</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">SetUb</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Set</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">a</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">SetUb</span> <span class="n">s</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">SetUb</span> <span class="n">s</span> <span class="n">b</span> <span class="o">:=</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p id="index-5">&#26368;&#21518;&#65292;&#25105;&#20204;&#20197;&#19968;&#20010;&#37325;&#35201;&#30340;&#20363;&#23376;&#26469;&#32467;&#26463;&#26412;&#33410;&#12290;
&#20989;&#25968; <span class="math notranslate nohighlight">\(f\)</span> &#31216;&#20026; <em>&#21333;&#23556;</em>, &#33509;&#23545;&#27599;&#20010; <span class="math notranslate nohighlight">\(x_1\)</span> &#21644; <span class="math notranslate nohighlight">\(x_2\)</span>,
&#22914;&#26524; <span class="math notranslate nohighlight">\(f(x_1) = f(x_2)\)</span>, &#37027;&#20040; <span class="math notranslate nohighlight">\(x_1 = x_2\)</span>.
Mathlib&#23450;&#20041;&#20102; <code class="docutils literal notranslate"><span class="pre">Function.Injective</span> <span class="pre">f</span></code>, &#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">x&#8321;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">x&#8322;</span></code> &#26159;&#38544;&#21547;&#30340;&#12290;
&#19979;&#19968;&#20010;&#20363;&#23376;&#34920;&#26126;&#65292;&#22312;&#23454;&#25968;&#19978;&#65292;&#20219;&#20309;&#30001;&#33258;&#21464;&#37327;&#21152;&#19978;&#38750;&#38646;&#24120;&#25968;&#24471;&#21040;&#30340;&#20989;&#25968;&#37117;&#26159;&#21333;&#23556;&#12290;
&#28982;&#21518;&#65292;&#25105;&#20204;&#35201;&#27714;&#24744;&#21033;&#29992;&#31034;&#20363;&#20013;&#30340;&#24341;&#29702;&#21517;&#31216;&#20316;&#20026;&#28789;&#24863;&#26469;&#28304;&#65292;
&#35777;&#26126;&#38750;&#38646;&#24120;&#25968;&#20056;&#27861;&#20063;&#26159;&#21333;&#23556;&#30340;&#12290;
&#35831;&#35760;&#20303;&#65292;&#22312;&#29468;&#20986;&#19968;&#20010;&#24341;&#29702;&#21517;&#31216;&#30340;&#24320;&#22836;&#21518;&#65292;&#24212;&#20351;&#29992; Ctrl-space &#34917;&#20840;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span> <span class="n">Function</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">Injective</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">x&#8321;</span> <span class="n">x&#8322;</span> <span class="n">h&#39;</span>
  <span class="n">exact</span> <span class="o">(</span><span class="n">add_left_inj</span> <span class="n">c</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="n">h&#39;</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">Injective</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>&#26368;&#21518;&#65292;&#35777;&#26126;&#20004;&#20010;&#21333;&#23556;&#20989;&#25968;&#30340;&#22797;&#21512;&#26159;&#21333;&#23556;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">&#946;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">&#947;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">&#946;</span> <span class="bp">&#8594;</span> <span class="n">&#947;</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">injg</span> <span class="o">:</span> <span class="n">Injective</span> <span class="n">g</span><span class="o">)</span> <span class="o">(</span><span class="n">injf</span> <span class="o">:</span> <span class="n">Injective</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">Injective</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="the-existential-quantifier">
<span id="id3"></span><h2><span class="section-number">3.2. </span>&#23384;&#22312;&#37327;&#35789;<a class="headerlink" href="#the-existential-quantifier" title="Link to this heading">&#61633;</a></h2>
<p>&#23384;&#22312;&#37327;&#35789;&#65292;&#22312;VS Code&#20013;&#21487;&#20197;&#29992; <code class="docutils literal notranslate"><span class="pre">\ex</span></code> &#36755;&#20837;&#65292;
&#29992;&#20110;&#34920;&#31034;&#30701;&#35821; &#8220;&#23384;&#22312;&#8221;&#12290;
Lean &#20013;&#30340;&#24418;&#24335;&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#8477;,</span> <span class="pre">2</span> <span class="pre">&lt;</span> <span class="pre">x</span> <span class="pre">&#8743;</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">3</span></code> &#26159;&#35828;&#23384;&#22312;&#19968;&#20010;&#20171;&#20110;2&#21040;3&#20043;&#38388;&#30340;&#23454;&#25968;&#12290;
&#65288;&#25105;&#20204;&#23558;&#22312; <a class="reference internal" href="#conjunction-and-biimplication"><span class="std std-numref">Section 3.4</span></a> &#25506;&#35752;&#21512;&#21462;&#31526;&#21495;&#12290;&#65289;
&#35777;&#26126;&#36825;&#31181;&#35821;&#21477;&#30340;&#20856;&#22411;&#26041;&#24335;&#26159;&#32473;&#20986;&#19968;&#20010;&#23454;&#25968;&#24182;&#35828;&#26126;&#23427;&#20855;&#26377;&#35821;&#21477;&#25351;&#20986;&#30340;&#24615;&#36136;&#12290;
&#25105;&#20204;&#21487;&#20197;&#29992; <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">/</span> <span class="pre">2</span></code> &#36755;&#20837;2.5&#36825;&#20010;&#25968;&#65292;&#25110;&#32773;&#65292;&#24403; Lean &#26080;&#27861;&#20174;&#19978;&#19979;&#25991;&#25512;&#26029;&#20986;&#25105;&#20204;&#24819;&#36755;&#20837;&#23454;&#25968;&#26102;&#65292;&#29992; <code class="docutils literal notranslate"><span class="pre">(5</span> <span class="pre">:</span> <span class="pre">&#8477;)</span> <span class="pre">/</span> <span class="pre">2</span></code> &#36755;&#20837;&#65292;&#23427;&#20855;&#26377;&#25152;&#38656;&#30340;&#24615;&#36136;&#65292;&#32780; <code class="docutils literal notranslate"><span class="pre">norm_num</span></code> &#31574;&#30053;&#21487;&#20197;&#35777;&#26126;&#23427;&#31526;&#21512;&#25551;&#36848;&#12290;</p>
<p id="index-6">&#25105;&#20204;&#26377;&#19968;&#20123;&#26041;&#24335;&#21487;&#20197;&#25226;&#20449;&#24687;&#32858;&#21512;&#22312;&#19968;&#36215;&#12290;
&#32473;&#23450;&#19968;&#20010;&#20197;&#23384;&#22312;&#37327;&#35789;&#24320;&#22836;&#30340;&#30446;&#26631;&#65292;
&#21017; <code class="docutils literal notranslate"><span class="pre">use</span></code> &#31574;&#30053;&#21487;&#29992;&#20110;&#25552;&#20379;&#23545;&#35937;&#65292;
&#30041;&#19979;&#35777;&#26126;&#20854;&#23646;&#24615;&#30340;&#30446;&#26631;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">use</span> <span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span>
  <span class="n">norm_num</span>
</pre></div>
</div>
<p>&#20320;&#19981;&#20165;&#21487;&#20197;&#32473; <code class="docutils literal notranslate"><span class="pre">use</span></code> &#31574;&#30053;&#25552;&#20379;&#25968;&#25454;&#65292;&#36824;&#21487;&#20197;&#25552;&#20379;&#35777;&#26126;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
  <span class="n">use</span> <span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span>
</pre></div>
</div>
<p>&#20107;&#23454;&#19978;&#65292; <code class="docutils literal notranslate"><span class="pre">use</span></code> &#31574;&#30053;&#21516;&#26679;&#33258;&#21160;&#22320;&#23581;&#35797;&#21487;&#29992;&#30340;&#20551;&#35774;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&#8743;</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
  <span class="n">use</span> <span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span>
</pre></div>
</div>
<p id="index-7">&#25110;&#32773;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992; Lean &#30340; <em>&#21311;&#21517;&#26500;&#36896;&#22120;</em> &#31526;&#21495;&#26469;&#26500;&#36896;&#28041;&#21450;&#23384;&#22312;&#37327;&#35789;&#30340;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&#8743;</span> <span class="o">(</span><span class="mi">5</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
  <span class="o">&#10216;</span><span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">,</span> <span class="n">h</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#27880;&#24847;&#21040;&#20854;&#20013;&#27809;&#26377; <code class="docutils literal notranslate"><span class="pre">by</span></code>; &#36825;&#37324;&#25105;&#20204;&#25552;&#20379;&#20102;&#31934;&#30830;&#30340;&#35777;&#26126;&#39033;&#12290;
&#24038;&#21491;&#23574;&#25324;&#21495;&#65292;&#21487;&#20197;&#20998;&#21035;&#29992; <code class="docutils literal notranslate"><span class="pre">\&lt;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">\&gt;</span></code> &#36755;&#20837;&#65292;
&#21578;&#35785; Lean &#20351;&#29992;&#20219;&#20309;&#23545;&#24403;&#21069;&#30446;&#26631;&#21512;&#36866;&#30340;&#26500;&#36896;&#26041;&#24335;&#25226;&#32473;&#23450;&#30340;&#25968;&#25454;&#32452;&#32455;&#36215;&#26469;&#12290;
&#25105;&#20204;&#21487;&#20197;&#22312;&#19981;&#38656;&#35201;&#39318;&#20808;&#36827;&#20837;&#31574;&#30053;&#27169;&#24335;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;&#36825;&#31181;&#31526;&#21495;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="o">:=</span>
  <span class="o">&#10216;</span><span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">,</span> <span class="kd">by</span> <span class="n">norm_num</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#25152;&#20197;&#25105;&#20204;&#29616;&#22312;&#30693;&#36947;&#22914;&#20309; <em>&#35777;&#26126;</em> &#19968;&#20010;&#23384;&#22312;&#35821;&#21477;&#12290;
&#20294;&#25105;&#20204;&#35201;&#22914;&#20309; <em>&#20351;&#29992;</em> &#23427;&#65311;
&#22914;&#26524;&#25105;&#20204;&#30693;&#36947;&#23384;&#22312;&#19968;&#20010;&#20855;&#26377;&#29305;&#23450;&#24615;&#36136;&#30340;&#23545;&#35937;&#65292;
&#25105;&#20204;&#23601;&#21487;&#20197;&#20026;&#20219;&#24847;&#19968;&#20010;&#23545;&#35937;&#21629;&#21517;&#24182;&#23545;&#20854;&#36827;&#34892;&#25512;&#29702;&#12290;
&#20363;&#22914;&#65292; &#22238;&#39038;&#19978;&#19968;&#33410;&#30340;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">FnUb</span> <span class="pre">f</span> <span class="pre">a</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">FnLb</span> <span class="pre">f</span> <span class="pre">a</span></code>,
&#23427;&#20204;&#20998;&#21035;&#26159;&#25351; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#30340;&#19968;&#20010;&#19978;&#30028;&#25110;&#19979;&#30028;&#12290;
&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#23384;&#22312;&#37327;&#35789;&#35828;&#26126; &#8220; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#26159;&#26377;&#30028;&#30340;&#8221;&#65292;&#32780;&#26080;&#38656;&#25351;&#23450;&#23427;&#30340;&#30028;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">FnUb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">a</span>

<span class="kd">def</span> <span class="n">FnLb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="n">x</span>

<span class="kd">def</span> <span class="n">FnHasUb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">&#8707;</span> <span class="n">a</span><span class="o">,</span> <span class="n">FnUb</span> <span class="n">f</span> <span class="n">a</span>

<span class="kd">def</span> <span class="n">FnHasLb</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">&#8707;</span> <span class="n">a</span><span class="o">,</span> <span class="n">FnLb</span> <span class="n">f</span> <span class="n">a</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#19978;&#19968;&#33410;&#30340;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">FnUb_add</span></code> &#35777;&#26126;&#33509; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">g</span></code> &#20855;&#26377;&#19978;&#30028;&#65292;
&#21017; <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">x</span> <span class="pre">&#8614;</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">g</span> <span class="pre">x</span></code> &#20063;&#26377;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ubf</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">ubg</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">ubf</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">ubfa</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">ubg</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="n">ubgb</span><span class="o">&#10217;</span>
  <span class="n">use</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span>
  <span class="n">apply</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span>
</pre></div>
</div>
<p id="index-8"><code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#31574;&#30053;&#35299;&#21253;&#20102;&#23384;&#22312;&#37327;&#35789;&#20013;&#30340;&#20449;&#24687;&#12290;
&#20687; <code class="docutils literal notranslate"><span class="pre">&#10216;a,</span> <span class="pre">ubfa&#10217;</span></code> &#36825;&#26679;&#65292;&#21644;&#21311;&#21517;&#26500;&#36896;&#22120;&#20351;&#29992;&#21516;&#26679;&#30340;&#23574;&#25324;&#21495;&#20070;&#20889;&#30340;&#35760;&#21495;&#65292;
&#31216;&#20026; <em>&#26679;&#24335;</em>&#65292;&#23427;&#20204;&#25551;&#36848;&#20102;&#25105;&#20204;&#22312;&#35299;&#21253;&#20027;&#21442;&#25968;&#26102;&#26399;&#26395;&#25214;&#21040;&#30340;&#20449;&#24687;&#12290;
&#32473;&#20986;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">ubf</span></code>, &#21363; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#23384;&#22312;&#19978;&#30028;&#65292;
<code class="docutils literal notranslate"><span class="pre">rcases</span> <span class="pre">ubf</span> <span class="pre">with</span> <span class="pre">&#10216;a,</span> <span class="pre">ubfa&#10217;</span></code> &#22312;&#19978;&#19979;&#25991;&#20013;&#28155;&#21152;&#19968;&#20010;&#26032;&#21464;&#37327; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#20316;&#20026;&#19978;&#30028;&#65292;
&#24182;&#28155;&#21152;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">ubfa</span></code>, &#21363;&#35813;&#21464;&#37327;&#26377;&#32473;&#23450;&#30340;&#24615;&#36136;&#12290;
&#30446;&#26631;&#27809;&#26377;&#21464;&#21270;&#65307;
<em>&#24050;</em> &#21464;&#21270;&#30340;&#26159;&#25105;&#20204;&#29616;&#22312;&#21487;&#20197;&#20351;&#29992;&#26032;&#23545;&#35937;&#21644;&#26032;&#20551;&#35774;&#26469;&#35777;&#26126;&#30446;&#26631;&#12290;
&#36825;&#26159;&#25968;&#23398;&#25512;&#29702;&#30340;&#19968;&#31181;&#24120;&#35268;&#26041;&#27861;&#65306;
&#25105;&#20204;&#35299;&#21253;&#23545;&#35937;&#65292;&#20854;&#23384;&#22312;&#24615;&#34987;&#19968;&#20123;&#20551;&#35774;&#26029;&#35328;&#25110;&#34164;&#21547;&#65292;
&#28982;&#21518;&#20351;&#29992;&#23427;&#35770;&#35777;&#20854;&#20182;&#19968;&#20123;&#19996;&#35199;&#30340;&#23384;&#22312;&#24615;&#12290;</p>
<p>&#35797;&#30528;&#20351;&#29992;&#36825;&#20010;&#26041;&#27861;&#26500;&#24314;&#19979;&#21015;&#20107;&#23454;&#12290;
&#20320;&#21487;&#33021;&#20250;&#21457;&#29616;&#65292;&#25226;&#19978;&#19968;&#33410;&#20013;&#30340;&#19968;&#20123;&#20363;&#23376;&#36716;&#25442;&#20026;&#20855;&#21517;&#23450;&#29702;&#26159;&#24456;&#26377;&#29992;&#30340;&#65292;
&#23601;&#20687;&#25105;&#20204;&#23545; <code class="docutils literal notranslate"><span class="pre">fn_ub_add</span></code> &#20570;&#30340;&#37027;&#26679;&#65292;
&#25110;&#32773;&#20320;&#20063;&#21487;&#20197;&#30452;&#25509;&#25226;&#37027;&#20123;&#35770;&#35777;&#25554;&#20837;&#21040;&#35777;&#26126;&#20013;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">lbf</span> <span class="o">:</span> <span class="n">FnHasLb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">lbg</span> <span class="o">:</span> <span class="n">FnHasLb</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasLb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">ubf</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&#8805;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p id="index-9"><code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#20013;&#30340; &#8220;r&#8221; &#34920;&#31034; &#8220;recursive&#65288;&#36882;&#24402;&#65289;&#8221;&#65292;
&#22240;&#20026;&#23427;&#20801;&#35768;&#25105;&#20204;&#20351;&#29992;&#20219;&#24847;&#22797;&#26434;&#30340;&#26679;&#24335;&#35299;&#21253;&#23884;&#22871;&#25968;&#25454;&#12290;
<code class="docutils literal notranslate"><span class="pre">rintro</span></code> &#31574;&#30053;&#26159; <code class="docutils literal notranslate"><span class="pre">intro</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#30340;&#32452;&#21512;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span> <span class="bp">&#8594;</span> <span class="n">FnHasUb</span> <span class="n">g</span> <span class="bp">&#8594;</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rintro</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">ubfa</span><span class="o">&#10217;</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="n">ubgb</span><span class="o">&#10217;</span>
  <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">,</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#20107;&#23454;&#19978;&#65292;Lean &#20063;&#25903;&#25345;&#34920;&#36798;&#24335;&#21644;&#35777;&#26126;&#39033;&#20013;&#30340;&#26679;&#24335;&#21305;&#37197;&#20989;&#25968;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span> <span class="bp">&#8594;</span> <span class="n">FnHasUb</span> <span class="n">g</span> <span class="bp">&#8594;</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="k">fun</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">ubfa</span><span class="o">&#10217;</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="n">ubgb</span><span class="o">&#10217;</span> <span class="bp">&#8614;</span> <span class="o">&#10216;</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">,</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#22312;&#20551;&#35774;&#20013;&#35299;&#21253;&#20449;&#24687;&#30340;&#20219;&#21153;&#38750;&#24120;&#37325;&#35201;&#65292;
&#20197;&#33267;&#20110; Lean &#21644; Mathlib &#25552;&#20379;&#20102;&#22810;&#31181;&#26041;&#24335;&#23454;&#26045;&#12290;
&#20363;&#22914;&#65292; <code class="docutils literal notranslate"><span class="pre">obtain</span></code> &#31574;&#30053;&#25552;&#20379;&#25552;&#31034;&#24615;&#35821;&#27861;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">ubf</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">ubg</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">obtain</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">ubfa</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="n">ubf</span>
  <span class="n">obtain</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="n">ubgb</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="n">ubg</span>
  <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">,</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#23558;&#31532;&#19968;&#26465; <code class="docutils literal notranslate"><span class="pre">obtain</span></code> &#25351;&#20196;&#30475;&#20316;&#26159;&#23558; <code class="docutils literal notranslate"><span class="pre">ubf</span></code> &#30340; &#8220;&#20869;&#23481;&#8221; &#19982;&#32473;&#23450;&#30340;&#27169;&#24335;&#21305;&#37197;&#65292;
&#24182;&#23558;&#25104;&#20998;&#36171;&#20540;&#32473;&#20855;&#21517;&#21464;&#37327;&#12290;
<code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">obtain</span></code> &#21487;&#20197;&#35828;&#26159;&#22312; <code class="docutils literal notranslate"><span class="pre">destruct</span></code> &#23427;&#20204;&#30340;&#21442;&#25968;&#65292;&#20294;&#26377;&#19968;&#28857;&#19981;&#21516;&#65292;
<code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#22312;&#23436;&#25104;&#21518;&#20250;&#28165;&#38500;&#19978;&#19979;&#25991;&#20013;&#30340; <code class="docutils literal notranslate"><span class="pre">ubf</span></code>, &#32780;&#22312; <code class="docutils literal notranslate"><span class="pre">obtain</span></code> &#21518;&#23427;&#20173;&#28982;&#23384;&#22312;&#12290;</p>
<p>Lean &#36824;&#25903;&#25345;&#19982;&#20854;&#20182;&#20989;&#25968;&#24335;&#32534;&#31243;&#35821;&#35328;&#31867;&#20284;&#30340;&#35821;&#27861;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">ubf</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">ubg</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">cases</span> <span class="n">ubf</span>
  <span class="n">case</span> <span class="n">intro</span> <span class="n">a</span> <span class="n">ubfa</span> <span class="bp">=&gt;</span>
    <span class="n">cases</span> <span class="n">ubg</span>
    <span class="n">case</span> <span class="n">intro</span> <span class="n">b</span> <span class="n">ubgb</span> <span class="bp">=&gt;</span>
      <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">,</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span><span class="o">&#10217;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ubf</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">ubg</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">cases</span> <span class="n">ubf</span>
  <span class="n">next</span> <span class="n">a</span> <span class="n">ubfa</span> <span class="bp">=&gt;</span>
    <span class="n">cases</span> <span class="n">ubg</span>
    <span class="n">next</span> <span class="n">b</span> <span class="n">ubgb</span> <span class="bp">=&gt;</span>
      <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">,</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span><span class="o">&#10217;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ubf</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">ubg</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">match</span> <span class="n">ubf</span><span class="o">,</span> <span class="n">ubg</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">ubfa</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="n">ubgb</span><span class="o">&#10217;</span> <span class="bp">=&gt;</span>
      <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">,</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span><span class="o">&#10217;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">ubf</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">ubg</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="k">match</span> <span class="n">ubf</span><span class="o">,</span> <span class="n">ubg</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">ubfa</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="n">ubgb</span><span class="o">&#10217;</span> <span class="bp">=&gt;</span>
      <span class="o">&#10216;</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">,</span> <span class="n">fnUb_add</span> <span class="n">ubfa</span> <span class="n">ubgb</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#22312;&#31532;&#19968;&#20010;&#20363;&#23376;&#20013;&#65292;&#22914;&#26524;&#25226;&#20809;&#26631;&#25918;&#22312; <code class="docutils literal notranslate"><span class="pre">cases</span> <span class="pre">ubf</span></code> &#21518;&#38754;&#65292;
&#23601;&#20250;&#30475;&#21040;&#35813;&#31574;&#30053;&#20135;&#29983;&#20102;&#19968;&#20010;&#30446;&#26631;&#65292;Lean &#23558;&#20854;&#26631;&#35760;&#20026; <code class="docutils literal notranslate"><span class="pre">intro</span></code>
(&#25152;&#36873;&#30340;&#29305;&#23450;&#21517;&#31216;&#26469;&#33258;&#24314;&#31435;&#23384;&#22312;&#24615;&#35821;&#21477;&#35777;&#26126;&#30340;&#20844;&#29702;&#22522;&#20803;&#30340;&#20869;&#37096;&#21517;&#31216;&#65289;&#12290;
&#28982;&#21518;&#65292; <code class="docutils literal notranslate"><span class="pre">case</span></code> &#31574;&#30053;&#20250;&#21629;&#21517;&#21508;&#20010;&#32452;&#20214;&#12290;&#31532;&#20108;&#20010;&#20363;&#23376;&#20063;&#26159;&#31867;&#20284;&#30340;&#65292;
&#21482;&#26159;&#20351;&#29992;&#20102; <code class="docutils literal notranslate"><span class="pre">next</span></code> &#32780;&#38750; <code class="docutils literal notranslate"><span class="pre">case</span></code> &#24847;&#21619;&#30528;&#21487;&#20197;&#36991;&#20813;&#25552;&#21450; <code class="docutils literal notranslate"><span class="pre">intro</span></code>.
&#26368;&#21518;&#20004;&#20010;&#20363;&#23376;&#20013;&#30340; <code class="docutils literal notranslate"><span class="pre">match</span></code> &#19968;&#35789;&#24378;&#35843;&#20102;&#25105;&#20204;&#22312;&#36825;&#37324;&#20570;&#30340;&#26159;&#35745;&#31639;&#26426;&#31185;&#23398;&#23478;&#25152;&#35828;&#30340; &#8220;&#27169;&#24335;&#21305;&#37197;&#8221;&#12290;
&#35831;&#27880;&#24847;&#65292;&#31532;&#19977;&#20010;&#35777;&#26126;&#20197; <code class="docutils literal notranslate"><span class="pre">by</span></code> &#24320;&#22836;&#65292;&#20043;&#21518;&#30340;&#31574;&#30053;&#29256; <code class="docutils literal notranslate"><span class="pre">match</span></code> &#24076;&#26395;&#22312;&#31661;&#22836;&#21491;&#20391;&#26377;&#19968;&#20010;&#31574;&#30053;&#35777;&#26126;&#12290;
&#26368;&#21518;&#19968;&#20010;&#20363;&#23376;&#26159;&#19968;&#20010;&#35777;&#26126;&#39033;&#65306;&#27809;&#26377;&#31574;&#30053;&#12290;</p>
<p>&#22312;&#26412;&#20070;&#20854;&#20313;&#37096;&#20998;&#65292;&#25105;&#20204;&#23558;&#22362;&#25345;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">rcases</span></code>, <code class="docutils literal notranslate"><span class="pre">rintros</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">obtain</span></code>,
&#20316;&#20026;&#20351;&#29992;&#23384;&#22312;&#37327;&#35789;&#30340;&#39318;&#36873;&#26041;&#24335;&#12290;
&#20294;&#30475;&#30475;&#20854;&#20182;&#35821;&#27861;&#20063;&#27809;&#22351;&#22788;&#65292;&#23588;&#20854;&#26159;&#24403;&#20320;&#26377;&#26426;&#20250;&#19982;&#35745;&#31639;&#26426;&#31185;&#23398;&#23478;&#21512;&#20316;&#26102;&#12290;</p>
<p>&#20026;&#20102;&#23637;&#31034; <code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#30340;&#19968;&#31181;&#20351;&#29992;&#26041;&#27861;&#65292;
&#25105;&#20204;&#26469;&#35777;&#26126;&#19968;&#20010;&#32463;&#20856;&#30340;&#25968;&#23398;&#32467;&#26524;&#65306;
&#33509;&#20004;&#20010;&#25972;&#25968; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#21487;&#20197;&#20998;&#21035;&#20889;&#20986;&#20004;&#20010;&#24179;&#26041;&#25968;&#20043;&#21644;&#65292;
&#37027;&#20040;&#23427;&#20204;&#30340;&#20056;&#31215; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></code> &#20063;&#21487;&#20197;&#12290;
&#20107;&#23454;&#19978;&#65292;&#36825;&#20010;&#32467;&#35770;&#23545;&#20219;&#20309;&#20132;&#25442;&#29615;&#37117;&#26159;&#27491;&#30830;&#30340;&#65292;
&#32780;&#19981;&#20165;&#20165;&#36866;&#29992;&#20110;&#25972;&#25968;&#29615;&#12290;
&#22312;&#19979;&#19968;&#20010;&#20363;&#23376;&#20013;&#65292; <code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#21516;&#26102;&#35299;&#21253;&#20102;&#20004;&#20010;&#23384;&#22312;&#37327;&#35789;&#12290;
&#28982;&#21518;&#65292;&#25105;&#20204;&#20197;&#21015;&#34920;&#24418;&#24335;&#21521; <code class="docutils literal notranslate"><span class="pre">use</span></code> &#35821;&#21477;&#25552;&#20379;&#23558; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></code> &#34920;&#31034;&#20026;&#24179;&#26041;&#21644;&#25152;&#38656;&#30340;&#39764;&#27861;&#20540;&#65292;
&#24182;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">ring</span></code> &#26469;&#39564;&#35777;&#23427;&#20204;&#26159;&#21542;&#26377;&#25928;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">CommRing</span> <span class="n">&#945;</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">SumOfSquares</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">&#8707;</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">^</span> <span class="mi">2</span>

<span class="kd">theorem</span> <span class="n">sumOfSquares_mul</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">}</span> <span class="o">(</span><span class="n">sosx</span> <span class="o">:</span> <span class="n">SumOfSquares</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">sosy</span> <span class="o">:</span> <span class="n">SumOfSquares</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">SumOfSquares</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">sosx</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">xeq</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">sosy</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">,</span> <span class="n">yeq</span><span class="o">&#10217;</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">xeq</span><span class="o">,</span> <span class="n">yeq</span><span class="o">]</span>
  <span class="n">use</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">d</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span>
  <span class="n">ring</span>
</pre></div>
</div>
<p>&#36825;&#20010;&#35777;&#26126;&#24182;&#26410;&#32473;&#20986;&#22826;&#22810;&#32447;&#32034;&#65292;
&#20294;&#26377;&#19968;&#31181;&#26041;&#24335;&#21487;&#20197;&#25552;&#20379;&#35777;&#26126;&#24605;&#36335;&#12290;
<em>&#39640;&#26031;&#25972;&#25968;</em> &#26159;&#24418;&#22914; <span class="math notranslate nohighlight">\(a + bi\)</span> &#30340;&#25968;&#65292;
&#20854;&#20013; <span class="math notranslate nohighlight">\(a\)</span> &#21644; <span class="math notranslate nohighlight">\(b\)</span> &#26159;&#25972;&#25968;&#65292;&#32780; <span class="math notranslate nohighlight">\(i = \sqrt{-1}\)</span>.
&#26681;&#25454;&#23450;&#20041;&#65292;&#39640;&#26031;&#25972;&#25968; <span class="math notranslate nohighlight">\(a + bi\)</span> &#30340; <em>&#33539;&#25968;</em> &#26159; <span class="math notranslate nohighlight">\(a^2 + b^2\)</span>.
&#25152;&#20197;&#39640;&#26031;&#25972;&#25968;&#30340;&#33539;&#25968;&#26159;&#24179;&#26041;&#21644;&#65292;
&#19988;&#20219;&#24847;&#24179;&#26041;&#21644;&#37117;&#21487;&#20197;&#36825;&#26679;&#34920;&#31034;&#12290;
&#19978;&#36848;&#23450;&#29702;&#21453;&#26144;&#20102;&#19968;&#20010;&#20107;&#23454;&#65292;&#21363;&#39640;&#26031;&#25972;&#25968;&#30340;&#20056;&#31215;&#30340;&#33539;&#25968;&#31561;&#20110;&#33539;&#25968;&#30340;&#20056;&#31215;&#65306;
&#33509; <span class="math notranslate nohighlight">\(x\)</span> &#26159; <span class="math notranslate nohighlight">\(a + bi\)</span> &#30340;&#33539;&#25968;&#65292;
&#19988; <span class="math notranslate nohighlight">\(y\)</span> &#26159; <span class="math notranslate nohighlight">\(c + di\)</span> &#30340;&#33539;&#25968;&#65292;
&#21017; <span class="math notranslate nohighlight">\(xy\)</span> &#26159; <span class="math notranslate nohighlight">\((a + bi) (c + di)\)</span> &#30340;&#33539;&#25968;&#12290;
&#25105;&#20204;&#20805;&#28385;&#35868;&#22242;&#30340;&#35777;&#26126;&#35828;&#26126;&#20102;&#36825;&#26679;&#19968;&#20010;&#20107;&#23454;&#65306;
&#26368;&#23481;&#26131;&#24418;&#24335;&#21270;&#30340;&#35777;&#26126;&#24182;&#19981;&#24635;&#26159;&#26368;&#36879;&#24443;&#30340;&#12290;
&#22312; <a class="reference internal" href="C06_Structures.html#section-building-the-gaussian-integers"><span class="std std-numref">Section 6.3</span></a> &#20013;&#65292;
&#25105;&#20204;&#23558;&#20026;&#24744;&#20171;&#32461;&#23450;&#20041;&#39640;&#26031;&#25972;&#25968;&#30340;&#26041;&#27861;&#65292;&#24182;&#21033;&#29992;&#23427;&#20204;&#25552;&#20379;&#21478;&#19968;&#31181;&#35777;&#26126;&#12290;
&#22312;&#23384;&#22312;&#37327;&#35789;&#20013;&#35299;&#21253;&#31561;&#24335;&#65292;&#28982;&#21518;&#29992;&#23427;&#26469;&#37325;&#20889;&#30446;&#26631;&#20013;&#30340;&#34920;&#36798;&#24335;&#30340;&#27169;&#24335;&#32463;&#24120;&#20986;&#29616;&#65292;
&#20197;&#33267;&#20110; <code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#31574;&#30053;&#25552;&#20379;&#20102;&#19968;&#20010;&#32553;&#20889;&#65306;
&#22914;&#26524;&#20351;&#29992;&#20851;&#38190;&#23383; <code class="docutils literal notranslate"><span class="pre">rfl</span></code> &#20195;&#26367;&#26032;&#30340;&#26631;&#35782;&#31526;&#65292;
<code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#23601;&#20250;&#33258;&#21160;&#36827;&#34892;&#37325;&#20889;
&#65288;&#36825;&#19968;&#25216;&#24039;&#19981;&#36866;&#29992;&#20110;&#27169;&#24335;&#21305;&#37197;&#30340; lambda&#65289;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">sumOfSquares_mul&#39;</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">}</span> <span class="o">(</span><span class="n">sosx</span> <span class="o">:</span> <span class="n">SumOfSquares</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">sosy</span> <span class="o">:</span> <span class="n">SumOfSquares</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">SumOfSquares</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">sosx</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">sosy</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;</span>
  <span class="n">use</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">d</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span>
  <span class="n">ring</span>
</pre></div>
</div>
<p>&#19982;&#36890;&#29992;&#37327;&#35789;&#19968;&#26679;&#65292;&#22914;&#26524;&#20320;&#30693;&#36947;&#22914;&#20309;&#21457;&#29616;&#23384;&#22312;&#37327;&#35789;&#65292;
&#23601;&#20250;&#21040;&#22788;&#25214;&#21040;&#23427;&#20204;&#30340;&#34255;&#36523;&#20043;&#25152;&#12290;
&#20363;&#22914;&#65292; &#21487;&#38500;&#24615;&#38544;&#21547;&#20102;&#19968;&#20010; &#8220;&#23384;&#22312;&#8221; &#35821;&#21477;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">divab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8739;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">divbc</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&#8739;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8739;</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">divab</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">d</span><span class="o">,</span> <span class="n">beq</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">divbc</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">e</span><span class="o">,</span> <span class="n">ceq</span><span class="o">&#10217;</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">ceq</span><span class="o">,</span> <span class="n">beq</span><span class="o">]</span>
  <span class="n">use</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">e</span><span class="bp">;</span> <span class="n">ring</span>
</pre></div>
</div>
<p>&#36825;&#20877;&#27425;&#20026;&#21644; <code class="docutils literal notranslate"><span class="pre">rfl</span></code> &#19968;&#36215;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">rcases</span></code> &#25552;&#20379;&#20102;&#19968;&#20010;&#24456;&#22909;&#30340;&#37197;&#32622;&#12290;
&#22312;&#19978;&#38754;&#30340;&#35777;&#26126;&#20013;&#35797;&#35797;&#30475;&#12290;&#24863;&#35273;&#36824;&#19981;&#38169;&#65281;</p>
<p>&#25509;&#19979;&#26469;&#23581;&#35797;&#35777;&#26126;&#19979;&#21015;&#23450;&#29702;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">divab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8739;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">divac</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8739;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8739;</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p id="index-10">&#21478;&#19968;&#20010;&#37325;&#35201;&#30340;&#20363;&#23376;&#26159;&#65292;&#33509;&#20989;&#25968; <span class="math notranslate nohighlight">\(f : \alpha \to \beta\)</span> &#28385;&#36275;&#23545;&#20540;&#22495; <span class="math notranslate nohighlight">\(\beta\)</span> &#20013;&#20219;&#24847;&#30340; <span class="math notranslate nohighlight">\(y\)</span>, &#23384;&#22312;&#23450;&#20041;&#22495; <span class="math notranslate nohighlight">\(\alpha\)</span> &#20013;&#30340; <span class="math notranslate nohighlight">\(x\)</span>,
&#20351;&#24471; <span class="math notranslate nohighlight">\(f(x) = y\)</span>,
&#37027;&#20040;&#25105;&#20204;&#31216;&#36825;&#20010;&#20989;&#25968;&#26159; <em>&#28385;&#23556;</em> &#12290;
&#27880;&#24847;&#21040;&#36825;&#20010;&#35821;&#21477;&#26082;&#21253;&#21547;&#20840;&#31216;&#37327;&#35789;&#65292;&#20063;&#21253;&#21547;&#23384;&#22312;&#37327;&#35789;&#65292;
&#36825;&#35299;&#37322;&#20102;&#20026;&#20160;&#20040;&#25509;&#19979;&#26469;&#30340;&#20363;&#23376;&#21516;&#26102;&#20351;&#29992;&#20102; <code class="docutils literal notranslate"><span class="pre">intro</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">use</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">:</span> <span class="n">Surjective</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">x</span>
  <span class="n">use</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">c</span>
  <span class="n">dsimp</span><span class="bp">;</span> <span class="n">ring</span>
</pre></div>
</div>
<p>&#33258;&#24049;&#35797;&#35797;&#36825;&#20010;&#20363;&#23376;&#65292;&#20351;&#29992;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">mul_div_cancel&#8320;</span></code>:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">Surjective</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p id="index-11">&#22312;&#27492;&#65292;&#20540;&#24471;&#19968;&#25552;&#30340;&#26159;&#26377;&#19968;&#31181;&#31574;&#30053;&#65292;&#21363; <code class="docutils literal notranslate"><span class="pre">field_simp</span></code> &#31574;&#30053;&#65292;&#23427;&#36890;&#24120;&#21487;&#20197;&#26377;&#25928;&#22320;&#21435;&#20998;&#27597;&#12290;
&#23427;&#21487;&#20197;&#19982; <code class="docutils literal notranslate"><span class="pre">ring</span></code> &#31574;&#30053;&#32467;&#21512;&#20351;&#29992;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">y</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">/</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">field_simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
  <span class="n">ring</span>
</pre></div>
</div>
<p>&#19979;&#19968;&#20010;&#31034;&#20363;&#20351;&#29992;&#20102;&#28385;&#23556;&#24615;&#20551;&#35774;&#65292;&#23558;&#23427;&#24212;&#29992;&#20110;&#19968;&#20010;&#21512;&#36866;&#30340;&#20540;&#12290;
&#35831;&#27880;&#24847;&#65292;&#20320;&#21487;&#20197;&#22312;&#20219;&#20309;&#34920;&#36798;&#24335;&#20013;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">rcases</span></code>&#65292;&#32780;&#19981;&#20165;&#20165;&#26159;&#22312;&#20551;&#35774;&#20013;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Surjective</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">4</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="mi">2</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">&#10217;</span>
  <span class="n">use</span> <span class="n">x</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">hx</span><span class="o">]</span>
  <span class="n">norm_num</span>
</pre></div>
</div>
<p>&#30475;&#30475;&#20320;&#33021;&#21542;&#29992;&#36825;&#20123;&#26041;&#27861;&#35777;&#26126;&#28385;&#20989;&#25968;&#30340;&#22797;&#21512;&#26159;&#28385;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">&#946;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">&#947;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">&#946;</span> <span class="bp">&#8594;</span> <span class="n">&#947;</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">surjg</span> <span class="o">:</span> <span class="n">Surjective</span> <span class="n">g</span><span class="o">)</span> <span class="o">(</span><span class="n">surjf</span> <span class="o">:</span> <span class="n">Surjective</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">Surjective</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="negation">
<span id="id4"></span><h2><span class="section-number">3.3. </span>Negation<a class="headerlink" href="#negation" title="Link to this heading">&#61633;</a></h2>
<p>The symbol <code class="docutils literal notranslate"><span class="pre">&#172;</span></code> is meant to express negation,
so <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">y</span></code> says that <code class="docutils literal notranslate"><span class="pre">x</span></code> is not less than <code class="docutils literal notranslate"><span class="pre">y</span></code>,
<code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code> (or, equivalently, <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8800;</span> <span class="pre">y</span></code>) says that
<code class="docutils literal notranslate"><span class="pre">x</span></code> is not equal to <code class="docutils literal notranslate"><span class="pre">y</span></code>,
and <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">&#8707;</span> <span class="pre">z,</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">z</span> <span class="pre">&#8743;</span> <span class="pre">z</span> <span class="pre">&lt;</span> <span class="pre">y</span></code> says that there does not exist a <code class="docutils literal notranslate"><span class="pre">z</span></code>
strictly between <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.
In Lean, the notation <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">A</span></code> abbreviates <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8594;</span> <span class="pre">False</span></code>,
which you can think of as saying that <code class="docutils literal notranslate"><span class="pre">A</span></code> implies a contradiction.
Practically speaking, this means that you already know something
about how to work with negations:
you can prove <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">A</span></code> by introducing a hypothesis <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">A</span></code>
and proving <code class="docutils literal notranslate"><span class="pre">False</span></code>,
and if you have <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">&#172;</span> <span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">h'</span> <span class="pre">:</span> <span class="pre">A</span></code>,
then applying <code class="docutils literal notranslate"><span class="pre">h</span></code> to <code class="docutils literal notranslate"><span class="pre">h'</span></code> yields <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>To illustrate, consider the irreflexivity principle <code class="docutils literal notranslate"><span class="pre">lt_irrefl</span></code>
for a strict order,
which says that we have <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">a</span></code> for every <code class="docutils literal notranslate"><span class="pre">a</span></code>.
The asymmetry principle <code class="docutils literal notranslate"><span class="pre">lt_asymm</span></code> says that we have
<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span> <span class="pre">&#8594;</span> <span class="pre">&#172;</span> <span class="pre">b</span> <span class="pre">&lt;</span> <span class="pre">a</span></code>. Let&#8217;s show that <code class="docutils literal notranslate"><span class="pre">lt_asymm</span></code> follows
from <code class="docutils literal notranslate"><span class="pre">lt_irrefl</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">b</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">h&#39;</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">lt_trans</span> <span class="n">h</span> <span class="n">h&#39;</span>
  <span class="n">apply</span> <span class="n">lt_irrefl</span> <span class="n">a</span> <span class="n">this</span>
</pre></div>
</div>
<p id="index-12">This example introduces a couple of new tricks.
First, when you use <code class="docutils literal notranslate"><span class="pre">have</span></code> without providing
a label,
Lean uses the name <code class="docutils literal notranslate"><span class="pre">this</span></code>,
providing a convenient way to refer back to it.
Because the proof is so short, we provide an explicit proof term.
But what you should really be paying attention to in this
proof is the result of the <code class="docutils literal notranslate"><span class="pre">intro</span></code> tactic,
which leaves a goal of <code class="docutils literal notranslate"><span class="pre">False</span></code>,
and the fact that we eventually prove <code class="docutils literal notranslate"><span class="pre">False</span></code>
by applying <code class="docutils literal notranslate"><span class="pre">lt_irrefl</span></code> to a proof of <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">a</span></code>.</p>
<p>Here is another example, which uses the
predicate <code class="docutils literal notranslate"><span class="pre">FnHasUb</span></code> defined in the last section,
which says that a function has an upper bound.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasUb</span> <span class="n">f</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">fnub</span>
  <span class="n">rcases</span> <span class="n">fnub</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">fnuba</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="n">a</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">&#10217;</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">fnuba</span> <span class="n">x</span>
  <span class="n">linarith</span>
</pre></div>
</div>
<p>Remember that it is often convenient to use <code class="docutils literal notranslate"><span class="pre">linarith</span></code>
when a goal follows from linear equations and
inequalities that in the context.</p>
<p>See if you can prove these in a similar way:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasLb</span> <span class="n">f</span> <span class="o">:=</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasUb</span> <span class="k">fun</span> <span class="n">x</span> <span class="bp">&#8614;</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>Mathlib offers a number of useful theorems for relating orders
and negations:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="o">(</span><span class="n">not_le_of_gt</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&gt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="bp">&#172;</span><span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">not_lt_of_ge</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8805;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="bp">&#172;</span><span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lt_of_not_ge</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">a</span> <span class="bp">&#8805;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_of_not_gt</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">a</span> <span class="bp">&gt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</div>
<p>Recall the predicate <code class="docutils literal notranslate"><span class="pre">Monotone</span> <span class="pre">f</span></code>,
which says that <code class="docutils literal notranslate"><span class="pre">f</span></code> is nondecreasing.
Use some of the theorems just enumerated to prove the following:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">Monotone</span> <span class="n">f</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>We can show that the first example in the last snippet
cannot be proved if we replace <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> by <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code>.
Notice that we can prove the negation of a universally
quantified statement by giving a counterexample.
Complete the proof.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#172;&#8704;</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">},</span> <span class="n">Monotone</span> <span class="n">f</span> <span class="bp">&#8594;</span> <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">h</span>
  <span class="k">let</span> <span class="n">f</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8614;</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span>
  <span class="k">have</span> <span class="n">monof</span> <span class="o">:</span> <span class="n">Monotone</span> <span class="n">f</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span>
  <span class="k">have</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">le_refl</span> <span class="n">_</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p id="index-13">This example introduces the <code class="docutils literal notranslate"><span class="pre">let</span></code> tactic,
which adds a <em>local definition</em> to the context.
If you put the cursor after the <code class="docutils literal notranslate"><span class="pre">let</span></code> command,
in the goal window you will see that the definition
<code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#8477;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;</span> <span class="pre">:=</span> <span class="pre">fun</span> <span class="pre">x</span> <span class="pre">&#8614;</span> <span class="pre">0</span></code> has been added to the context.
Lean will unfold the definition of <code class="docutils literal notranslate"><span class="pre">f</span></code> when it has to.
In particular, when we prove <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">1</span> <span class="pre">&#8804;</span> <span class="pre">f</span> <span class="pre">0</span></code> with <code class="docutils literal notranslate"><span class="pre">le_refl</span></code>,
Lean reduces <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">le_of_not_gt</span></code> to prove the following:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">&#949;</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">&#949;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>Implicit in many of the proofs we have just done
is the fact that if <code class="docutils literal notranslate"><span class="pre">P</span></code> is any property,
saying that there is nothing with property <code class="docutils literal notranslate"><span class="pre">P</span></code>
is the same as saying that everything fails to have
property <code class="docutils literal notranslate"><span class="pre">P</span></code>,
and saying that not everything has property <code class="docutils literal notranslate"><span class="pre">P</span></code>
is equivalent to saying that something fails to have property <code class="docutils literal notranslate"><span class="pre">P</span></code>.
In other words, all four of the following implications
are valid (but one of them cannot be proved with what we explained so
far):</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">P</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span><span class="n">P</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span><span class="n">P</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">P</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">P</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span><span class="n">P</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span><span class="n">P</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">P</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>The first, second, and fourth are straightforward to
prove using the methods you have already seen.
We encourage you to try it.
The third is more difficult, however,
because it concludes that an object exists
from the fact that its nonexistence is contradictory.
This is an instance of <em>classical</em> mathematical reasoning.
We can use proof by contradiction
to prove the third implication as follows.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">P</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span><span class="n">P</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">by_contra</span> <span class="n">h&#39;</span>
  <span class="n">apply</span> <span class="n">h</span>
  <span class="n">intro</span> <span class="n">x</span>
  <span class="k">show</span> <span class="n">P</span> <span class="n">x</span>
  <span class="n">by_contra</span> <span class="n">h&#39;&#39;</span>
  <span class="n">exact</span> <span class="n">h&#39;</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">h&#39;&#39;</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p id="index-14">Make sure you understand how this works.
The <code class="docutils literal notranslate"><span class="pre">by_contra</span></code> tactic
allows us to prove a goal <code class="docutils literal notranslate"><span class="pre">Q</span></code> by assuming <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">Q</span></code>
and deriving a contradiction.
In fact, it is equivalent to using the
equivalence <code class="docutils literal notranslate"><span class="pre">not_not</span> <span class="pre">:</span> <span class="pre">&#172;</span> <span class="pre">&#172;</span> <span class="pre">Q</span> <span class="pre">&#8596;</span> <span class="pre">Q</span></code>.
Confirm that you can prove the forward direction
of this equivalence using <code class="docutils literal notranslate"><span class="pre">by_contra</span></code>,
while the reverse direction follows from the
ordinary rules for negation.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;&#172;</span><span class="n">Q</span><span class="o">)</span> <span class="o">:</span> <span class="n">Q</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;&#172;</span><span class="n">Q</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>Use proof by contradiction to establish the following,
which is the converse of one of the implications we proved above.
(Hint: use <code class="docutils literal notranslate"><span class="pre">intro</span></code> first.)</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p id="index-15">It is often tedious to work with compound statements with
a negation in front,
and it is a common mathematical pattern to replace such
statements with equivalent forms in which the negation
has been pushed inward.
To facilitate this, Mathlib offers a <code class="docutils literal notranslate"><span class="pre">push_neg</span></code> tactic,
which restates the goal in this way.
The command <code class="docutils literal notranslate"><span class="pre">push_neg</span> <span class="pre">at</span> <span class="pre">h</span></code> restates the hypothesis <code class="docutils literal notranslate"><span class="pre">h</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">FnHasUb</span> <span class="n">f</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">exact</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">FnHasUb</span><span class="o">,</span> <span class="n">FnUb</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span>
  <span class="n">exact</span> <span class="n">h</span>
</pre></div>
</div>
<p>In the second example, we use dsimp to
expand the definitions of <code class="docutils literal notranslate"><span class="pre">FnHasUb</span></code> and <code class="docutils literal notranslate"><span class="pre">FnUb</span></code>.
(We need to use <code class="docutils literal notranslate"><span class="pre">dsimp</span></code> rather than <code class="docutils literal notranslate"><span class="pre">rw</span></code>
to expand <code class="docutils literal notranslate"><span class="pre">FnUb</span></code>,
because it appears in the scope of a quantifier.)
You can verify that in the examples above
with <code class="docutils literal notranslate"><span class="pre">&#172;&#8707;</span> <span class="pre">x,</span> <span class="pre">P</span> <span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">&#172;&#8704;</span> <span class="pre">x,</span> <span class="pre">P</span> <span class="pre">x</span></code>,
the <code class="docutils literal notranslate"><span class="pre">push_neg</span></code> tactic does the expected thing.
Without even knowing how to use the conjunction
symbol,
you should be able to use <code class="docutils literal notranslate"><span class="pre">push_neg</span></code>
to prove the following:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">Monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">f</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p id="index-16">Mathlib also has a tactic, <code class="docutils literal notranslate"><span class="pre">contrapose</span></code>,
which transforms a goal <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8594;</span> <span class="pre">B</span></code> to <code class="docutils literal notranslate"><span class="pre">&#172;B</span> <span class="pre">&#8594;</span> <span class="pre">&#172;A</span></code>.
Similarly, given a goal of proving <code class="docutils literal notranslate"><span class="pre">B</span></code> from
hypothesis <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">A</span></code>,
<code class="docutils literal notranslate"><span class="pre">contrapose</span> <span class="pre">h</span></code> leaves you with a goal of proving
<code class="docutils literal notranslate"><span class="pre">&#172;A</span></code> from hypothesis <code class="docutils literal notranslate"><span class="pre">&#172;B</span></code>.
Using <code class="docutils literal notranslate"><span class="pre">contrapose!</span></code> instead of <code class="docutils literal notranslate"><span class="pre">contrapose</span></code>
applies <code class="docutils literal notranslate"><span class="pre">push_neg</span></code> to the goal and the relevant
hypothesis as well.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">FnHasUb</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h</span>
  <span class="n">exact</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">&#949;</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">&#949;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h</span>
  <span class="n">use</span> <span class="n">x</span> <span class="bp">/</span> <span class="mi">2</span>
  <span class="n">constructor</span> <span class="bp">&lt;;&gt;</span> <span class="n">linarith</span>
</pre></div>
</div>
<p>We have not yet explained the <code class="docutils literal notranslate"><span class="pre">constructor</span></code> command
or the use of the semicolon after it,
but we will do that in the next section.</p>
<p>We close this section with
the principle of <em>ex falso</em>,
which says that anything follows from a contradiction.
In Lean, this is represented by <code class="docutils literal notranslate"><span class="pre">False.elim</span></code>,
which establishes <code class="docutils literal notranslate"><span class="pre">False</span> <span class="pre">&#8594;</span> <span class="pre">P</span></code> for any proposition <code class="docutils literal notranslate"><span class="pre">P</span></code>.
This may seem like a strange principle,
but it comes up fairly often.
We often prove a theorem by splitting on cases,
and sometimes we can show that one of
the cases is contradictory.
In that case, we need to assert that the contradiction
establishes the goal so we can move on to the next one.
(We will see instances of reasoning by cases in
<a class="reference internal" href="#disjunction"><span class="std std-numref">Section 3.5</span></a>.)</p>
<p id="index-17">Lean provides a number of ways of closing
a goal once a contradiction has been reached.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&gt;</span> <span class="mi">37</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">exfalso</span>
  <span class="n">apply</span> <span class="n">lt_irrefl</span> <span class="mi">0</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&gt;</span> <span class="mi">37</span> <span class="o">:=</span>
  <span class="n">absurd</span> <span class="n">h</span> <span class="o">(</span><span class="n">lt_irrefl</span> <span class="mi">0</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&gt;</span> <span class="mi">37</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">lt_irrefl</span> <span class="mi">0</span>
  <span class="n">contradiction</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">exfalso</span></code> tactic replaces the current goal with
the goal of proving <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Given <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">P</span></code> and <code class="docutils literal notranslate"><span class="pre">h'</span> <span class="pre">:</span> <span class="pre">&#172;</span> <span class="pre">P</span></code>,
the term <code class="docutils literal notranslate"><span class="pre">absurd</span> <span class="pre">h</span> <span class="pre">h'</span></code> establishes any proposition.
Finally, the <code class="docutils literal notranslate"><span class="pre">contradiction</span></code> tactic tries to close a goal
by finding a contradiction in the hypotheses,
such as a pair of the form <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">P</span></code> and <code class="docutils literal notranslate"><span class="pre">h'</span> <span class="pre">:</span> <span class="pre">&#172;</span> <span class="pre">P</span></code>.
Of course, in this example, <code class="docutils literal notranslate"><span class="pre">linarith</span></code> also works.</p>
</section>
<section id="conjunction-and-iff">
<span id="conjunction-and-biimplication"></span><h2><span class="section-number">3.4. </span>Conjunction and Iff<a class="headerlink" href="#conjunction-and-iff" title="Link to this heading">&#61633;</a></h2>
<p id="index-18">You have already seen that the conjunction symbol, <code class="docutils literal notranslate"><span class="pre">&#8743;</span></code>,
is used to express &#8220;and.&#8221;
The <code class="docutils literal notranslate"><span class="pre">constructor</span></code> tactic allows you to prove a statement of
the form <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8743;</span> <span class="pre">B</span></code>
by proving <code class="docutils literal notranslate"><span class="pre">A</span></code> and then proving <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">constructor</span>
  <span class="bp">&#183;</span> <span class="n">assumption</span>
  <span class="n">intro</span> <span class="n">h</span>
  <span class="n">apply</span> <span class="n">h&#8321;</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
</pre></div>
</div>
<p id="index-19">In this example, the <code class="docutils literal notranslate"><span class="pre">assumption</span></code> tactic
tells Lean to find an assumption that will solve the goal.
Notice that the final <code class="docutils literal notranslate"><span class="pre">rw</span></code> finishes the goal by
applying the reflexivity of <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code>.
The following are alternative ways of carrying out
the previous examples using the anonymous constructor
angle brackets.
The first is a slick proof-term version of the
previous proof,
which drops into tactic mode at the keyword <code class="docutils literal notranslate"><span class="pre">by</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span>
  <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="k">fun</span> <span class="n">h</span> <span class="bp">&#8614;</span> <span class="n">h&#8321;</span> <span class="o">(</span><span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">])&#10217;</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h&#8321;</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">h&#8321;</span><span class="o">]</span>
  <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="n">h</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p><em>Using</em> a conjunction instead of proving one involves unpacking the proofs of the
two parts.
You can use the <code class="docutils literal notranslate"><span class="pre">rcases</span></code> tactic for that,
as well as <code class="docutils literal notranslate"><span class="pre">rintro</span></code> or a pattern-matching <code class="docutils literal notranslate"><span class="pre">fun</span></code>,
all in a manner similar to the way they are used with
the existential quantifier.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="n">h&#8321;</span><span class="o">&#10217;</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h&#8321;</span>
  <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rintro</span> <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="n">h&#8321;</span><span class="o">&#10217;</span> <span class="n">h&#39;</span>
  <span class="n">exact</span> <span class="n">h&#8321;</span> <span class="o">(</span><span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#39;</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="k">fun</span> <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="n">h&#8321;</span><span class="o">&#10217;</span> <span class="n">h&#39;</span> <span class="bp">&#8614;</span> <span class="n">h&#8321;</span> <span class="o">(</span><span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>In analogy to the <code class="docutils literal notranslate"><span class="pre">obtain</span></code> tactic, there is also a pattern-matching <code class="docutils literal notranslate"><span class="pre">have</span></code>:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="n">h&#8321;</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="n">h</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h&#8321;</span>
  <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>
</pre></div>
</div>
<p>In contrast to <code class="docutils literal notranslate"><span class="pre">rcases</span></code>, here the <code class="docutils literal notranslate"><span class="pre">have</span></code> tactic leaves <code class="docutils literal notranslate"><span class="pre">h</span></code> in the context.
And even though we won&#8217;t use them, once again we have the computer scientists&#8217;
pattern-matching syntax:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">cases</span> <span class="n">h</span>
  <span class="n">case</span> <span class="n">intro</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span> <span class="bp">=&gt;</span>
    <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h&#8321;</span>
    <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">cases</span> <span class="n">h</span>
  <span class="n">next</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span> <span class="bp">=&gt;</span>
    <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h&#8321;</span>
    <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">match</span> <span class="n">h</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="n">h&#8321;</span><span class="o">&#10217;</span> <span class="bp">=&gt;</span>
        <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h&#8321;</span>
        <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>
</pre></div>
</div>
<p>In contrast to using an existential quantifier,
you can also extract proofs of the two components
of a hypothesis <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">A</span> <span class="pre">&#8743;</span> <span class="pre">B</span></code>
by writing <code class="docutils literal notranslate"><span class="pre">h.left</span></code> and <code class="docutils literal notranslate"><span class="pre">h.right</span></code>,
or, equivalently, <code class="docutils literal notranslate"><span class="pre">h.1</span></code> and <code class="docutils literal notranslate"><span class="pre">h.2</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">h&#39;</span>
  <span class="n">apply</span> <span class="n">h.right</span>
  <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h.left</span> <span class="n">h&#39;</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span>
  <span class="k">fun</span> <span class="n">h&#39;</span> <span class="bp">&#8614;</span> <span class="n">h.right</span> <span class="o">(</span><span class="n">le_antisymm</span> <span class="n">h.left</span> <span class="n">h&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>Try using these techniques to come up with various ways of proving of the following:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">n</span> <span class="bp">&#8743;</span> <span class="n">m</span> <span class="bp">&#8800;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">n</span> <span class="bp">&#8743;</span> <span class="bp">&#172;</span><span class="n">n</span> <span class="bp">&#8739;</span> <span class="n">m</span> <span class="o">:=</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>You can nest uses of <code class="docutils literal notranslate"><span class="pre">&#8707;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#8743;</span></code>
with anonymous constructors, <code class="docutils literal notranslate"><span class="pre">rintro</span></code>, and <code class="docutils literal notranslate"><span class="pre">rcases</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">4</span> <span class="o">:=</span>
  <span class="o">&#10216;</span><span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">,</span> <span class="kd">by</span> <span class="n">norm_num</span><span class="o">,</span> <span class="kd">by</span> <span class="n">norm_num</span><span class="o">&#10217;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">z</span> <span class="bp">&#8743;</span> <span class="n">z</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rintro</span> <span class="o">&#10216;</span><span class="n">z</span><span class="o">,</span> <span class="n">xltz</span><span class="o">,</span> <span class="n">zlty</span><span class="o">&#10217;</span>
  <span class="n">exact</span> <span class="n">lt_trans</span> <span class="n">xltz</span> <span class="n">zlty</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">z</span> <span class="bp">&#8743;</span> <span class="n">z</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="o">:=</span>
  <span class="k">fun</span> <span class="o">&#10216;</span><span class="n">z</span><span class="o">,</span> <span class="n">xltz</span><span class="o">,</span> <span class="n">zlty</span><span class="o">&#10217;</span> <span class="bp">&#8614;</span> <span class="n">lt_trans</span> <span class="n">xltz</span> <span class="n">zlty</span>
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">use</span></code> tactic:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">4</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">use</span> <span class="mi">5</span> <span class="bp">/</span> <span class="mi">2</span>
  <span class="n">constructor</span> <span class="bp">&lt;;&gt;</span> <span class="n">norm_num</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="mi">4</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">&#8743;</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">&#8743;</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">10</span> <span class="bp">&#8743;</span> <span class="n">Nat.Prime</span> <span class="n">m</span> <span class="bp">&#8743;</span> <span class="n">Nat.Prime</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">use</span> <span class="mi">5</span>
  <span class="n">use</span> <span class="mi">7</span>
  <span class="n">norm_num</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rintro</span> <span class="o">&#10216;</span><span class="n">h&#8320;</span><span class="o">,</span> <span class="n">h&#8321;</span><span class="o">&#10217;</span>
  <span class="n">use</span> <span class="n">h&#8320;</span>
  <span class="n">exact</span> <span class="k">fun</span> <span class="n">h&#39;</span> <span class="bp">&#8614;</span> <span class="n">h&#8321;</span> <span class="o">(</span><span class="n">le_antisymm</span> <span class="n">h&#8320;</span> <span class="n">h&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>In the first example, the semicolon after the <code class="docutils literal notranslate"><span class="pre">constructor</span></code> command tells Lean to use the
<code class="docutils literal notranslate"><span class="pre">norm_num</span></code> tactic on both of the goals that result.</p>
<p>In Lean, <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8596;</span> <span class="pre">B</span></code> is <em>not</em> defined to be <code class="docutils literal notranslate"><span class="pre">(A</span> <span class="pre">&#8594;</span> <span class="pre">B)</span> <span class="pre">&#8743;</span> <span class="pre">(B</span> <span class="pre">&#8594;</span> <span class="pre">A)</span></code>,
but it could have been,
and it behaves roughly the same way.
You have already seen that you can write <code class="docutils literal notranslate"><span class="pre">h.mp</span></code> and <code class="docutils literal notranslate"><span class="pre">h.mpr</span></code>
or <code class="docutils literal notranslate"><span class="pre">h.1</span></code> and <code class="docutils literal notranslate"><span class="pre">h.2</span></code> for the two directions of <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">A</span> <span class="pre">&#8596;</span> <span class="pre">B</span></code>.
You can also use <code class="docutils literal notranslate"><span class="pre">cases</span></code> and friends.
To prove an if-and-only-if statement,
you can uses <code class="docutils literal notranslate"><span class="pre">constructor</span></code> or angle brackets,
just as you would if you were proving a conjunction.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="bp">&#8596;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">constructor</span>
  <span class="bp">&#183;</span> <span class="n">contrapose</span><span class="bp">!</span>
    <span class="n">rintro</span> <span class="n">rfl</span>
    <span class="n">rfl</span>
  <span class="n">contrapose</span><span class="bp">!</span>
  <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="bp">&#8596;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span>
  <span class="o">&#10216;</span><span class="k">fun</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span> <span class="bp">&#8614;</span> <span class="n">h&#8320;</span> <span class="o">(</span><span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h&#8321;</span><span class="o">]),</span> <span class="k">fun</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span> <span class="bp">&#8614;</span> <span class="n">h&#8320;</span> <span class="o">(</span><span class="n">le_antisymm</span> <span class="n">h</span> <span class="n">h&#8321;</span><span class="o">)&#10217;</span>
</pre></div>
</div>
<p>The last proof term is inscrutable. Remember that you can
use underscores while writing an expression like that to
see what Lean expects.</p>
<p>Try out the various techniques and gadgets you have just seen
in order to prove the following:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="bp">&#172;</span><span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="bp">&#8596;</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>For a more interesting exercise, show that for any
two real numbers <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>,
<code class="docutils literal notranslate"><span class="pre">x^2</span> <span class="pre">+</span> <span class="pre">y^2</span> <span class="pre">=</span> <span class="pre">0</span></code> if and only if <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">0</span></code>.
We suggest proving an auxiliary lemma using
<code class="docutils literal notranslate"><span class="pre">linarith</span></code>, <code class="docutils literal notranslate"><span class="pre">pow_two_nonneg</span></code>, and <code class="docutils literal notranslate"><span class="pre">pow_eq_zero</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">aux</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
  <span class="k">have</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span>
  <span class="n">pow_eq_zero</span> <span class="n">h&#39;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">&#8596;</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">&#8743;</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>In Lean, bi-implication leads a double-life.
You can treat it like a conjunction and use its two
parts separately.
But Lean also knows that it is a reflexive, symmetric,
and transitive relation between propositions,
and you can also use it with <code class="docutils literal notranslate"><span class="pre">calc</span></code> and <code class="docutils literal notranslate"><span class="pre">rw</span></code>.
It is often convenient to rewrite a statement to
an equivalent one.
In the next example, we use <code class="docutils literal notranslate"><span class="pre">abs_lt</span></code> to
replace an expression of the form <code class="docutils literal notranslate"><span class="pre">|x|</span> <span class="pre">&lt;</span> <span class="pre">y</span></code>
by the equivalent expression <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">y</span> <span class="pre">&lt;</span> <span class="pre">x</span> <span class="pre">&#8743;</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">y</span></code>,
and in the one after that we use <code class="docutils literal notranslate"><span class="pre">Nat.dvd_gcd_iff</span></code>
to replace an expression of the form <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">&#8739;</span> <span class="pre">Nat.gcd</span> <span class="pre">n</span> <span class="pre">k</span></code> by the equivalent expression <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">&#8739;</span> <span class="pre">n</span> <span class="pre">&#8743;</span> <span class="pre">m</span> <span class="pre">&#8739;</span> <span class="pre">k</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">3</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="mi">5</span> <span class="bp">&#8594;</span> <span class="bp">-</span><span class="mi">8</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">abs_lt</span><span class="o">]</span>
  <span class="n">intro</span> <span class="n">h</span>
  <span class="n">constructor</span> <span class="bp">&lt;;&gt;</span> <span class="n">linarith</span>

<span class="kd">example</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">&#8739;</span> <span class="n">Nat.gcd</span> <span class="mi">6</span> <span class="mi">15</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.dvd_gcd_iff</span><span class="o">]</span>
  <span class="n">constructor</span> <span class="bp">&lt;;&gt;</span> <span class="n">norm_num</span>
</pre></div>
</div>
<p>See if you can use <code class="docutils literal notranslate"><span class="pre">rw</span></code> with the theorem below
to provide a short proof that negation is not a
nondecreasing function. (Note that <code class="docutils literal notranslate"><span class="pre">push_neg</span></code> won&#8217;t
unfold definitions for you, so the <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">[Monotone]</span></code> in
the proof of the theorem is needed.)</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">not_monotone_iff</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">Monotone</span> <span class="n">f</span> <span class="bp">&#8596;</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">f</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Monotone</span><span class="o">]</span>
  <span class="n">push_neg</span>
  <span class="n">rfl</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">Monotone</span> <span class="k">fun</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8614;</span> <span class="bp">-</span><span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>The remaining exercises in this section are designed
to give you some more practice with conjunction and
bi-implication. Remember that a <em>partial order</em> is a
binary relation that is transitive, reflexive, and
antisymmetric.
An even weaker notion sometimes arises:
a <em>preorder</em> is just a reflexive, transitive relation.
For any pre-order <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code>,
Lean axiomatizes the associated strict pre-order by
<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span> <span class="pre">&#8596;</span> <span class="pre">a</span> <span class="pre">&#8804;</span> <span class="pre">b</span> <span class="pre">&#8743;</span> <span class="pre">&#172;</span> <span class="pre">b</span> <span class="pre">&#8804;</span> <span class="pre">a</span></code>.
Show that if <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code> is a partial order,
then <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&#8804;</span> <span class="pre">b</span> <span class="pre">&#8743;</span> <span class="pre">a</span> <span class="pre">&#8800;</span> <span class="pre">b</span></code>:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">PartialOrder</span> <span class="n">&#945;</span><span class="o">]</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">&#8596;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8743;</span> <span class="n">a</span> <span class="bp">&#8800;</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">lt_iff_le_not_le</span><span class="o">]</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p id="index-20">Beyond logical operations, you do not need
anything more than <code class="docutils literal notranslate"><span class="pre">le_refl</span></code> and <code class="docutils literal notranslate"><span class="pre">le_trans</span></code>.
Show that even in the case where <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code>
is only assumed to be a preorder,
we can prove that the strict order is irreflexive
and transitive.
In the second example,
for convenience, we use the simplifier rather than <code class="docutils literal notranslate"><span class="pre">rw</span></code>
to express <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> in terms of <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#172;</span></code>.
We will come back to the simplifier later,
but here we are only relying on the fact that it will
use the indicated lemma repeatedly, even if it needs
to be instantiated to different values.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">Preorder</span> <span class="n">&#945;</span><span class="o">]</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">&#172;</span><span class="n">a</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">lt_iff_le_not_le</span><span class="o">]</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">c</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">lt_iff_le_not_le</span><span class="o">]</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="disjunction">
<span id="id5"></span><h2><span class="section-number">3.5. </span>Disjunction<a class="headerlink" href="#disjunction" title="Link to this heading">&#61633;</a></h2>
<p id="index-21">The canonical way to prove a disjunction <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8744;</span> <span class="pre">B</span></code> is to prove
<code class="docutils literal notranslate"><span class="pre">A</span></code> or to prove <code class="docutils literal notranslate"><span class="pre">B</span></code>.
The <code class="docutils literal notranslate"><span class="pre">left</span></code> tactic chooses <code class="docutils literal notranslate"><span class="pre">A</span></code>,
and the <code class="docutils literal notranslate"><span class="pre">right</span></code> tactic chooses <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="bp">&#8744;</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">left</span>
  <span class="n">linarith</span> <span class="o">[</span><span class="n">pow_two_nonneg</span> <span class="n">x</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">-</span><span class="n">y</span> <span class="bp">&gt;</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="bp">&#8744;</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">right</span>
  <span class="n">linarith</span> <span class="o">[</span><span class="n">pow_two_nonneg</span> <span class="n">x</span><span class="o">]</span>
</pre></div>
</div>
<p>We cannot use an anonymous constructor to construct a proof
of an &#8220;or&#8221; because Lean would have to guess
which disjunct we are trying to prove.
When we write proof terms we can use
<code class="docutils literal notranslate"><span class="pre">Or.inl</span></code> and <code class="docutils literal notranslate"><span class="pre">Or.inr</span></code> instead
to make the choice explicitly.
Here, <code class="docutils literal notranslate"><span class="pre">inl</span></code> is short for &#8220;introduction left&#8221; and
<code class="docutils literal notranslate"><span class="pre">inr</span></code> is short for &#8220;introduction right.&#8221;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="bp">&#8744;</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
  <span class="n">Or.inl</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="bp">&#8744;</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
  <span class="n">Or.inr</span> <span class="n">h</span>
</pre></div>
</div>
<p>It may seem strange to prove a disjunction by proving one side
or the other.
In practice, which case holds usually depends on a case distinction
that is implicit or explicit in the assumptions and the data.
The <code class="docutils literal notranslate"><span class="pre">rcases</span></code> tactic allows us to make use of a hypothesis
of the form <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8744;</span> <span class="pre">B</span></code>.
In contrast to the use of <code class="docutils literal notranslate"><span class="pre">rcases</span></code> with conjunction or an
existential quantifier,
here the <code class="docutils literal notranslate"><span class="pre">rcases</span></code> tactic produces <em>two</em> goals.
Both have the same conclusion, but in the first case,
<code class="docutils literal notranslate"><span class="pre">A</span></code> is assumed to be true,
and in the second case,
<code class="docutils literal notranslate"><span class="pre">B</span></code> is assumed to be true.
In other words, as the name suggests,
the <code class="docutils literal notranslate"><span class="pre">rcases</span></code> tactic carries out a proof by cases.
As usual, we can tell Lean what names to use for the hypotheses.
In the next example, we tell Lean
to use the name <code class="docutils literal notranslate"><span class="pre">h</span></code> on each branch.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">le_or_gt</span> <span class="mi">0</span> <span class="n">y</span> <span class="k">with</span> <span class="n">h</span> <span class="bp">|</span> <span class="n">h</span>
  <span class="bp">&#183;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_nonneg</span> <span class="n">h</span><span class="o">]</span>
    <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">left</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>
  <span class="bp">.</span> <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_neg</span> <span class="n">h</span><span class="o">]</span>
    <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">right</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>
</pre></div>
</div>
<p>Notice that the pattern changes from <code class="docutils literal notranslate"><span class="pre">&#10216;h&#8320;,</span> <span class="pre">h&#8321;&#10217;</span></code> in the case of
a conjunction to <code class="docutils literal notranslate"><span class="pre">h&#8320;</span> <span class="pre">|</span> <span class="pre">h&#8321;</span></code> in the case of a disjunction.
Think of the first pattern as matching against data the contains
<em>both</em> an <code class="docutils literal notranslate"><span class="pre">h&#8320;</span></code> and a <code class="docutils literal notranslate"><span class="pre">h&#8321;</span></code>, whereas second pattern, with the bar,
matches against data that contains <em>either</em> an <code class="docutils literal notranslate"><span class="pre">h&#8320;</span></code> or <code class="docutils literal notranslate"><span class="pre">h&#8321;</span></code>.
In this case, because the two goals are separate, we have chosen
to use the same name, <code class="docutils literal notranslate"><span class="pre">h</span></code>, in each case.</p>
<p>The absolute value function is defined in such a way
that we can immediately prove that
<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8805;</span> <span class="pre">0</span></code> implies <code class="docutils literal notranslate"><span class="pre">|x|</span> <span class="pre">=</span> <span class="pre">x</span></code>
(this is the theorem <code class="docutils literal notranslate"><span class="pre">abs_of_nonneg</span></code>)
and <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> implies <code class="docutils literal notranslate"><span class="pre">|x|</span> <span class="pre">=</span> <span class="pre">-x</span></code> (this is <code class="docutils literal notranslate"><span class="pre">abs_of_neg</span></code>).
The expression <code class="docutils literal notranslate"><span class="pre">le_or_gt</span> <span class="pre">0</span> <span class="pre">x</span></code> establishes <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&#8804;</span> <span class="pre">x</span> <span class="pre">&#8744;</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">0</span></code>,
allowing us to split on those two cases.</p>
<p>Lean also supports the computer scientists&#8217; pattern-matching
syntax for disjunction. Now the <code class="docutils literal notranslate"><span class="pre">cases</span></code> tactic is more attractive,
because it allows us to name each <code class="docutils literal notranslate"><span class="pre">case</span></code>, and name the hypothesis
that is introduced closer to where it is used.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">cases</span> <span class="n">le_or_gt</span> <span class="mi">0</span> <span class="n">y</span>
  <span class="n">case</span> <span class="n">inl</span> <span class="n">h</span> <span class="bp">=&gt;</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_nonneg</span> <span class="n">h</span><span class="o">]</span>
    <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">left</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>
  <span class="n">case</span> <span class="n">inr</span> <span class="n">h</span> <span class="bp">=&gt;</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_neg</span> <span class="n">h</span><span class="o">]</span>
    <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">right</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>
</pre></div>
</div>
<p>The names <code class="docutils literal notranslate"><span class="pre">inl</span></code> and <code class="docutils literal notranslate"><span class="pre">inr</span></code> are short for &#8220;intro left&#8221; and &#8220;intro right,&#8221;
respectively. Using <code class="docutils literal notranslate"><span class="pre">case</span></code> has the advantage is that you can prove the
cases in either order; Lean uses the tag to find the relevant goal.
If you don&#8217;t care about that, you can use <code class="docutils literal notranslate"><span class="pre">next</span></code>, or <code class="docutils literal notranslate"><span class="pre">match</span></code>,
or even a pattern-matching <code class="docutils literal notranslate"><span class="pre">have</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">cases</span> <span class="n">le_or_gt</span> <span class="mi">0</span> <span class="n">y</span>
  <span class="n">next</span> <span class="n">h</span> <span class="bp">=&gt;</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_nonneg</span> <span class="n">h</span><span class="o">]</span>
    <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">left</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>
  <span class="n">next</span> <span class="n">h</span> <span class="bp">=&gt;</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_neg</span> <span class="n">h</span><span class="o">]</span>
    <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">right</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>


<span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">match</span> <span class="n">le_or_gt</span> <span class="mi">0</span> <span class="n">y</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="n">Or.inl</span> <span class="n">h</span> <span class="bp">=&gt;</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_nonneg</span> <span class="n">h</span><span class="o">]</span>
      <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">left</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>
    <span class="bp">|</span> <span class="n">Or.inr</span> <span class="n">h</span> <span class="bp">=&gt;</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_neg</span> <span class="n">h</span><span class="o">]</span>
      <span class="n">intro</span> <span class="n">h</span><span class="bp">;</span> <span class="n">right</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">h</span>
</pre></div>
</div>
<p>In the case of the <code class="docutils literal notranslate"><span class="pre">match</span></code>, we need to use the full names
<code class="docutils literal notranslate"><span class="pre">Or.inl</span></code> and <code class="docutils literal notranslate"><span class="pre">Or.inr</span></code> of the canonical ways to prove a disjunction.
In this textbook, we will generally use <code class="docutils literal notranslate"><span class="pre">rcases</span></code> to split on the
cases of a disjunction.</p>
<p>Try proving the triangle inequality using the two
first two theorems in the next snippet.
They are given the same names they have in Mathlib.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">namespace</span> <span class="n">MyAbs</span>

<span class="kd">theorem</span> <span class="n">le_abs_self</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">theorem</span> <span class="n">neg_le_abs_self</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">-</span><span class="n">x</span> <span class="bp">&#8804;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">theorem</span> <span class="n">abs_add</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&#8804;</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">+</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>In case you enjoyed these (pun intended) and
you want more practice with disjunction,
try these.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">lt_abs</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">y</span><span class="bp">|</span> <span class="bp">&#8596;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">theorem</span> <span class="n">abs_lt</span> <span class="o">:</span> <span class="bp">|</span><span class="n">x</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8596;</span> <span class="bp">-</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">rcases</span></code> and <code class="docutils literal notranslate"><span class="pre">rintro</span></code> with nested disjunctions.
When these result in a genuine case split with multiple goals,
the patterns for each new goal are separated by a vertical bar.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">lt_trichotomy</span> <span class="n">x</span> <span class="mi">0</span> <span class="k">with</span> <span class="n">xlt</span> <span class="bp">|</span> <span class="n">xeq</span> <span class="bp">|</span> <span class="n">xgt</span>
  <span class="bp">&#183;</span> <span class="n">left</span>
    <span class="n">exact</span> <span class="n">xlt</span>
  <span class="bp">&#183;</span> <span class="n">contradiction</span>
  <span class="bp">.</span> <span class="n">right</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">xgt</span>
</pre></div>
</div>
<p>You can still nest patterns and use the <code class="docutils literal notranslate"><span class="pre">rfl</span></code> keyword
to substitute equations:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="n">k</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">n</span> <span class="bp">&#8744;</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;</span> <span class="bp">|</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;</span>
  <span class="bp">&#183;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">]</span>
    <span class="n">apply</span> <span class="n">dvd_mul_right</span>
  <span class="bp">.</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
    <span class="n">apply</span> <span class="n">dvd_mul_right</span>
</pre></div>
</div>
<p>See if you can prove the following with a single (long) line.
Use <code class="docutils literal notranslate"><span class="pre">rcases</span></code> to unpack the hypotheses and split on cases,
and use a semicolon and <code class="docutils literal notranslate"><span class="pre">linarith</span></code> to solve each branch.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">z</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">&#8744;</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">&#8805;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>On the real numbers, an equation <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">0</span></code>
tells us that <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">0</span></code>.
In Mathlib, this fact is known as <code class="docutils literal notranslate"><span class="pre">eq_zero_or_eq_zero_of_mul_eq_zero</span></code>,
and it is another nice example of how a disjunction can arise.
See if you can use it to prove the following:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>Remember that you can use the <code class="docutils literal notranslate"><span class="pre">ring</span></code> tactic to help
with calculations.</p>
<p>In an arbitrary ring <span class="math notranslate nohighlight">\(R\)</span>, an element <span class="math notranslate nohighlight">\(x\)</span> such
that <span class="math notranslate nohighlight">\(x y = 0\)</span> for some nonzero <span class="math notranslate nohighlight">\(y\)</span> is called
a <em>left zero divisor</em>,
an element <span class="math notranslate nohighlight">\(x\)</span> such
that <span class="math notranslate nohighlight">\(y x = 0\)</span> for some nonzero <span class="math notranslate nohighlight">\(y\)</span> is called
a <em>right zero divisor</em>,
and an element that is either a left or right zero divisor
is called simply a <em>zero divisor</em>.
The theorem <code class="docutils literal notranslate"><span class="pre">eq_zero_or_eq_zero_of_mul_eq_zero</span></code>
says that the real numbers have no nontrivial zero divisors.
A commutative ring with this property is called an <em>integral domain</em>.
Your proofs of the two theorems above should work equally well
in any integral domain:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">CommRing</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">IsDomain</span> <span class="n">R</span><span class="o">]</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">&#8744;</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">y</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>In fact, if you are careful, you can prove the first
theorem without using commutativity of multiplication.
In that case, it suffices to assume that <code class="docutils literal notranslate"><span class="pre">R</span></code> is
a <code class="docutils literal notranslate"><span class="pre">Ring</span></code> instead of an <code class="docutils literal notranslate"><span class="pre">CommRing</span></code>.</p>
<p id="index-22">Sometimes in a proof we want to split on cases
depending on whether some statement is true or not.
For any proposition <code class="docutils literal notranslate"><span class="pre">P</span></code>, we can use
<code class="docutils literal notranslate"><span class="pre">em</span> <span class="pre">P</span> <span class="pre">:</span> <span class="pre">P</span> <span class="pre">&#8744;</span> <span class="pre">&#172;</span> <span class="pre">P</span></code>.
The name <code class="docutils literal notranslate"><span class="pre">em</span></code> is short for &#8220;excluded middle.&#8221;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;&#172;</span><span class="n">P</span> <span class="bp">&#8594;</span> <span class="n">P</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">h</span>
  <span class="n">cases</span> <span class="n">em</span> <span class="n">P</span>
  <span class="bp">&#183;</span> <span class="n">assumption</span>
  <span class="bp">.</span> <span class="n">contradiction</span>
</pre></div>
</div>
<p id="index-23">Alternatively, you can use the <code class="docutils literal notranslate"><span class="pre">by_cases</span></code> tactic.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#172;&#172;</span><span class="n">P</span> <span class="bp">&#8594;</span> <span class="n">P</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">h</span>
  <span class="n">by_cases</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="n">P</span>
  <span class="bp">&#183;</span> <span class="n">assumption</span>
  <span class="n">contradiction</span>
</pre></div>
</div>
<p>Notice that the <code class="docutils literal notranslate"><span class="pre">by_cases</span></code> tactic lets you
specify a label for the hypothesis that is
introduced in each branch,
in this case, <code class="docutils literal notranslate"><span class="pre">h'</span> <span class="pre">:</span> <span class="pre">P</span></code> in one and <code class="docutils literal notranslate"><span class="pre">h'</span> <span class="pre">:</span> <span class="pre">&#172;</span> <span class="pre">P</span></code>
in the other.
If you leave out the label,
Lean uses <code class="docutils literal notranslate"><span class="pre">h</span></code> by default.
Try proving the following equivalence,
using <code class="docutils literal notranslate"><span class="pre">by_cases</span></code> to establish one direction.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">&#8594;</span> <span class="n">Q</span> <span class="bp">&#8596;</span> <span class="bp">&#172;</span><span class="n">P</span> <span class="bp">&#8744;</span> <span class="n">Q</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="sequences-and-convergence">
<span id="id6"></span><h2><span class="section-number">3.6. </span>Sequences and Convergence<a class="headerlink" href="#sequences-and-convergence" title="Link to this heading">&#61633;</a></h2>
<p>We now have enough skills at our disposal to do some real mathematics.
In Lean, we can represent a sequence <span class="math notranslate nohighlight">\(s_0, s_1, s_2, \ldots\)</span> of
real numbers as a function <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;</span></code>.
Such a sequence is said to <em>converge</em> to a number <span class="math notranslate nohighlight">\(a\)</span> if for every
<span class="math notranslate nohighlight">\(\varepsilon &gt; 0\)</span> there is a point beyond which the sequence
remains within <span class="math notranslate nohighlight">\(\varepsilon\)</span> of <span class="math notranslate nohighlight">\(a\)</span>,
that is, there is a number <span class="math notranslate nohighlight">\(N\)</span> such that for every
<span class="math notranslate nohighlight">\(n \ge N\)</span>, <span class="math notranslate nohighlight">\(| s_n - a | &lt; \varepsilon\)</span>.
In Lean, we can render this as follows:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">ConvergesTo</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">&#949;</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">N</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="n">N</span><span class="o">,</span> <span class="bp">|</span><span class="n">s</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span>
</pre></div>
</div>
<p>The notation <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">&#949;</span> <span class="pre">&gt;</span> <span class="pre">0,</span> <span class="pre">...</span></code> is a convenient abbreviation
for <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">&#949;,</span> <span class="pre">&#949;</span> <span class="pre">&gt;</span> <span class="pre">0</span> <span class="pre">&#8594;</span> <span class="pre">...</span></code>, and, similarly,
<code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">n</span> <span class="pre">&#8805;</span> <span class="pre">N,</span> <span class="pre">...</span></code> abbreviates <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">n,</span> <span class="pre">n</span> <span class="pre">&#8805;</span> <span class="pre">N</span> <span class="pre">&#8594;</span>&#160; <span class="pre">...</span></code>.
And remember that <code class="docutils literal notranslate"><span class="pre">&#949;</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>, in turn, is defined as <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">&#949;</span></code>,
and <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&#8805;</span> <span class="pre">N</span></code> is defined as <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">&#8804;</span> <span class="pre">n</span></code>.</p>
<p id="index-24">In this section, we&#8217;ll establish some properties of convergence.
But first, we will discuss three tactics for working with equality
that will prove useful.
The first, the <code class="docutils literal notranslate"><span class="pre">ext</span></code> tactic,
gives us a way of proving that two functions are equal.
Let <span class="math notranslate nohighlight">\(f(x) = x + 1\)</span> and <span class="math notranslate nohighlight">\(g(x) = 1 + x\)</span>
be functions from reals to reals.
Then, of course, <span class="math notranslate nohighlight">\(f = g\)</span>, because they return the same
value for every <span class="math notranslate nohighlight">\(x\)</span>.
The <code class="docutils literal notranslate"><span class="pre">ext</span></code> tactic enables us to prove an equation between functions
by proving that their values are the same
at all the values of their arguments.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8614;</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="k">fun</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">&#8614;</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">ext</span>
  <span class="n">ring</span>
</pre></div>
</div>
<p id="index-25">We&#8217;ll see later that <code class="docutils literal notranslate"><span class="pre">ext</span></code> is actually more general, and also one can
specify the name of the variables that appear.
For instance you can try to replace <code class="docutils literal notranslate"><span class="pre">ext</span></code> with <code class="docutils literal notranslate"><span class="pre">ext</span> <span class="pre">u</span> <span class="pre">v</span></code> in the
above proof.
The second tactic, the <code class="docutils literal notranslate"><span class="pre">congr</span></code> tactic,
allows us to prove an equation between two expressions
by reconciling the parts that are different:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">|</span><span class="n">a</span><span class="bp">|</span> <span class="bp">=</span> <span class="bp">|</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">|</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">congr</span>
  <span class="n">ring</span>
</pre></div>
</div>
<p>Here the <code class="docutils literal notranslate"><span class="pre">congr</span></code> tactic peels off the <code class="docutils literal notranslate"><span class="pre">abs</span></code> on each side,
leaving us to prove <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">-</span> <span class="pre">b</span> <span class="pre">+</span> <span class="pre">b</span></code>.</p>
<p id="index-26">Finally, the <code class="docutils literal notranslate"><span class="pre">convert</span></code> tactic is used to apply a theorem
to a goal when the conclusion of the theorem doesn&#8217;t quite match.
For example, suppose we want to prove <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">a</span></code> from <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;</span> <span class="pre">a</span></code>.
A theorem in the library, <code class="docutils literal notranslate"><span class="pre">mul_lt_mul_right</span></code>,
will let us prove <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">*</span> <span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">a</span></code>.
One possibility is to work backwards and rewrite the goal
so that it has that form.
Instead, the <code class="docutils literal notranslate"><span class="pre">convert</span></code> tactic lets us apply the theorem
as it is,
and leaves us with the task of proving the equations that
are needed to make the goal match.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">convert</span> <span class="o">(</span><span class="n">mul_lt_mul_right</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="n">h</span>
  <span class="bp">&#183;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span>
  <span class="n">exact</span> <span class="n">lt_trans</span> <span class="n">zero_lt_one</span> <span class="n">h</span>
</pre></div>
</div>
<p>This example illustrates another useful trick: when we apply an
expression with an underscore
and Lean can&#8217;t fill it in for us automatically,
it simply leaves it for us as another goal.</p>
<p>The following shows that any constant sequence <span class="math notranslate nohighlight">\(a, a, a, \ldots\)</span>
converges.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">convergesTo_const</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8614;</span> <span class="n">a</span><span class="o">)</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">&#949;</span> <span class="n">&#949;pos</span>
  <span class="n">use</span> <span class="mi">0</span>
  <span class="n">intro</span> <span class="n">n</span> <span class="n">nge</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">sub_self</span><span class="o">,</span> <span class="n">abs_zero</span><span class="o">]</span>
  <span class="n">apply</span> <span class="n">&#949;pos</span>
</pre></div>
</div>
<p>Lean has a tactic, <code class="docutils literal notranslate"><span class="pre">simp</span></code>, which can often save you the
trouble of carrying out steps like <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">[sub_self,</span> <span class="pre">abs_zero]</span></code>
by hand.
We will tell you more about it soon.</p>
<p>For a more interesting theorem, let&#8217;s show that if <code class="docutils literal notranslate"><span class="pre">s</span></code>
converges to <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">t</span></code> converges to <code class="docutils literal notranslate"><span class="pre">b</span></code>, then
<code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">n</span> <span class="pre">&#8614;</span> <span class="pre">s</span> <span class="pre">n</span> <span class="pre">+</span> <span class="pre">t</span> <span class="pre">n</span></code> converges to <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code>.
It is helpful to have a clear pen-and-paper
proof in mind before you start writing a formal one.
Given <code class="docutils literal notranslate"><span class="pre">&#949;</span></code> greater than <code class="docutils literal notranslate"><span class="pre">0</span></code>,
the idea is to use the hypotheses to obtain an <code class="docutils literal notranslate"><span class="pre">Ns</span></code>
such that beyond that point, <code class="docutils literal notranslate"><span class="pre">s</span></code> is within <code class="docutils literal notranslate"><span class="pre">&#949;</span> <span class="pre">/</span> <span class="pre">2</span></code>
of <code class="docutils literal notranslate"><span class="pre">a</span></code>,
and an <code class="docutils literal notranslate"><span class="pre">Nt</span></code> such that beyond that point, <code class="docutils literal notranslate"><span class="pre">t</span></code> is within
<code class="docutils literal notranslate"><span class="pre">&#949;</span> <span class="pre">/</span> <span class="pre">2</span></code> of <code class="docutils literal notranslate"><span class="pre">b</span></code>.
Then, whenever <code class="docutils literal notranslate"><span class="pre">n</span></code> is greater than or equal to the
maximum of <code class="docutils literal notranslate"><span class="pre">Ns</span></code> and <code class="docutils literal notranslate"><span class="pre">Nt</span></code>,
the sequence <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">n</span> <span class="pre">&#8614;</span> <span class="pre">s</span> <span class="pre">n</span> <span class="pre">+</span> <span class="pre">t</span> <span class="pre">n</span></code> should be within <code class="docutils literal notranslate"><span class="pre">&#949;</span></code>
of <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code>.
The following example begins to implement this strategy.
See if you can finish it off.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">convergesTo_add</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span>
      <span class="o">(</span><span class="n">cs</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">s</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">ct</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">t</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">ConvergesTo</span> <span class="o">(</span><span class="k">fun</span> <span class="n">n</span> <span class="bp">&#8614;</span> <span class="n">s</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">t</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">&#949;</span> <span class="n">&#949;pos</span>
  <span class="n">dsimp</span> <span class="c1">-- this line is not needed but cleans up the goal a bit.</span>
  <span class="k">have</span> <span class="n">&#949;2pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span>
  <span class="n">rcases</span> <span class="n">cs</span> <span class="o">(</span><span class="n">&#949;</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="n">&#949;2pos</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">Ns</span><span class="o">,</span> <span class="n">hs</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">ct</span> <span class="o">(</span><span class="n">&#949;</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="n">&#949;2pos</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">Nt</span><span class="o">,</span> <span class="n">ht</span><span class="o">&#10217;</span>
  <span class="n">use</span> <span class="n">max</span> <span class="n">Ns</span> <span class="n">Nt</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>As hints, you can use <code class="docutils literal notranslate"><span class="pre">le_of_max_le_left</span></code> and <code class="docutils literal notranslate"><span class="pre">le_of_max_le_right</span></code>,
and <code class="docutils literal notranslate"><span class="pre">norm_num</span></code> can prove <code class="docutils literal notranslate"><span class="pre">&#949;</span> <span class="pre">/</span> <span class="pre">2</span> <span class="pre">+</span> <span class="pre">&#949;</span> <span class="pre">/</span> <span class="pre">2</span> <span class="pre">=</span> <span class="pre">&#949;</span></code>.
Also, it is helpful to use the <code class="docutils literal notranslate"><span class="pre">congr</span></code> tactic to
show that <code class="docutils literal notranslate"><span class="pre">|s</span> <span class="pre">n</span> <span class="pre">+</span> <span class="pre">t</span> <span class="pre">n</span> <span class="pre">-</span> <span class="pre">(a</span> <span class="pre">+</span> <span class="pre">b)|</span></code> is equal to
<code class="docutils literal notranslate"><span class="pre">|(s</span> <span class="pre">n</span> <span class="pre">-</span> <span class="pre">a)</span> <span class="pre">+</span> <span class="pre">(t</span> <span class="pre">n</span> <span class="pre">-</span> <span class="pre">b)|,</span></code>
since then you can use the triangle inequality.
Notice that we marked all the variables <code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code>, and <code class="docutils literal notranslate"><span class="pre">b</span></code>
implicit because they can be inferred from the hypotheses.</p>
<p>Proving the same theorem with multiplication in place
of addition is tricky.
We will get there by proving some auxiliary statements first.
See if you can also finish off the next proof,
which shows that if <code class="docutils literal notranslate"><span class="pre">s</span></code> converges to <code class="docutils literal notranslate"><span class="pre">a</span></code>,
then <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">n</span> <span class="pre">&#8614;</span> <span class="pre">c</span> <span class="pre">*</span> <span class="pre">s</span> <span class="pre">n</span></code> converges to <code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">*</span> <span class="pre">a</span></code>.
It is helpful to split into cases depending on whether <code class="docutils literal notranslate"><span class="pre">c</span></code>
is equal to zero or not.
We have taken care of the zero case,
and we have left you to prove the result with
the extra assumption that <code class="docutils literal notranslate"><span class="pre">c</span></code> is nonzero.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">convergesTo_mul_const</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">cs</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">s</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">ConvergesTo</span> <span class="o">(</span><span class="k">fun</span> <span class="n">n</span> <span class="bp">&#8614;</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">s</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">by_cases</span> <span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
  <span class="bp">&#183;</span> <span class="n">convert</span> <span class="n">convergesTo_const</span> <span class="mi">0</span>
    <span class="bp">&#183;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
      <span class="n">ring</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
    <span class="n">ring</span>
  <span class="k">have</span> <span class="n">acpos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">c</span><span class="bp">|</span> <span class="o">:=</span> <span class="n">abs_pos.mpr</span> <span class="n">h</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>The next theorem is also independently interesting:
it shows that a convergent sequence is eventually bounded
in absolute value.
We have started you off; see if you can finish it.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">exists_abs_le_of_convergesTo</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">cs</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">s</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">&#8707;</span> <span class="n">N</span> <span class="n">b</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">n</span><span class="o">,</span> <span class="n">N</span> <span class="bp">&#8804;</span> <span class="n">n</span> <span class="bp">&#8594;</span> <span class="bp">|</span><span class="n">s</span> <span class="n">n</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">cs</span> <span class="mi">1</span> <span class="n">zero_lt_one</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">N</span><span class="o">,</span> <span class="n">h</span><span class="o">&#10217;</span>
  <span class="n">use</span> <span class="n">N</span><span class="o">,</span> <span class="bp">|</span><span class="n">a</span><span class="bp">|</span> <span class="bp">+</span> <span class="mi">1</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>In fact, the theorem could be strengthened to assert
that there is a bound <code class="docutils literal notranslate"><span class="pre">b</span></code> that holds for all values of <code class="docutils literal notranslate"><span class="pre">n</span></code>.
But this version is strong enough for our purposes,
and we will see at the end of this section that it
holds more generally.</p>
<p>The next lemma is auxiliary: we prove that if
<code class="docutils literal notranslate"><span class="pre">s</span></code> converges to <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">t</span></code> converges to <code class="docutils literal notranslate"><span class="pre">0</span></code>,
then <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">n</span> <span class="pre">&#8614;</span> <span class="pre">s</span> <span class="pre">n</span> <span class="pre">*</span> <span class="pre">t</span> <span class="pre">n</span></code> converges to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
To do so, we use the previous theorem to find a <code class="docutils literal notranslate"><span class="pre">B</span></code>
that bounds <code class="docutils literal notranslate"><span class="pre">s</span></code> beyond some point <code class="docutils literal notranslate"><span class="pre">N&#8320;</span></code>.
See if you can understand the strategy we have outlined
and finish the proof.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">aux</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">cs</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">s</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">ct</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">t</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">ConvergesTo</span> <span class="o">(</span><span class="k">fun</span> <span class="n">n</span> <span class="bp">&#8614;</span> <span class="n">s</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">t</span> <span class="n">n</span><span class="o">)</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">intro</span> <span class="n">&#949;</span> <span class="n">&#949;pos</span>
  <span class="n">dsimp</span>
  <span class="n">rcases</span> <span class="n">exists_abs_le_of_convergesTo</span> <span class="n">cs</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">N&#8320;</span><span class="o">,</span> <span class="n">B</span><span class="o">,</span> <span class="n">h&#8320;</span><span class="o">&#10217;</span>
  <span class="k">have</span> <span class="n">Bpos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">lt_of_le_of_lt</span> <span class="o">(</span><span class="n">abs_nonneg</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="n">N&#8320;</span> <span class="o">(</span><span class="n">le_refl</span> <span class="n">_</span><span class="o">))</span>
  <span class="k">have</span> <span class="n">pos&#8320;</span> <span class="o">:</span> <span class="n">&#949;</span> <span class="bp">/</span> <span class="n">B</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">div_pos</span> <span class="n">&#949;pos</span> <span class="n">Bpos</span>
  <span class="n">rcases</span> <span class="n">ct</span> <span class="n">_</span> <span class="n">pos&#8320;</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">N&#8321;</span><span class="o">,</span> <span class="n">h&#8321;</span><span class="o">&#10217;</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<p>If you have made it this far, congratulations!
We are now within striking distance of our theorem.
The following proof finishes it off.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">convergesTo_mul</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span>
      <span class="o">(</span><span class="n">cs</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">s</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">ct</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">t</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">ConvergesTo</span> <span class="o">(</span><span class="k">fun</span> <span class="n">n</span> <span class="bp">&#8614;</span> <span class="n">s</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">t</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="o">(</span><span class="k">fun</span> <span class="n">n</span> <span class="bp">&#8614;</span> <span class="n">s</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">t</span> <span class="n">n</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">b</span><span class="o">))</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">apply</span> <span class="n">aux</span> <span class="n">cs</span>
    <span class="n">convert</span> <span class="n">convergesTo_add</span> <span class="n">ct</span> <span class="o">(</span><span class="n">convergesTo_const</span> <span class="o">(</span><span class="bp">-</span><span class="n">b</span><span class="o">))</span>
    <span class="n">ring</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">convergesTo_add</span> <span class="n">h&#8321;</span> <span class="o">(</span><span class="n">convergesTo_mul_const</span> <span class="n">b</span> <span class="n">cs</span><span class="o">)</span>
  <span class="n">convert</span> <span class="n">convergesTo_add</span> <span class="n">h&#8321;</span> <span class="o">(</span><span class="n">convergesTo_mul_const</span> <span class="n">b</span> <span class="n">cs</span><span class="o">)</span> <span class="n">using</span> <span class="mi">1</span>
  <span class="bp">&#183;</span> <span class="n">ext</span><span class="bp">;</span> <span class="n">ring</span>
  <span class="n">ring</span>
</pre></div>
</div>
<p>For another challenging exercise,
try filling out the following sketch of a proof that limits
are unique.
(If you are feeling bold,
you can delete the proof sketch and try proving it from scratch.)</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">convergesTo_unique</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span>
      <span class="o">(</span><span class="n">sa</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">s</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">sb</span> <span class="o">:</span> <span class="n">ConvergesTo</span> <span class="n">s</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">by_contra</span> <span class="n">abne</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">|</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">|</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span>
  <span class="k">let</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="bp">|</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">|</span> <span class="bp">/</span> <span class="mi">2</span>
  <span class="k">have</span> <span class="n">&#949;pos</span> <span class="o">:</span> <span class="n">&#949;</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">change</span> <span class="bp">|</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">|</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&gt;</span> <span class="mi">0</span>
    <span class="n">linarith</span>
  <span class="n">rcases</span> <span class="n">sa</span> <span class="n">&#949;</span> <span class="n">&#949;pos</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">Na</span><span class="o">,</span> <span class="n">hNa</span><span class="o">&#10217;</span>
  <span class="n">rcases</span> <span class="n">sb</span> <span class="n">&#949;</span> <span class="n">&#949;pos</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">Nb</span><span class="o">,</span> <span class="n">hNb</span><span class="o">&#10217;</span>
  <span class="k">let</span> <span class="n">N</span> <span class="o">:=</span> <span class="n">max</span> <span class="n">Na</span> <span class="n">Nb</span>
  <span class="k">have</span> <span class="n">absa</span> <span class="o">:</span> <span class="bp">|</span><span class="n">s</span> <span class="n">N</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span>
  <span class="k">have</span> <span class="n">absb</span> <span class="o">:</span> <span class="bp">|</span><span class="n">s</span> <span class="n">N</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">|</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">|</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span>
  <span class="n">exact</span> <span class="n">lt_irrefl</span> <span class="n">_</span> <span class="n">this</span>
</pre></div>
</div>
<p>We close the section with the observation that our proofs can be generalized.
For example, the only properties that we have used of the
natural numbers is that their structure carries a partial order
with <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code>.
You can check that everything still works if you replace <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code>
everywhere by any linear order <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">LinearOrder</span> <span class="n">&#945;</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">ConvergesTo&#39;</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">&#8704;</span> <span class="n">&#949;</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">&#8707;</span> <span class="n">N</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="n">N</span><span class="o">,</span> <span class="bp">|</span><span class="n">s</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">&#949;</span>
</pre></div>
</div>
<p>In <a class="reference internal" href="C09_Topology.html#filters"><span class="std std-numref">Section 9.1</span></a>, we will see that Mathlib has mechanisms
for dealing with convergence in vastly more general terms,
not only abstracting away particular features of the domain
and codomain,
but also abstracting over different types of convergence.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C02_Basics.html" class="btn btn-neutral float-left" title="2. &#22522;&#30784;&#30693;&#35782;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="C04_Sets_and_Functions.html" class="btn btn-neutral float-right" title="4. Sets and Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Jeremy Avigad, Patrick Massot.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>